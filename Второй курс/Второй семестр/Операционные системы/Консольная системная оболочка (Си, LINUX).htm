<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>МИНИСТЕРСТВО ОБЩЕГО И ПРОФЕССИОНАЛЬНОГО ОБРАЗОВАНИЯ</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 3 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Liberation Serif";}
@font-face
	{font-family:"Droid Sans Devanagari";}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:"Bahnschrift Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Bahnschrift;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Light SemiCondensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight SemiConde";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiCondensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold SemiConden";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Light Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Candara Light";
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Corbel Light";
	panose-1:2 11 3 3 2 2 4 2 2 4;}
@font-face
	{font-family:Ebrima;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:Gabriola;
	panose-1:4 4 6 5 5 16 2 2 13 2;}
@font-face
	{font-family:Gadugi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:"Ink Free";
	panose-1:3 8 4 2 0 5 0 0 0 0;}
@font-face
	{font-family:"Javanese Text";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Leelawadee UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Leelawadee UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@Malgun Gothic";}
@font-face
	{font-family:"Malgun Gothic Semilight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Malgun Gothic Semilight";}
@font-face
	{font-family:"Microsoft Himalaya";
	panose-1:1 1 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei";}
@font-face
	{font-family:"Microsoft JhengHei UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei UI";}
@font-face
	{font-family:"Microsoft JhengHei Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei Light";}
@font-face
	{font-family:"Microsoft JhengHei UI Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei UI Light";}
@font-face
	{font-family:"Microsoft New Tai Lue";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft PhagsPa";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Microsoft Tai Le";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft YaHei";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@Microsoft YaHei";}
@font-face
	{font-family:"Microsoft YaHei UI";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@Microsoft YaHei UI";}
@font-face
	{font-family:"Microsoft YaHei Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Microsoft YaHei Light";}
@font-face
	{font-family:"Microsoft YaHei UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Microsoft YaHei UI Light";}
@font-face
	{font-family:"Microsoft Yi Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU-ExtB";}
@font-face
	{font-family:PMingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU-ExtB";}
@font-face
	{font-family:MingLiU_HKSCS-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS-ExtB";}
@font-face
	{font-family:"Mongolian Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS UI Gothic";}
@font-face
	{font-family:"MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS PGothic";}
@font-face
	{font-family:"MV Boli";
	panose-1:2 0 5 0 3 2 0 9 0 0;}
@font-face
	{font-family:"Myanmar Text";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Nirmala UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Nirmala UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe MDL2 Assets";
	panose-1:5 10 1 2 1 1 1 1 1 1;}
@font-face
	{font-family:"Segoe Print";
	panose-1:2 0 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Segoe Script";
	panose-1:3 11 5 4 2 0 0 0 0 3;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Black";
	panose-1:2 11 10 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Historic";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:NSimSun;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@NSimSun";}
@font-face
	{font-family:SimSun-ExtB;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@SimSun-ExtB";}
@font-face
	{font-family:"Sitka Small";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Text";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Subheading";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Heading";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Display";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Banner";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:"\@Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic UI";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI";}
@font-face
	{font-family:"Yu Gothic UI Semibold";
	panose-1:2 11 7 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Semibold";}
@font-face
	{font-family:"Yu Gothic Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic Light";}
@font-face
	{font-family:"Yu Gothic UI Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Light";}
@font-face
	{font-family:"Yu Gothic Medium";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic Medium";}
@font-face
	{font-family:"Yu Gothic UI Semilight";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Semilight";}
@font-face
	{font-family:"HoloLens MDL2 Assets";
	panose-1:5 10 1 2 1 1 1 1 1 1;}
@font-face
	{font-family:"ROG Fonts v1\.6";
	panose-1:0 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:Dubai;
	panose-1:2 11 5 3 3 4 3 3 2 4;}
@font-face
	{font-family:"Dubai Light";
	panose-1:2 11 3 3 3 4 3 3 2 4;}
@font-face
	{font-family:"Dubai Medium";
	panose-1:2 11 6 3 3 4 3 3 2 4;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:Leelawadee;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Uighur";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:qtquickcontrols;
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:"Cascadia Code ExtraLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code Light";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code SemiLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code SemiBold";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono ExtraLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono Light";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono SemiLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono SemiBold";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"JetBrains Mono ExtraLight";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono Light";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono Medium";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono NL";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono NL ExtraBold";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono NL ExtraLight";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono NL Light";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono NL Medium";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono NL Thin";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono Thin";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"JetBrains Mono ExtraBold";
	panose-1:2 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:Abadi;}
@font-face
	{font-family:"Abadi Extra Light";}
@font-face
	{font-family:"Agency FB";}
@font-face
	{font-family:Aharoni;}
@font-face
	{font-family:Aldhabi;}
@font-face
	{font-family:Alef;}
@font-face
	{font-family:Algerian;}
@font-face
	{font-family:"Amasis MT Pro";}
@font-face
	{font-family:"Amasis MT Pro Black";}
@font-face
	{font-family:"Amasis MT Pro Light";}
@font-face
	{font-family:"Amasis MT Pro Medium";}
@font-face
	{font-family:"Amatic SC";}
@font-face
	{font-family:AngsanaUPC;}
@font-face
	{font-family:Anton;}
@font-face
	{font-family:Aparajita;}
@font-face
	{font-family:"Arabic Typesetting";}
@font-face
	{font-family:"Aref Ruqaa";}
@font-face
	{font-family:"Arial Nova";}
@font-face
	{font-family:"Arial Nova Cond";}
@font-face
	{font-family:"Arial Nova Cond Light";}
@font-face
	{font-family:"Arial Nova Light";}
@font-face
	{font-family:"Arial Rounded MT Bold";}
@font-face
	{font-family:Assistant;}
@font-face
	{font-family:"Assistant ExtraBold";}
@font-face
	{font-family:"Assistant ExtraLight";}
@font-face
	{font-family:"Assistant Light";}
@font-face
	{font-family:"Assistant SemiBold";}
@font-face
	{font-family:Athiti;}
@font-face
	{font-family:"Athiti ExtraLight";}
@font-face
	{font-family:"Athiti Light";}
@font-face
	{font-family:"Athiti Medium";}
@font-face
	{font-family:"Athiti SemiBold";}
@font-face
	{font-family:"Avenir Next LT Pro";}
@font-face
	{font-family:"Avenir Next LT Pro Demi";}
@font-face
	{font-family:"Avenir Next LT Pro Light";}
@font-face
	{font-family:Barlow;}
@font-face
	{font-family:"Barlow Black";}
@font-face
	{font-family:"Barlow Condensed";}
@font-face
	{font-family:"Barlow Condensed Black";}
@font-face
	{font-family:"Barlow Condensed ExtraBold";}
@font-face
	{font-family:"Barlow Condensed ExtraLight";}
@font-face
	{font-family:"Barlow Condensed Light";}
@font-face
	{font-family:"Barlow Condensed Medium";}
@font-face
	{font-family:"Barlow Condensed SemiBold";}
@font-face
	{font-family:"Barlow Condensed Thin";}
@font-face
	{font-family:"Barlow ExtraBold";}
@font-face
	{font-family:"Barlow ExtraLight";}
@font-face
	{font-family:"Barlow Light";}
@font-face
	{font-family:"Barlow Medium";}
@font-face
	{font-family:"Barlow Semi Condensed";}
@font-face
	{font-family:"Barlow Semi Condensed Black";}
@font-face
	{font-family:"Barlow Semi Condensed ExLight";}
@font-face
	{font-family:"Barlow Semi Condensed ExtraBold";}
@font-face
	{font-family:"Barlow Semi Condensed Light";}
@font-face
	{font-family:"Barlow Semi Condensed Medium";}
@font-face
	{font-family:"Barlow Semi Condensed SemiBold";}
@font-face
	{font-family:"Barlow Semi Condensed Thin";}
@font-face
	{font-family:"Barlow SemiBold";}
@font-face
	{font-family:"Barlow Thin";}
@font-face
	{font-family:"Baskerville Old Face";}
@font-face
	{font-family:BatangChe;}
@font-face
	{font-family:"Bauhaus 93";}
@font-face
	{font-family:"Bell MT";}
@font-face
	{font-family:Bembo;}
@font-face
	{font-family:"Berlin Sans FB";}
@font-face
	{font-family:"Berlin Sans FB Demi";}
@font-face
	{font-family:"Bernard MT Condensed";}
@font-face
	{font-family:Bierstadt;}
@font-face
	{font-family:"Bierstadt Display";}
@font-face
	{font-family:Biome;}
@font-face
	{font-family:"Biome Light";}
@font-face
	{font-family:"Blackadder ITC";}
@font-face
	{font-family:"Bodoni MT";}
@font-face
	{font-family:"Bodoni MT Black";}
@font-face
	{font-family:"Bodoni MT Condensed";}
@font-face
	{font-family:"Bodoni MT Poster Compressed";}
@font-face
	{font-family:"Bradley Hand ITC";}
@font-face
	{font-family:"Britannic Bold";}
@font-face
	{font-family:Broadway;}
@font-face
	{font-family:"Browallia New";}
@font-face
	{font-family:BrowalliaUPC;}
@font-face
	{font-family:"Brush Script MT";}
@font-face
	{font-family:"Californian FB";}
@font-face
	{font-family:"Calisto MT";}
@font-face
	{font-family:Castellar;}
@font-face
	{font-family:Cavolini;}
@font-face
	{font-family:Centaur;}
@font-face
	{font-family:"Century Schoolbook";}
@font-face
	{font-family:Charmonman;}
@font-face
	{font-family:Chiller;}
@font-face
	{font-family:Chonburi;}
@font-face
	{font-family:"Colonna MT";}
@font-face
	{font-family:"Cooper Black";}
@font-face
	{font-family:"Copperplate Gothic Bold";}
@font-face
	{font-family:"Copperplate Gothic Light";}
@font-face
	{font-family:CordiaUPC;}
@font-face
	{font-family:"Curlz MT";}
@font-face
	{font-family:Dante;}
@font-face
	{font-family:DaunPenh;}
@font-face
	{font-family:David;}
@font-face
	{font-family:Daytona;}
@font-face
	{font-family:"Daytona Condensed";}
@font-face
	{font-family:"Daytona Condensed Light";}
@font-face
	{font-family:"Daytona Light";}
@font-face
	{font-family:"DengXian Light";}
@font-face
	{font-family:DilleniaUPC;}
@font-face
	{font-family:DokChampa;}
@font-face
	{font-family:Dosis;}
@font-face
	{font-family:"Dosis ExtraBold";}
@font-face
	{font-family:"Dosis ExtraLight";}
@font-face
	{font-family:"Dosis Light";}
@font-face
	{font-family:"Dosis Medium";}
@font-face
	{font-family:"Dosis SemiBold";}
@font-face
	{font-family:DotumChe;}
@font-face
	{font-family:"EB Garamond";}
@font-face
	{font-family:"EB Garamond ExtraBold";}
@font-face
	{font-family:"EB Garamond Medium";}
@font-face
	{font-family:"EB Garamond SemiBold";}
@font-face
	{font-family:"Edwardian Script ITC";}
@font-face
	{font-family:Elephant;}
@font-face
	{font-family:"Elephant Pro";}
@font-face
	{font-family:"Engravers MT";}
@font-face
	{font-family:"Eras Bold ITC";}
@font-face
	{font-family:"Eras Demi ITC";}
@font-face
	{font-family:"Eras Light ITC";}
@font-face
	{font-family:"Eras Medium ITC";}
@font-face
	{font-family:EucrosiaUPC;}
@font-face
	{font-family:Euphemia;}
@font-face
	{font-family:Fahkwang;}
@font-face
	{font-family:"Fahkwang ExtraLight";}
@font-face
	{font-family:"Fahkwang Light";}
@font-face
	{font-family:"Fahkwang Medium";}
@font-face
	{font-family:"Fahkwang SemiBold";}
@font-face
	{font-family:FangSong;}
@font-face
	{font-family:"Felix Titling";}
@font-face
	{font-family:"Fira Code";}
@font-face
	{font-family:"Fira Code Light";}
@font-face
	{font-family:"Fira Code Medium";}
@font-face
	{font-family:"Fira Code Retina";}
@font-face
	{font-family:"Fira Mono";}
@font-face
	{font-family:"Fira Mono Medium";}
@font-face
	{font-family:"Fira Sans";}
@font-face
	{font-family:"Fira Sans Black";}
@font-face
	{font-family:"Fira Sans Condensed";}
@font-face
	{font-family:"Fira Sans Condensed Black";}
@font-face
	{font-family:"Fira Sans Condensed ExtraBold";}
@font-face
	{font-family:"Fira Sans Condensed ExtraLight";}
@font-face
	{font-family:"Fira Sans Condensed Light";}
@font-face
	{font-family:"Fira Sans Condensed Medium";}
@font-face
	{font-family:"Fira Sans Condensed SemiBold";}
@font-face
	{font-family:"Fira Sans Condensed Thin";}
@font-face
	{font-family:"Fira Sans Extra Condensed";}
@font-face
	{font-family:"Fira Sans Extra Condensed Black";}
@font-face
	{font-family:"Fira Sans Extra Condensed Light";}
@font-face
	{font-family:"Fira Sans Extra Condensed Thin";}
@font-face
	{font-family:"Fira Sans ExtraBold";}
@font-face
	{font-family:"Fira Sans ExtraLight";}
@font-face
	{font-family:"Fira Sans Light";}
@font-face
	{font-family:"Fira Sans Medium";}
@font-face
	{font-family:"Fira Sans SemiBold";}
@font-face
	{font-family:"Fira Sans Thin";}
@font-face
	{font-family:"Footlight MT Light";}
@font-face
	{font-family:Forte;}
@font-face
	{font-family:"Frank Ruhl Libre";}
@font-face
	{font-family:"Frank Ruhl Libre Black";}
@font-face
	{font-family:"Frank Ruhl Libre Light";}
@font-face
	{font-family:"Frank Ruhl Libre Medium";}
@font-face
	{font-family:"Franklin Gothic Book";}
@font-face
	{font-family:"Franklin Gothic Demi";}
@font-face
	{font-family:"Franklin Gothic Demi Cond";}
@font-face
	{font-family:"Franklin Gothic Heavy";}
@font-face
	{font-family:"Franklin Gothic Medium Cond";}
@font-face
	{font-family:FrankRuehl;}
@font-face
	{font-family:FreesiaUPC;}
@font-face
	{font-family:"Freestyle Script";}
@font-face
	{font-family:"French Script MT";}
@font-face
	{font-family:"Georgia Pro";}
@font-face
	{font-family:"Georgia Pro Black";}
@font-face
	{font-family:"Georgia Pro Cond";}
@font-face
	{font-family:"Georgia Pro Cond Black";}
@font-face
	{font-family:"Georgia Pro Cond Light";}
@font-face
	{font-family:"Georgia Pro Cond Semibold";}
@font-face
	{font-family:"Georgia Pro Light";}
@font-face
	{font-family:"Georgia Pro Semibold";}
@font-face
	{font-family:Gigi;}
@font-face
	{font-family:"Gill Sans MT";}
@font-face
	{font-family:"Gill Sans MT Condensed";}
@font-face
	{font-family:"Gill Sans Nova";}
@font-face
	{font-family:"Gill Sans Nova Cond";}
@font-face
	{font-family:"Gill Sans Nova Cond Lt";}
@font-face
	{font-family:"Gill Sans Nova Cond Ultra Bold";}
@font-face
	{font-family:"Gill Sans Nova Cond XBd";}
@font-face
	{font-family:"Gill Sans Nova Light";}
@font-face
	{font-family:"Gill Sans Nova Ultra Bold";}
@font-face
	{font-family:"Gill Sans Ultra Bold";}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";}
@font-face
	{font-family:Gisha;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";}
@font-face
	{font-family:"Goudy Old Style";}
@font-face
	{font-family:"Goudy Stout";}
@font-face
	{font-family:"Goudy Type";}
@font-face
	{font-family:Grandview;}
@font-face
	{font-family:"Grandview Display";}
@font-face
	{font-family:Grotesque;}
@font-face
	{font-family:"Grotesque Light";}
@font-face
	{font-family:GulimChe;}
@font-face
	{font-family:Gungsuh;}
@font-face
	{font-family:GungsuhChe;}
@font-face
	{font-family:"Hadassah Friedlaender";}
@font-face
	{font-family:Haettenschweiler;}
@font-face
	{font-family:Harrington;}
@font-face
	{font-family:Heebo;}
@font-face
	{font-family:"Heebo Black";}
@font-face
	{font-family:"Heebo ExtraBold";}
@font-face
	{font-family:"Heebo Light";}
@font-face
	{font-family:"Heebo Medium";}
@font-face
	{font-family:"Heebo Thin";}
@font-face
	{font-family:HGGothicE;}
@font-face
	{font-family:HGMaruGothicMPRO;}
@font-face
	{font-family:HGMinchoE;}
@font-face
	{font-family:HGPGothicE;}
@font-face
	{font-family:HGPMinchoE;}
@font-face
	{font-family:HGPSoeiKakugothicUB;}
@font-face
	{font-family:HGSGothicE;}
@font-face
	{font-family:HGSMinchoE;}
@font-face
	{font-family:HGSoeiKakugothicUB;}
@font-face
	{font-family:HGSSoeiKakugothicUB;}
@font-face
	{font-family:"High Tower Text";}
@font-face
	{font-family:Hind;}
@font-face
	{font-family:"Hind Colombo";}
@font-face
	{font-family:"Hind Colombo Light";}
@font-face
	{font-family:"Hind Colombo Medium";}
@font-face
	{font-family:"Hind Colombo SemiBold";}
@font-face
	{font-family:"Hind Guntur";}
@font-face
	{font-family:"Hind Guntur Light";}
@font-face
	{font-family:"Hind Guntur Medium";}
@font-face
	{font-family:"Hind Guntur SemiBold";}
@font-face
	{font-family:"Hind Jalandhar";}
@font-face
	{font-family:"Hind Jalandhar Light";}
@font-face
	{font-family:"Hind Jalandhar Medium";}
@font-face
	{font-family:"Hind Jalandhar SemiBold";}
@font-face
	{font-family:"Hind Kochi";}
@font-face
	{font-family:"Hind Kochi Light";}
@font-face
	{font-family:"Hind Kochi Medium";}
@font-face
	{font-family:"Hind Kochi SemiBold";}
@font-face
	{font-family:"Hind Light";}
@font-face
	{font-family:"Hind Madurai";}
@font-face
	{font-family:"Hind Madurai Light";}
@font-face
	{font-family:"Hind Madurai Medium";}
@font-face
	{font-family:"Hind Madurai SemiBold";}
@font-face
	{font-family:"Hind Medium";}
@font-face
	{font-family:"Hind Mysuru";}
@font-face
	{font-family:"Hind Mysuru Light";}
@font-face
	{font-family:"Hind Mysuru Medium";}
@font-face
	{font-family:"Hind Mysuru SemiBold";}
@font-face
	{font-family:"Hind SemiBold";}
@font-face
	{font-family:"Hind Siliguri";}
@font-face
	{font-family:"Hind Siliguri Light";}
@font-face
	{font-family:"Hind Siliguri Medium";}
@font-face
	{font-family:"Hind Siliguri SemiBold";}
@font-face
	{font-family:"Hind Vadodara";}
@font-face
	{font-family:"Hind Vadodara Light";}
@font-face
	{font-family:"Hind Vadodara Medium";}
@font-face
	{font-family:"Hind Vadodara SemiBold";}
@font-face
	{font-family:"IBM Plex Mono";}
@font-face
	{font-family:"IBM Plex Mono ExtraLight";}
@font-face
	{font-family:"IBM Plex Mono Light";}
@font-face
	{font-family:"IBM Plex Mono Medium";}
@font-face
	{font-family:"IBM Plex Mono SemiBold";}
@font-face
	{font-family:"IBM Plex Mono Thin";}
@font-face
	{font-family:"IBM Plex Sans";}
@font-face
	{font-family:"IBM Plex Sans Condensed";}
@font-face
	{font-family:"IBM Plex Sans Condensed Light";}
@font-face
	{font-family:"IBM Plex Sans Condensed Medium";}
@font-face
	{font-family:"IBM Plex Sans Condensed Thin";}
@font-face
	{font-family:"IBM Plex Sans ExtraLight";}
@font-face
	{font-family:"IBM Plex Sans Light";}
@font-face
	{font-family:"IBM Plex Sans Medium";}
@font-face
	{font-family:"IBM Plex Sans SemiBold";}
@font-face
	{font-family:"IBM Plex Sans Thin";}
@font-face
	{font-family:"IBM Plex Serif";}
@font-face
	{font-family:"IBM Plex Serif ExtraLight";}
@font-face
	{font-family:"IBM Plex Serif Light";}
@font-face
	{font-family:"IBM Plex Serif Medium";}
@font-face
	{font-family:"IBM Plex Serif SemiBold";}
@font-face
	{font-family:"IBM Plex Serif Thin";}
@font-face
	{font-family:"Imprint MT Shadow";}
@font-face
	{font-family:Inconsolata;}
@font-face
	{font-family:"Inconsolata Black";}
@font-face
	{font-family:"Inconsolata Bold";}
@font-face
	{font-family:"Inconsolata Condensed";}
@font-face
	{font-family:"Inconsolata Condensed Black";}
@font-face
	{font-family:"Inconsolata Condensed Bold";}
@font-face
	{font-family:"Inconsolata Condensed ExtraBold";}
@font-face
	{font-family:"Inconsolata Condensed Light";}
@font-face
	{font-family:"Inconsolata Condensed Medium";}
@font-face
	{font-family:"Inconsolata Condensed SemiBold";}
@font-face
	{font-family:"Inconsolata Expanded";}
@font-face
	{font-family:"Inconsolata Expanded Black";}
@font-face
	{font-family:"Inconsolata Expanded Bold";}
@font-face
	{font-family:"Inconsolata Expanded ExtraBold";}
@font-face
	{font-family:"Inconsolata Expanded ExtraLight";}
@font-face
	{font-family:"Inconsolata Expanded Light";}
@font-face
	{font-family:"Inconsolata Expanded Medium";}
@font-face
	{font-family:"Inconsolata Expanded SemiBold";}
@font-face
	{font-family:"Inconsolata ExtraBold";}
@font-face
	{font-family:"Inconsolata ExtraCondensed";}
@font-face
	{font-family:"Inconsolata ExtraCondensed Bold";}
@font-face
	{font-family:"Inconsolata ExtraExpanded";}
@font-face
	{font-family:"Inconsolata ExtraExpanded Black";}
@font-face
	{font-family:"Inconsolata ExtraExpanded Bold";}
@font-face
	{font-family:"Inconsolata ExtraExpanded Light";}
@font-face
	{font-family:"Inconsolata ExtraLight";}
@font-face
	{font-family:"Inconsolata Light";}
@font-face
	{font-family:"Inconsolata Medium";}
@font-face
	{font-family:"Inconsolata SemiBold";}
@font-face
	{font-family:"Inconsolata SemiCondensed";}
@font-face
	{font-family:"Inconsolata SemiCondensed Black";}
@font-face
	{font-family:"Inconsolata SemiCondensed Bold";}
@font-face
	{font-family:"Inconsolata SemiCondensed Light";}
@font-face
	{font-family:"Inconsolata SemiExpanded";}
@font-face
	{font-family:"Inconsolata SemiExpanded Black";}
@font-face
	{font-family:"Inconsolata SemiExpanded Bold";}
@font-face
	{font-family:"Inconsolata SemiExpanded Light";}
@font-face
	{font-family:"Inconsolata SemiExpanded Medium";}
@font-face
	{font-family:"Inconsolata UltraCondensed";}
@font-face
	{font-family:"Inconsolata UltraCondensed Bold";}
@font-face
	{font-family:"Inconsolata UltraExpanded";}
@font-face
	{font-family:"Inconsolata UltraExpanded Black";}
@font-face
	{font-family:"Inconsolata UltraExpanded Bold";}
@font-face
	{font-family:"Inconsolata UltraExpanded Light";}
@font-face
	{font-family:IrisUPC;}
@font-face
	{font-family:"Iskoola Pota";}
@font-face
	{font-family:JasmineUPC;}
@font-face
	{font-family:Jokerman;}
@font-face
	{font-family:"Josefin Sans";}
@font-face
	{font-family:"Josefin Sans Bold";}
@font-face
	{font-family:"Josefin Sans Light";}
@font-face
	{font-family:"Josefin Sans SemiBold";}
@font-face
	{font-family:"Josefin Sans Thin";}
@font-face
	{font-family:"Josefin Slab";}
@font-face
	{font-family:"Josefin Slab Light";}
@font-face
	{font-family:"Josefin Slab SemiBold";}
@font-face
	{font-family:"Josefin Slab Thin";}
@font-face
	{font-family:"Juice ITC";}
@font-face
	{font-family:KaiTi;}
@font-face
	{font-family:Kalinga;}
@font-face
	{font-family:Karla;}
@font-face
	{font-family:"Karla ExtraBold";}
@font-face
	{font-family:"Karla ExtraLight";}
@font-face
	{font-family:"Karla Light";}
@font-face
	{font-family:"Karla Medium";}
@font-face
	{font-family:"Karla Tamil Inclined";}
@font-face
	{font-family:"Karla Tamil Upright";}
@font-face
	{font-family:Kartika;}
@font-face
	{font-family:"Khmer UI";}
@font-face
	{font-family:Kigelia;}
@font-face
	{font-family:"Kigelia Arabic";}
@font-face
	{font-family:"Kigelia Arabic Light";}
@font-face
	{font-family:"Kigelia Light";}
@font-face
	{font-family:KodchiangUPC;}
@font-face
	{font-family:Kokila;}
@font-face
	{font-family:"Kristen ITC";}
@font-face
	{font-family:Krub;}
@font-face
	{font-family:"Krub ExtraLight";}
@font-face
	{font-family:"Krub Light";}
@font-face
	{font-family:"Krub Medium";}
@font-face
	{font-family:"Krub SemiBold";}
@font-face
	{font-family:"Kunstler Script";}
@font-face
	{font-family:Lalezar;}
@font-face
	{font-family:"Lao UI";}
@font-face
	{font-family:Lato;}
@font-face
	{font-family:"Lato Black";}
@font-face
	{font-family:"Lato ExtraBold";}
@font-face
	{font-family:"Lato ExtraLight";}
@font-face
	{font-family:"Lato Light";}
@font-face
	{font-family:"Lato Medium";}
@font-face
	{font-family:"Lato SemiBold";}
@font-face
	{font-family:"Lato Thin";}
@font-face
	{font-family:"Levenim MT";}
@font-face
	{font-family:"Libre Barcode 128";}
@font-face
	{font-family:"Libre Barcode 128 Text";}
@font-face
	{font-family:"Libre Barcode 39";}
@font-face
	{font-family:"Libre Barcode 39 Extended";}
@font-face
	{font-family:"Libre Barcode 39 Extended Text";}
@font-face
	{font-family:"Libre Barcode 39 Text";}
@font-face
	{font-family:"Libre Barcode EAN13 Text";}
@font-face
	{font-family:"Libre Franklin";}
@font-face
	{font-family:"Libre Franklin Black";}
@font-face
	{font-family:"Libre Franklin ExtraBold";}
@font-face
	{font-family:"Libre Franklin ExtraLight";}
@font-face
	{font-family:"Libre Franklin Light";}
@font-face
	{font-family:"Libre Franklin Medium";}
@font-face
	{font-family:"Libre Franklin SemiBold";}
@font-face
	{font-family:"Libre Franklin Thin";}
@font-face
	{font-family:Ligconsolata;}
@font-face
	{font-family:LilyUPC;}
@font-face
	{font-family:Lora;}
@font-face
	{font-family:"Lora Medium";}
@font-face
	{font-family:"Lucida Bright";}
@font-face
	{font-family:"Lucida Calligraphy";}
@font-face
	{font-family:"Lucida Fax";}
@font-face
	{font-family:"Lucida Handwriting";}
@font-face
	{font-family:"Lucida Sans";}
@font-face
	{font-family:"Lucida Sans Typewriter";}
@font-face
	{font-family:Magneto;}
@font-face
	{font-family:"Maiandra GD";}
@font-face
	{font-family:"Mangal Pro";}
@font-face
	{font-family:"Matura MT Script Capitals";}
@font-face
	{font-family:Meiryo;}
@font-face
	{font-family:"Meiryo UI";}
@font-face
	{font-family:Merriweather;}
@font-face
	{font-family:"Merriweather Black";}
@font-face
	{font-family:"Merriweather Light";}
@font-face
	{font-family:"Merriweather Sans";}
@font-face
	{font-family:"Merriweather Sans ExtraBold";}
@font-face
	{font-family:"Merriweather Sans Light";}
@font-face
	{font-family:"Microsoft GothicNeo";}
@font-face
	{font-family:"Microsoft GothicNeo Light";}
@font-face
	{font-family:MingLiU_HKSCS;}
@font-face
	{font-family:Miriam;}
@font-face
	{font-family:"Miriam Fixed";}
@font-face
	{font-family:"Miriam Libre";}
@font-face
	{font-family:Mistral;}
@font-face
	{font-family:Mitr;}
@font-face
	{font-family:"Mitr ExtraLight";}
@font-face
	{font-family:"Mitr Light";}
@font-face
	{font-family:"Mitr Medium";}
@font-face
	{font-family:"Mitr SemiBold";}
@font-face
	{font-family:"Modern Love";}
@font-face
	{font-family:"Modern Love Caps";}
@font-face
	{font-family:"Modern Love Grunge";}
@font-face
	{font-family:"Modern No\. 20";}
@font-face
	{font-family:Montserrat;}
@font-face
	{font-family:"Montserrat Black";}
@font-face
	{font-family:"Montserrat ExtraBold";}
@font-face
	{font-family:"Montserrat ExtraLight";}
@font-face
	{font-family:"Montserrat Light";}
@font-face
	{font-family:"Montserrat Medium";}
@font-face
	{font-family:"Montserrat SemiBold";}
@font-face
	{font-family:"Montserrat Thin";}
@font-face
	{font-family:MoolBoran;}
@font-face
	{font-family:"MS Outlook";}
@font-face
	{font-family:"MS PMincho";}
@font-face
	{font-family:"Nanum Brush Script";}
@font-face
	{font-family:"Nanum Pen";}
@font-face
	{font-family:NanumGothic;}
@font-face
	{font-family:NanumGothicCoding;}
@font-face
	{font-family:NanumGothicExtraBold;}
@font-face
	{font-family:NanumMyeongjo;}
@font-face
	{font-family:NanumMyeongjoExtraBold;}
@font-face
	{font-family:Narkisim;}
@font-face
	{font-family:"Neue Haas Grotesk Text Pro";}
@font-face
	{font-family:"News Gothic MT";}
@font-face
	{font-family:"Niagara Engraved";}
@font-face
	{font-family:"Niagara Solid";}
@font-face
	{font-family:"Noto Sans";}
@font-face
	{font-family:"Noto Serif";}
@font-face
	{font-family:Nunito;}
@font-face
	{font-family:"Nunito Black";}
@font-face
	{font-family:"Nunito ExtraBold";}
@font-face
	{font-family:"Nunito ExtraLight";}
@font-face
	{font-family:"Nunito Light";}
@font-face
	{font-family:"Nunito Sans";}
@font-face
	{font-family:"Nunito Sans Black";}
@font-face
	{font-family:"Nunito Sans ExtraBold";}
@font-face
	{font-family:"Nunito Sans ExtraLight";}
@font-face
	{font-family:"Nunito Sans Light";}
@font-face
	{font-family:"Nunito Sans SemiBold";}
@font-face
	{font-family:"Nunito SemiBold";}
@font-face
	{font-family:Nyala;}
@font-face
	{font-family:OCRB;}
@font-face
	{font-family:"Old English Text MT";}
@font-face
	{font-family:Onyx;}
@font-face
	{font-family:"Open Sans";}
@font-face
	{font-family:"Open Sans ExtraBold";}
@font-face
	{font-family:"Open Sans Light";}
@font-face
	{font-family:"Open Sans SemiBold";}
@font-face
	{font-family:Oswald;}
@font-face
	{font-family:"Oswald ExtraLight";}
@font-face
	{font-family:"Oswald Light";}
@font-face
	{font-family:"Oswald Medium";}
@font-face
	{font-family:"Oswald SemiBold";}
@font-face
	{font-family:Oxygen;}
@font-face
	{font-family:"Oxygen Light";}
@font-face
	{font-family:"Oxygen Mono";}
@font-face
	{font-family:"Palace Script MT";}
@font-face
	{font-family:Papyrus;}
@font-face
	{font-family:Parchment;}
@font-face
	{font-family:Perpetua;}
@font-face
	{font-family:"Perpetua Titling MT";}
@font-face
	{font-family:"Plantagenet Cherokee";}
@font-face
	{font-family:Playbill;}
@font-face
	{font-family:"Playfair Display";}
@font-face
	{font-family:"Playfair Display Black";}
@font-face
	{font-family:"Playfair Display SC";}
@font-face
	{font-family:"Playfair Display SC Black";}
@font-face
	{font-family:"Poor Richard";}
@font-face
	{font-family:Poppins;}
@font-face
	{font-family:"Poppins Black";}
@font-face
	{font-family:"Poppins ExtraBold";}
@font-face
	{font-family:"Poppins ExtraLight";}
@font-face
	{font-family:"Poppins Light";}
@font-face
	{font-family:"Poppins Medium";}
@font-face
	{font-family:"Poppins SemiBold";}
@font-face
	{font-family:"Poppins Thin";}
@font-face
	{font-family:Posterama;}
@font-face
	{font-family:Pridi;}
@font-face
	{font-family:"Pridi ExtraLight";}
@font-face
	{font-family:"Pridi Light";}
@font-face
	{font-family:"Pridi Medium";}
@font-face
	{font-family:"Pridi SemiBold";}
@font-face
	{font-family:Pristina;}
@font-face
	{font-family:Prompt;}
@font-face
	{font-family:"Prompt Black";}
@font-face
	{font-family:"Prompt ExtraBold";}
@font-face
	{font-family:"Prompt ExtraLight";}
@font-face
	{font-family:"Prompt Light";}
@font-face
	{font-family:"Prompt Medium";}
@font-face
	{font-family:"Prompt SemiBold";}
@font-face
	{font-family:"Prompt Thin";}
@font-face
	{font-family:"PT Sans";}
@font-face
	{font-family:"PT Sans Caption";}
@font-face
	{font-family:"PT Sans Narrow";}
@font-face
	{font-family:"PT Serif";}
@font-face
	{font-family:"PT Serif Caption";}
@font-face
	{font-family:"Quire Sans";}
@font-face
	{font-family:"Quire Sans Light";}
@font-face
	{font-family:"Quire Sans Pro Light";}
@font-face
	{font-family:"Rage Italic";}
@font-face
	{font-family:Raleway;}
@font-face
	{font-family:"Raleway Black";}
@font-face
	{font-family:"Raleway ExtraBold";}
@font-face
	{font-family:"Raleway ExtraLight";}
@font-face
	{font-family:"Raleway Light";}
@font-face
	{font-family:"Raleway Medium";}
@font-face
	{font-family:"Raleway SemiBold";}
@font-face
	{font-family:"Raleway Thin";}
@font-face
	{font-family:Ravie;}
@font-face
	{font-family:"Reem Kufi";}
@font-face
	{font-family:Roboto;}
@font-face
	{font-family:"Roboto Black";}
@font-face
	{font-family:"Roboto Condensed";}
@font-face
	{font-family:"Roboto Condensed Light";}
@font-face
	{font-family:"Roboto Condensed Medium";}
@font-face
	{font-family:"Roboto Light";}
@font-face
	{font-family:"Roboto Medium";}
@font-face
	{font-family:"Roboto Thin";}
@font-face
	{font-family:Rockwell;}
@font-face
	{font-family:"Rockwell Condensed";}
@font-face
	{font-family:"Rockwell Extra Bold";}
@font-face
	{font-family:"Rockwell Light";}
@font-face
	{font-family:"Rockwell Nova";}
@font-face
	{font-family:"Rockwell Nova Cond";}
@font-face
	{font-family:"Rockwell Nova Cond Light";}
@font-face
	{font-family:"Rockwell Nova Extra Bold";}
@font-face
	{font-family:"Rockwell Nova Light";}
@font-face
	{font-family:Rod;}
@font-face
	{font-family:"Sabon Next LT";}
@font-face
	{font-family:"Sagona Book";}
@font-face
	{font-family:"Sagona ExtraLight";}
@font-face
	{font-family:"Sakkal Majalla";}
@font-face
	{font-family:"Sanskrit Text";}
@font-face
	{font-family:"Script MT Bold";}
@font-face
	{font-family:Seaford;}
@font-face
	{font-family:"Seaford Display";}
@font-face
	{font-family:"Secular One";}
@font-face
	{font-family:"Segoe Xbox Symbol";}
@font-face
	{font-family:Selawik;}
@font-face
	{font-family:"Selawik Light";}
@font-face
	{font-family:"Selawik Semibold";}
@font-face
	{font-family:"Shonar Bangla";}
@font-face
	{font-family:"Showcard Gothic";}
@font-face
	{font-family:"Simplified Arabic";}
@font-face
	{font-family:"Simplified Arabic Fixed";}
@font-face
	{font-family:"Sitka Banner Semibold";}
@font-face
	{font-family:"Sitka Display Semibold";}
@font-face
	{font-family:"Sitka Heading Semibold";}
@font-face
	{font-family:"Sitka Small Semibold";}
@font-face
	{font-family:"Sitka Subheading Semibold";}
@font-face
	{font-family:"Sitka Text Semibold";}
@font-face
	{font-family:Skeena;}
@font-face
	{font-family:"Skeena Display";}
@font-face
	{font-family:"Snap ITC";}
@font-face
	{font-family:"Source Code Pro";}
@font-face
	{font-family:"Source Code Pro Black";}
@font-face
	{font-family:"Source Code Pro ExtraLight";}
@font-face
	{font-family:"Source Code Pro Light";}
@font-face
	{font-family:"Source Code Pro Medium";}
@font-face
	{font-family:"Source Code Pro Semibold";}
@font-face
	{font-family:"Source Sans Pro";}
@font-face
	{font-family:"Source Sans Pro Black";}
@font-face
	{font-family:"Source Sans Pro ExtraLight";}
@font-face
	{font-family:"Source Sans Pro Light";}
@font-face
	{font-family:"Source Sans Pro SemiBold";}
@font-face
	{font-family:"Source Serif Pro";}
@font-face
	{font-family:"Source Serif Pro Black";}
@font-face
	{font-family:"Source Serif Pro ExtraLight";}
@font-face
	{font-family:"Source Serif Pro Light";}
@font-face
	{font-family:"Source Serif Pro SemiBold";}
@font-face
	{font-family:"Speak Pro";}
@font-face
	{font-family:"Speak Pro Light";}
@font-face
	{font-family:STCaiyun;}
@font-face
	{font-family:Stencil;}
@font-face
	{font-family:STFangsong;}
@font-face
	{font-family:STHupo;}
@font-face
	{font-family:STKaiti;}
@font-face
	{font-family:STXihei;}
@font-face
	{font-family:STXingkai;}
@font-face
	{font-family:STXinwei;}
@font-face
	{font-family:STZhongsong;}
@font-face
	{font-family:"Suez One";}
@font-face
	{font-family:"Tempus Sans ITC";}
@font-face
	{font-family:Tenorite;}
@font-face
	{font-family:"Tenorite Display";}
@font-face
	{font-family:"TH SarabunPSK";}
@font-face
	{font-family:"The Hand";}
@font-face
	{font-family:"The Hand Black";}
@font-face
	{font-family:"The Hand Extrablack";}
@font-face
	{font-family:"The Hand Light";}
@font-face
	{font-family:"The Serif Hand";}
@font-face
	{font-family:"The Serif Hand Black";}
@font-face
	{font-family:"The Serif Hand Extrablack";}
@font-face
	{font-family:"The Serif Hand Light";}
@font-face
	{font-family:"Tisa Offc Serif Pro";}
@font-face
	{font-family:"Tisa Offc Serif Pro Thin";}
@font-face
	{font-family:"Titillium Web";}
@font-face
	{font-family:"Titillium Web Black";}
@font-face
	{font-family:"Titillium Web ExtraLight";}
@font-face
	{font-family:"Titillium Web Light";}
@font-face
	{font-family:"Titillium Web SemiBold";}
@font-face
	{font-family:"Trade Gothic Next";}
@font-face
	{font-family:"Trade Gothic Next Cond";}
@font-face
	{font-family:"Trade Gothic Next Cond Hv";}
@font-face
	{font-family:"Trade Gothic Next Heavy";}
@font-face
	{font-family:"Trade Gothic Next Light";}
@font-face
	{font-family:"Traditional Arabic";}
@font-face
	{font-family:Trirong;}
@font-face
	{font-family:"Trirong Black";}
@font-face
	{font-family:"Trirong ExtraBold";}
@font-face
	{font-family:"Trirong ExtraLight";}
@font-face
	{font-family:"Trirong Light";}
@font-face
	{font-family:"Trirong Medium";}
@font-face
	{font-family:"Trirong SemiBold";}
@font-face
	{font-family:"Trirong Thin";}
@font-face
	{font-family:"Tw Cen MT";}
@font-face
	{font-family:"Tw Cen MT Condensed";}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";}
@font-face
	{font-family:"UD Digi Kyokasho N-B";}
@font-face
	{font-family:"UD Digi Kyokasho N-R";}
@font-face
	{font-family:"UD Digi Kyokasho NK-B";}
@font-face
	{font-family:"UD Digi Kyokasho NK-R";}
@font-face
	{font-family:"UD Digi Kyokasho NP-B";}
@font-face
	{font-family:"UD Digi Kyokasho NP-R";}
@font-face
	{font-family:Univers;}
@font-face
	{font-family:"Univers Condensed";}
@font-face
	{font-family:"Univers Condensed Light";}
@font-face
	{font-family:"Univers Light";}
@font-face
	{font-family:"Urdu Typesetting";}
@font-face
	{font-family:Utsaah;}
@font-face
	{font-family:Vani;}
@font-face
	{font-family:"Verdana Pro";}
@font-face
	{font-family:"Verdana Pro Black";}
@font-face
	{font-family:"Verdana Pro Cond";}
@font-face
	{font-family:"Verdana Pro Cond Black";}
@font-face
	{font-family:"Verdana Pro Cond Light";}
@font-face
	{font-family:"Verdana Pro Cond SemiBold";}
@font-face
	{font-family:"Verdana Pro Light";}
@font-face
	{font-family:"Verdana Pro SemiBold";}
@font-face
	{font-family:Vijaya;}
@font-face
	{font-family:"Viner Hand ITC";}
@font-face
	{font-family:Vivaldi;}
@font-face
	{font-family:"Vladimir Script";}
@font-face
	{font-family:"Walbaum Display";}
@font-face
	{font-family:"Walbaum Display Heavy";}
@font-face
	{font-family:"Walbaum Display Light";}
@font-face
	{font-family:"Walbaum Display SemiBold";}
@font-face
	{font-family:"Walbaum Heading";}
@font-face
	{font-family:"Walbaum Text";}
@font-face
	{font-family:"Wide Latin";}
@font-face
	{font-family:"Work Sans";}
@font-face
	{font-family:"Work Sans Black";}
@font-face
	{font-family:"Work Sans ExtraBold";}
@font-face
	{font-family:"Work Sans ExtraLight";}
@font-face
	{font-family:"Work Sans Light";}
@font-face
	{font-family:"Work Sans Medium";}
@font-face
	{font-family:"Work Sans SemiBold";}
@font-face
	{font-family:"Work Sans Thin";}
@font-face
	{font-family:"Yu Mincho";}
@font-face
	{font-family:"Yu Mincho Demibold";}
@font-face
	{font-family:"Yu Mincho Light";}
@font-face
	{font-family:minorEastAsia;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:minorBidi;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
h1
	{margin:0cm;
	text-align:center;
	text-indent:0cm;
	line-height:150%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
h2
	{margin:0cm;
	text-align:justify;
	text-indent:36.0pt;
	line-height:150%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
h3
	{margin:0cm;
	text-align:justify;
	text-indent:36.0pt;
	line-height:150%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;
	font-weight:normal;}
h4
	{margin:0cm;
	text-align:right;
	text-indent:36.0pt;
	line-height:150%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
h5
	{margin:0cm;
	text-align:center;
	text-indent:0cm;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	font-weight:normal;}
h6
	{margin:0cm;
	text-indent:0cm;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	font-weight:normal;}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	font-style:italic;}
p.MsoList, li.MsoList, div.MsoList
	{margin:0cm;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0cm;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin:0cm;
	text-align:justify;
	text-indent:36.0pt;
	line-height:150%;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
span.1
	{mso-style-name:"Основной шрифт абзаца1";}
p.10, li.10, div.10
	{mso-style-name:Заголовок1;
	margin:0cm;
	text-align:center;
	line-height:150%;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
p.11, li.11, div.11
	{mso-style-name:Указатель1;
	margin:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
p.LO-Normal, li.LO-Normal, div.LO-Normal
	{mso-style-name:LO-Normal;
	margin:0cm;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
p.a, li.a, div.a
	{mso-style-name:Стиль_Рабочий;
	margin:0cm;
	text-align:justify;
	text-indent:36.0pt;
	line-height:150%;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
p.a0, li.a0, div.a0
	{mso-style-name:"Содержимое врезки";
	margin:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
p.a1, li.a1, div.a1
	{mso-style-name:"Содержимое таблицы";
	margin:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
p.a2, li.a2, div.a2
	{mso-style-name:"Заголовок таблицы";
	margin:0cm;
	text-align:center;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
@page WordSection1
	{size:841.9pt 595.3pt;
	margin:42.55pt 62.35pt 99.25pt 59.55pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body bgcolor=white lang=RU style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>МИНИСТЕРСТВО ОБРАЗОВАНИЯ И НАУКИ</span></b></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>РОССИЙСКОЙ ФЕДЕРАЦИИ</span></b></p>

<p class=MsoBodyText align=center style='margin-top:12.0pt;text-align:center'><b><span
style='font-size:11.0pt'>БАШКИРСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>Салимоненко Д.А.</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>Методические указания по курсу:</span></b></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>«Операционные системы»</span></b></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>Часть 1</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText align=center style='text-align:center'><b><span
style='font-size:11.0pt'>Уфа 2014</span></b></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Салимоненко Д.А. Реализация консольной версии системной
оболочки: Методические указания /Изд-во Башкирск. ун-та.-Уфа, 2014.-76с.</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Методические указания по реализации консольной версии
системной оболочки, в первую очередь, предназначены для студентов кафедры
«Программирование и Экономическая Информатика» Башкирского Государственного
Университета. Излагаются ключевые аспекты создания программы для работы с
файлами и каталогами, т.е. системной оболочки. Рассматривается алгоритмизация
таких команд, как создание, копирование, переименование, удаление файлов и
каталогов, а также проверка их свойств и значений.. Изложение методически
продумано и рассчитано на использование при программирование на языке СИ++ под </span><span
lang=EN-US style='font-size:11.0pt'>Linux</span><span style='font-size:11.0pt'>.
</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для адекватной работы с Методическими указаниями
необходимы, по крайней мере,  начальные познания в области программирования на
языке СИ++. Но, они будут полезно и для тех, кто начинает работу с Си++ «с
нуля». Студенты, уже имеющие достаточный опыт программирования на Си++, могут
при изучении настоящих указаний пропустить части 1-3, а перейти сразу к части
4, где показывается, как создать простую консольную версию системной оболочки. </span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Издание 2-е. Исправлены замеченные опечатки и
неточности. </span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Библ. 3 наимен.</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Печатается по решению кафедры программирования и
экономической информатики БашГУ.</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyText align=right style='text-align:right;text-indent:36.0pt'><span
style='font-size:11.0pt;font-family:Symbol'>&Oacute;</span><span
style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>Башкирский
университет, 2014 г.</span></p>

<p class=10 style='line-height:normal'><span style='font-size:11.0pt'>ОГЛАВЛЕНИЕ</span></p>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>Введение..................................................................................................4</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>1.
Вводная часть. Мультифайловое программирование, сборка программы                                                                                   
9</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>1.1.
Как компилировать программу                                                 9</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>1.2.
Мультифайловое программирование                                      12</span></p>

<p class=a style='text-indent:0cm;line-height:normal'><span style='font-size:
11.0pt'>1.3. Автоматическая сборка                                                          
15</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>1.4.
Модель КИС                                                                          
19</span></p>

<h2 style='margin-left:0cm;text-indent:0cm;line-height:normal;page-break-after:
auto'><span style='font-size:11.0pt;font-weight:normal'>2. Библиотеки                                                                               
23</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>2.1.
Введение в библиотеки                                                          
23</span></p>

<p class=a style='text-indent:0cm;line-height:normal'><span style='font-size:
11.0pt'>2.2. Пример статической библиотеки                                           
24</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>2.3.
Пример совместно используемой библиотеки                         27</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.
Основы низкоуровневого ввода-вывода                                     31</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.1.
Обзор механизмов ввода-вывода в Linux                                31</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.2.
Файловые дескрипторы                                                          
33</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.3.
Открытие, файла: системный вызов ореn()                             35</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.4.
Закрытие файла: системный вызов </span><span lang=EN-US style='font-size:11.0pt'>close</span><span
style='font-size:11.0pt'>()                               37</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.5.
Чтение файла: системный вызов </span><span lang=EN-US style='font-size:11.0pt'>read</span><span
style='font-size:11.0pt'>()                                   40</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.6.
Запись в файл: системный вызов </span><span lang=EN-US style='font-size:11.0pt'>write</span><span
style='font-size:11.0pt'>()                                  43</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>3.7.
Произвольный доступ: системный вызов </span><span lang=EN-US style='font-size:
11.0pt'>lseek</span><span style='font-size:11.0pt'>()                     45</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>4.
Разработка системной оболочки                                                50</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:11.0pt'>Модуль
1. Основной модуль                                                          50</span></p>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt;font-weight:normal'>Модуль 2.
Вывод описания ошибки                                              55</span></h2>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt;font-weight:normal'>Модуль 3.
Открытие файла                                                            56</span></h2>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt;font-weight:normal'>Модуль 4.
Удаление файла                                                            57</span></h2>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt;font-weight:normal'>Модуль 5.
Переименование файла                                                 58</span></h2>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt;font-weight:normal'>Модуль 6.
Копирование файла                                                                 
61</span></h2>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='position:absolute;z-index:251637760;
left:0px;margin-left:209px;margin-top:146px;width:560px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=560 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251637760'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>3                                                                                                                                                                              4</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt;font-weight:normal'>Модуль 7. Создание
каталога                                                        62</span></h2>

<p class=MsoBodyTextIndent align=left style='text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt'>Модуль 8. Удаление каталога                                                       
63</span></p>

<h2 align=left style='margin-left:0cm;text-align:left;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt;font-weight:normal'>Модуль 9.
Информация о файле или каталоге                               67</span></h2>

<p class=MsoNormal><span style='font-size:11.0pt'>Заключение                                                                                   
70</span></p>

<p class=MsoNormal><span style='font-size:11.0pt'>Список рекомендуемой
литературы                                              70</span></p>

<p class=MsoNormal><span style='font-size:11.0pt'>Приложения                                                                              
   71</span></p>

<p class=MsoNormal><span style='font-size:11.0pt'>&nbsp;</span></p>

<h1 style='margin-left:0cm;text-indent:0cm;line-height:normal'><span
style='font-size:11.0pt'>ВВЕДЕНИЕ</span></h1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Данные методические указания являются методическим
материалом для студентов, изучающих предметы «операционные системы», «системное
прикладное программирование» и аналогичные. В нем рассмотрены особенности
создания системной оболочки (т.е. программы, позволяющей работать с файловой
системой) в операционной системе </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'>. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первая часть посвящена общим вопросам программирования
на Си++. В частности, затронуты вопросы мультифайлового программирования
(создания программы из нескольких файлов), рассмотрена методика компиляции
программ и их сборка в один (бинарный или двоичный) файл. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Во второй части показано, как создавать свои
(авторские) библиотеки и подключать их к своим программам. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В третьей части рассмотрены вопросы реализации
низкоуровневого ввода-вывода, на примерах разъяснено использование операторов
работы с файлами, таких, как </span><b><span lang=EN-US style='font-size:11.0pt'>open</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>read</span></b><b><span style='font-size:11.0pt'>, </span></b><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>close</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>и
др.  </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В четвертой части приведен пример последовательной
разработки системной оболочки. Приведены готовые коды программ. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Оболочка операционной системы (от англ. </span><span
lang=EN-US style='font-size:11.0pt'>shell</span><span style='font-size:11.0pt'>—
оболочка) — интерпретатор команд операционной системы (ОС), обеспечивающий
интерфейс для взаимодействия пользователя с функциями системы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В общем случае, различают оболочки с двумя типами
интерфейса для взаимодействия с пользователем: текстовый пользовательский
интерфейс (</span><span lang=EN-US style='font-size:11.0pt'>CUI</span><span
style='font-size:11.0pt'>) и графический пользовательский интерфейс (</span><span
lang=EN-US style='font-size:11.0pt'>GUI</span><span style='font-size:11.0pt'>).</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Командный
интерпретатор</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для обеспечения интерфейса командной строки в ОС часто
используются командные интерпретаторы, которые могут представлять собой самостоятельные
языки программирования, с собственным синтаксисом и отличительными
функциональными возможностями.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В операционные системы </span><span lang=EN-US
style='font-size:11.0pt'>MS</span><span style='font-size:11.0pt'>-</span><span
lang=EN-US style='font-size:11.0pt'>DOS</span><span style='font-size:11.0pt'> и
</span><span lang=EN-US style='font-size:11.0pt'>Windows</span><span
style='font-size:11.0pt'> 9</span><span lang=EN-US style='font-size:11.0pt'>x</span><span
style='font-size:11.0pt'> включён командный интерпретатор </span><span
lang=EN-US style='font-size:11.0pt'>command</span><span style='font-size:11.0pt'>.</span><span
lang=EN-US style='font-size:11.0pt'>com</span><span style='font-size:11.0pt'>,
в </span><span lang=EN-US style='font-size:11.0pt'>Windows</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>NT</span><span style='font-size:11.0pt'> включён </span><span
lang=EN-US style='font-size:11.0pt'>cmd</span><span style='font-size:11.0pt'>.</span><span
lang=EN-US style='font-size:11.0pt'>exe</span><span style='font-size:11.0pt'>.
В большом семействе командных оболочек </span><span lang=EN-US
style='font-size:11.0pt'>UNIX</span><span style='font-size:11.0pt'> популярны </span><span
lang=EN-US style='font-size:11.0pt'>bash</span><span style='font-size:11.0pt'>,
</span><span lang=EN-US style='font-size:11.0pt'>csh</span><span
style='font-size:11.0pt'>, </span><span lang=EN-US style='font-size:11.0pt'>ksh</span><span
style='font-size:11.0pt'>, </span><span lang=EN-US style='font-size:11.0pt'>zsh</span><span
style='font-size:11.0pt'> и другие.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как правило, при низкоуровневой настройке ОС у
пользователя есть возможность менять командный интерпретатор, используемый по
умолчанию.</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Функции</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Командный интерпретатор исполняет команды своего языка,
заданные в командной строке или поступающие из стандартного ввода или
указанного файла.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В качестве команд интерпретируются вызовы системных
или прикладных утилит, а также управляющие конструкции. Кроме того, оболочка
отвечает за раскрытие шаблонов имен файлов и за перенаправление и связывание
ввода-вывода утилит.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В совокупности с набором утилит, оболочка представляет
собой операционную среду, полноценный язык программирования и мощное средство
решения как системных, так и некоторых прикладных задач, в особенности,
автоматизации часто выполняемых последовательностей команд.</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Стандартный
командный интерпретатор</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Стандартом </span><span lang=EN-US style='font-size:
11.0pt'>POSIX</span><span style='font-size:11.0pt'> (</span><span lang=EN-US
style='font-size:11.0pt'>ISO</span><span style='font-size:11.0pt'>/</span><span
lang=EN-US style='font-size:11.0pt'>IEC</span><span style='font-size:11.0pt'>
9945) (Том 3. Оболочка и утилиты) определен язык оболочки, включающий
конструкции последовательного (перевод строки, точка с запятой), условного («</span><span
lang=EN-US style='font-size:11.0pt'>if</span><span style='font-size:11.0pt'>»,
«</span><span lang=EN-US style='font-size:11.0pt'>case</span><span
style='font-size:11.0pt'>», «||», «&amp;&amp;») и циклического («</span><span
lang=EN-US style='font-size:11.0pt'>for</span><span style='font-size:11.0pt'>»,
«</span><span lang=EN-US style='font-size:11.0pt'>for</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>in</span><span
style='font-size:11.0pt'>», «</span><span lang=EN-US style='font-size:11.0pt'>while</span><span
style='font-size:11.0pt'>», «</span><span lang=EN-US style='font-size:11.0pt'>until</span><span
style='font-size:11.0pt'>») исполнения команд, а также оператор присваивания.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Стандартом также определен режим редактирования
вводимых команд, являющийся подмножеством команд стандартного текстового
редактора («</span><span lang=EN-US style='font-size:11.0pt'>vi</span><span
style='font-size:11.0pt'>»).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В современных открытых Unix-подобных ОС наиболее
распространены такие языки командных интерпретаторов как </span><span
lang=EN-US style='font-size:11.0pt'>bash</span><span style='font-size:11.0pt'>
и </span><span lang=EN-US style='font-size:11.0pt'>zsh</span><span
style='font-size:11.0pt'>, реализующие надмножества языка стандартной оболочки.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для альтернативных ОС (например, </span><span
lang=EN-US style='font-size:11.0pt'>Windows</span><span style='font-size:11.0pt'>)
также доступны реализации этих оболочек.</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Альтернативы</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251638784;left:0px;margin-left:-334px;
margin-top:600px;width:561px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=561 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251638784'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>5                                                                                                                                                                              6</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Наряду со стандартными, в открытых ОС
применяются также альтернативные оболочки </span><span lang=EN-US
style='font-size:11.0pt'>csh</span><span style='font-size:11.0pt'> и </span><span
lang=EN-US style='font-size:11.0pt'>tcsh</span><span style='font-size:11.0pt'>,
отличающиеся синтаксисом управляющих конструкций и поведением переменных.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Некоторые альтернативные ОС поставляются с интерпретаторами
собственных языков командных файлов (такими, как язык командных файлов ОС </span><span
lang=EN-US style='font-size:11.0pt'>MS</span><span style='font-size:11.0pt'>-</span><span
lang=EN-US style='font-size:11.0pt'>DOS</span><span style='font-size:11.0pt'> и
</span><span lang=EN-US style='font-size:11.0pt'>Microsoft</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>Windows</span><span style='font-size:11.0pt'> 7, язык </span><span
lang=EN-US style='font-size:11.0pt'>kazahskii</span><span style='font-size:
11.0pt'> в ОС OS/2 и т. п.)</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Некоторые предпочитают пользоваться для автоматизации
часто выполняемых последовательностей команд новыми интерпретируемыми языками,
например, </span><span lang=EN-US style='font-size:11.0pt'>Perl</span><span
style='font-size:11.0pt'> или </span><span lang=EN-US style='font-size:11.0pt'>Python</span><span
style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>Графическая оболочка </span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Последние версии ОС </span><span lang=EN-US
style='font-size:11.0pt'>Windows</span><span style='font-size:11.0pt'>
используют в качестве своей оболочки интегрированную среду Проводника </span><span
lang=EN-US style='font-size:11.0pt'>Windows</span><span style='font-size:11.0pt'>.
Проводник </span><span lang=EN-US style='font-size:11.0pt'>Windows</span><span
style='font-size:11.0pt'> представляет собой визуальную среду управления включающую
в себя Рабочий стол, Меню пуск, Панель задач, а также функции управления
файлами. Ранние версии ОС </span><span lang=EN-US style='font-size:11.0pt'>Windows</span><span
style='font-size:11.0pt'> 3.хх в качестве графической оболочки включают
менеджер программ.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Многие сторонние разработчики предлагают
альтернативные среды, которые могут быть использованы вместо оболочки
проводника, включенной по умолчанию компанией </span><span lang=EN-US
style='font-size:11.0pt'>Microsoft</span><span style='font-size:11.0pt'> в
систему </span><span lang=EN-US style='font-size:11.0pt'>Windows</span><span
style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Перечень оболочек для </span><span lang=EN-US
style='font-size:11.0pt'>Microsoft</span><span lang=EN-US style='font-size:
11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>Windows</span><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Aston shell</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>BB4Win</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>BBIean</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Cairo (Under Development)</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Chroma</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Emerge Desktop</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Geoshell </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>KDE</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Litestep</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Packard Bell Navigator</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Program Manager</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Secure Desktop</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>SharpE</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Talisman Desktop</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>WinStep</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:
11.0pt'>Windows Explorer</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span lang=EN-US style='font-size:11.0pt'>Microsoft</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>Bob</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Далее, мы будем рассматривать системную оболочку типа </span><span
lang=EN-US style='font-size:11.0pt'>CUI</span><span style='font-size:11.0pt'>,
то есть текстовый пользовательский интерфейс. Рассмотрим цели, которые
программа должна будет выполнять:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность создания файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность удаления файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность переименование файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251639808;left:0px;margin-left:199px;
margin-top:398px;width:561px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=561 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251639808'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>7                                                                                                                                                                              8</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность копировать файл</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность получить информацию о файле или каталоге</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность создания каталога</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Предоставляет
возможность удаления каталога (с вложенными каталогами и файлами)</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Работа в
операционной системе </span><span lang=EN-US style='font-size:11.0pt'>Linux</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Данная системная оболочка не отличается функциональностью,
но мы и не стремимся превзойти готовые продукты. Наша цель- понять устройство
системной оболочки на примере её создания.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>При создании системной оболочки будет пользоваться
модульным подходом. То есть создадим отдельно модули для каждой задачи, а потом
будем вызывать их из основного модуля. Это позволит добавлять новые модули в
нашу программу практически ничего не меняя. Кроме того, такой подход позволяет
локализировать ошибки. Список модулей:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Создание или
открытие файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Вывод ошибки</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Удаление файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Переименование
файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Копирование
файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Вывод
информации о файле или каталоге</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Создание
каталога</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Удаление
каталога</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Основной
модуль</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>При написании системной оболочки можно пользоваться
языком программирования C/C++ и, например, средой разработки </span><span
lang=EN-US style='font-size:11.0pt'>IDE</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>NetBeans</span><span
style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>1. Вводная часть. Мультифайловое программирование,
сборка программы</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Материалы для данной части подобраны на основе
информации с сайта <u><span style='color:blue'>http://www.linuxcenter.ru/</span></u></span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>1.1. Как компилировать программу</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Чтобы сразу начать программировать, создадим еще один
клон известной программы &quot;</span><span lang=EN-US style='font-size:11.0pt'>Hello</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>World</span><span style='font-size:11.0pt'>&quot;. Что делает эта
программа, вы знаете. Откройте свой любимый текстовый редактор и наберите в нем
следующий текст:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* hello.c */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>printf (&quot;Hello
World\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Я назвал свой файл </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>.
Вы можете назвать как угодно, сохранив суффикс .<b>с</b>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Содержимое файла </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>
- это исходный код программы (<b>'</b></span><b><span lang=EN-US
style='font-size:11.0pt'>program</span></b><b><span style='font-size:11.0pt'>, </span></b><b><span
lang=EN-US style='font-size:11.0pt'>source</span></b><b><span style='font-size:
11.0pt'>', '</span></b><b><span lang=EN-US style='font-size:11.0pt'>source</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>code</span></b><b><span style='font-size:11.0pt'>'</span></b><span
style='font-size:11.0pt'> или просто <b>'</b></span><b><span lang=EN-US
style='font-size:11.0pt'>source</span></b><b><span style='font-size:11.0pt'>'</span></b><span
style='font-size:11.0pt'>). </span><span lang=EN-US style='font-size:11.0pt'>A</span><span
lang=EN-US style='font-size:11.0pt'> </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>
- это исходный файл программы (<b>'</b></span><b><span lang=EN-US
style='font-size:11.0pt'>source</span></b><b><span lang=EN-US style='font-size:
11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>file</span></b><b><span
style='font-size:11.0pt'>'</span></b><span style='font-size:11.0pt'>). </span><span
lang=EN-US style='font-size:11.0pt'>Hello</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>World</span><span
style='font-size:11.0pt'> - очень маленькая программа, исходный код которой
помещается в одном файле. В &quot;настоящих&quot; программах, как правило,
исходный код разносится по нескольким файлам. В больших программах исходных
файлов может быть больше сотни.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251640832;left:0px;margin-left:199px;
margin-top:162px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251640832'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>9                                                                                                                                                                              
    10</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Наш исходный код написан на языке
программирования С. Языки программирования были придуманы для того, чтобы
программист мог объяснить компьютеру, что делать. Но вот беда, компьютер не
понимает ни одного языка программирования. У компьютера есть свой язык, который
называют машинным кодом или исполняемым кодом ('</span><span lang=EN-US
style='font-size:11.0pt'>executable</span><span lang=EN-US style='font-size:
11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>code</span><span
style='font-size:11.0pt'>'). Написать </span><span lang=EN-US style='font-size:
11.0pt'>Hello</span><span lang=EN-US style='font-size:11.0pt'> </span><span
lang=EN-US style='font-size:11.0pt'>World</span><span style='font-size:11.0pt'>
в машинном коде можно, но серьезные программы на нем не пишутся. Исполняемый
код не только сложный по своей сути, но и очень неудобный для человека.
Программа, которую можно написать за один день на языке программирования будет
писаться целый год в машинном коде. Потом программист сойдет с ума. Чтобы этого
не случилось, был придуман компилятор ('</span><span lang=EN-US
style='font-size:11.0pt'>compiler</span><span style='font-size:11.0pt'>'),
который переводит исходный код программы в исполняемый код. Процесс перевода
исходного кода программы в исполняемый код называют компиляцией.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Чтобы откомпилировать наш </span><span lang=EN-US
style='font-size:11.0pt'>Hello</span><span lang=EN-US style='font-size:11.0pt'>
</span><span lang=EN-US style='font-size:11.0pt'>World</span><span
style='font-size:11.0pt'> достаточно набрать в командной строке следующее
заклинание:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ gcc -</span></i><i><span
style='font-size:11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'>
hello hello.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если исходный код написан без синтаксических ошибок,
то компилятор завершит свою работу без каких-либо сообщений. Молчание - знак
повиновения и согласия. Набрав команду </span><b><span lang=EN-US
style='font-size:11.0pt'>ls</span></b><b><span lang=EN-US style='font-size:
11.0pt'> </span></b><span style='font-size:11.0pt'>вы тут же обнаружите новый
файл с именем </span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><span
style='font-size:11.0pt'>. Этот файл содержит исполняемый код программы. Такие
файлы называют исполняемыми файлами (<b>'</b></span><b><span lang=EN-US
style='font-size:11.0pt'>executable</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>files</span></b><b><span
style='font-size:11.0pt'>'</span></b><span style='font-size:11.0pt'>) или
бинарниками (<b>'</b></span><b><span lang=EN-US style='font-size:11.0pt'>binary</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>files</span></b><b><span style='font-size:11.0pt'>'</span></b><span
style='font-size:11.0pt'>).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Вы наверняка догадались, что опция <b>-о</b>
компилятора <b>gcc</b> указывает на то, каким должно быть имя выходного файла.
Как вы позже узнаете, выходным файлом может быть не только бинарник. Если не
указать опцию <br>
<b>-о</b>, то бинарнику, в нашем случае, будет присвоено имя </span><b><span
lang=EN-US style='font-size:11.0pt'>a</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>out</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>Осталось
только запустить полученный бинарник. Для этого набираем в командной строке
следующую команду:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ ./</span></i><i><span lang=EN-US style='font-size:
11.0pt'>hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Hello</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>World</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><span style='font-size:11.0pt'> </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Когда мы набираем в командной строке путь к бинарнику,
мы, в реальности сообщаем оболочке, что надо выполнить программу. Оболочка
&quot;передает&quot; бинарник ядру операционной системе, а ядро системы особым
шаманским способом отдает программу на выполнение процессору. Затем, если
программа не была запущена в фоновом режиме, то оболочка ждет от ядра сообщения
о том, что программа выполнилась. Получив такое сообщение, оболочка выдает
приглашение на ввод новой команды. Вы можете еще раз набрать <b>./</b></span><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><span style='font-size:
11.0pt'> и процедура повторится. В нашем случае программа выполняется очень
быстро, и новое приглашение командной строки &quot;вылетает&quot; практически
сразу.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Мы рассмотрели идеальный случай, когда программа
написана без синтаксических ошибок. Попробуем намеренно испортить программу
таким образом, чтобы она не отвечала канонам языка С. Для этого достаточно
убрать точку с запятой в конце вызова функции </span><b><span lang=EN-US
style='font-size:11.0pt'>printf</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf</span></i><i><span style='font-size:
11.0pt'> (&quot;</span></i><i><span lang=EN-US style='font-size:11.0pt'>Hello</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>World</span></i><i><span style='font-size:11.0pt'>\</span></i><i><span
lang=EN-US style='font-size:11.0pt'>n</span></i><i><span style='font-size:11.0pt'>&quot;)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь, если попытаться откомпилировать программу, то
компилятор выругается, указав нам на то, что он считает неправильным:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ gcc -</span></i><i><span
style='font-size:11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'>
hello hello.</span></i><i><span style='font-size:11.0pt'>с</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello.</span></i><i><span style='font-size:
11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'>: In function
'main':</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=DA style='font-size:11.0pt'>hello.c:7: error: syntax error before '}'
token</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В первой строке говорится, что в файле </span><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span style='font-size:
11.0pt'>.с</span></b><span style='font-size:11.0pt'> (у нас он единственный) в
теле функции </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> что-то
произошло. Вторая строка сообщает, что именно произошло: седьмая строка файла </span><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span style='font-size:
11.0pt'>.с</span></b><span style='font-size:11.0pt'> вызвала ошибку (</span><span
lang=EN-US style='font-size:11.0pt'>error</span><span style='font-size:11.0pt'>).
Далее идет расшифровка: синтаксическая ошибка перед закрывающейся фигурной
скобкой.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Заглянув в файл </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.с</span></b><span
style='font-size:11.0pt'> мы с удивлением обнаружим, что нахулиганили мы не в
седьмой, а в шестой строке. Дело в том, что компилятор обнаружил нелады только
в седьмой строке, но написал '</span><span lang=EN-US style='font-size:11.0pt'>before</span><span
style='font-size:11.0pt'>' (до), что означает &quot;прокручивай назад&quot;.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Естественно, пока мы не исправим ошибку, ни о каком
бинарнике не может идти и речи. Если мы удалим старый бинарник </span><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><span style='font-size:
11.0pt'>, доставшийся нам от прошлой компиляции, то увидим, что компиляция испорченного
файла не даст никакого результата. Однако иногда компилятор может лишь
&quot;заподозрить&quot; что-то неладное, потенциально опасное для нормального
существования программы. Тогда вместо '</span><span lang=EN-US
style='font-size:11.0pt'>error</span><span style='font-size:11.0pt'>' пишется '</span><span
lang=EN-US style='font-size:11.0pt'>warning</span><span style='font-size:11.0pt'>'
(предупреждение), и бинарник все-таки появляется на свет (если в другом месте
нет явных ошибок). Не следует игнорировать предупреждения, за исключением тех
случаев, когда вы на 100% знаете, что делаете.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Парадокс программирования заключается в том, что можно
наделать кучу ошибок (уже не синтаксических, как в нашем случае, а смысловых)
по всем правилам языка программирования. В таком случае компилятор выдает
бинарник, который делает не то, что мы хотели. В таком случае программу
приходится отлаживать. Отладка - это обычное дело при написании любой достаточно
сложной программы. Не ошибается только тот, кто ничего не делает.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>1.2. Мультифайловое программирование</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251641856;left:0px;margin-left:-337px;
margin-top:381px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251641856'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>11                                                                                                                                                                            
    12</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Как уже говорилось, если исходный код
сколько-нибудь серьезной программы уместить в одном файле, то такой код станет
просто нечитаемым. К тому же если программа компилируется достаточно долго
(особенно это относится к языку C++), то после исправления одной ошибки, нужно
перекомпилировать весь код.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Куда лучше разбросать исходный код по нескольким
файлам (осмысленно, по какому-нибудь критерию), и компилировать каждый такой
файл отдельно. Как вы вскоре узнаете, это очень даже просто.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Давайте сначала разберемся, как из исходного файла
получается бинарник. Подобно тому как гусеница не сразу превращается в бабочку,
так и исходный файл не сразу превращается в бинарник. После компиляции
создается объектный код. Это исполняемый код с некоторыми
&quot;вкраплениями&quot;, из-за которых объектный код еще не способен к
выполнению. Сразу в голову приходит стиральная машина: вы ее только что купили
и она стоит у вас дома в коробке. В таком состоянии она стирать не будет, но вы
все равно рады, потому что осталось только вытащить из коробки и подключить.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Вернемся к объектному коду. Эти самые
&quot;вкрапления&quot; (самое главное среди них - таблица символов) позволяют
объектному коду &quot;пристыковываться&quot; к другому объектному коду. Такой
фокус делает компоновщик (линковщик) - программа, которая объединяет объектный
код, полученный из &quot;разных мест&quot;, удаляет все лишнее и создает
полноценный бинарник. Этот процесс называется компоновкой или линковкой.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Итак, чтобы откомпилировать мультифайловую программу,
надо сначала добыть объектный код из каждого исходного файла в отдельности.
Каждый такой код будет представлять собой объектный модуль. Каждый объектный
модуль записывается в отдельный объектный файл. Затем объектные модули надо
скомпоновать в один бинарник.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> в качестве линковщика используется программа </span><b><span
lang=EN-US style='font-size:11.0pt'>ld</span></b><span style='font-size:11.0pt'>,
обладающая приличным арсеналом опций. К счастью </span><b><span lang=EN-US
style='font-size:11.0pt'>gcc</span></b><span style='font-size:11.0pt'>
самостоятельно вызывает компоновщик с нужными опциями, избавляя нас от
&quot;ручной&quot; линковки.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Попробуем теперь, вооружившись запасом знаний,
написать мультифайловый </span><span lang=EN-US style='font-size:11.0pt'>Hello</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>World</span><span style='font-size:11.0pt'>. Создадим первый файл с
именем </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>/* </span></i><i><span lang=EN-US style='font-size:
11.0pt'>main</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>c</span></i><i><span style='font-size:11.0pt'>
*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>main</span></i><i><span
style='font-size:11.0pt'> (</span></i><i><span lang=EN-US style='font-size:
11.0pt'>void</span></i><i><span style='font-size:11.0pt'>)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>print</span></i><i><span
style='font-size:11.0pt'>_</span></i><i><span lang=EN-US style='font-size:11.0pt'>hello</span></i><i><span
style='font-size:11.0pt'> ();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь создадим еще один файл </span><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span style='font-size:
11.0pt'>.с</span></b><span style='font-size:11.0pt'> со следующим содержимым:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* hello.c */ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void print_hello (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=a style='margin-left:36.0pt;line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>printf (&quot;Hello World\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Здесь функция </span><b><span lang=EN-US
style='font-size:11.0pt'>main</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> вызывает функцию </span><b><span lang=EN-US
style='font-size:11.0pt'>print</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'>, находящуюся в другом
файле. Функция </span><b><span lang=EN-US style='font-size:11.0pt'>print</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> выводит
на экран заветное приветствие. Теперь нужно получить два объектных файла. Опция
<b>-с</b> компилятора <b>gcc</b> заставляет его отказаться от линковки после
компиляции. Если не указывать опцию <b>-о</b>, то в имени объектного файла
расширение .с будет заменено на .о (обычные объектные файлы имеют расширение <b>.о</b>):</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ gcc -</span></i><i><span
style='font-size:11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'>
main.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ gcc -</span></i><i><span
style='font-size:11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'>
hello.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ls</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello.c hello, </span></i><i><span
style='font-size:11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'>
main.c main. </span></i><i><span style='font-size:11.0pt'>о</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251642880;left:0px;margin-left:-324px;
margin-top:483px;width:573px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251642880'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>13                                                                                                                                                                            
    14</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Итак, мы получили два объектных файла.
Теперь их надо объединить в один бинарник:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ gcc -</span></i><i><span
style='font-size:11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'>
hello main.o hello.</span></i><i><span style='font-size:11.0pt'>о</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ls</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello* hello.c hello.</span></i><i><span
style='font-size:11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'>
main.c. main.o</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ ./</span></i><i><span lang=EN-US style='font-size:
11.0pt'>hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Hello</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>World</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Компилятор &quot;увидел&quot;, что вместо исходных
файлов (с расширением <b>.с</b>) ему подбросили объектные файлы (с расширением <b>.о</b>)
и отреагировал согласно ситуации: вызвал линковщик с нужными опциями.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Давайте разберемся, что же все-таки произошло. В этом
нам поможет утилита </span><b><span lang=EN-US style='font-size:11.0pt'>nm</span></b><span
style='font-size:11.0pt'>. Выше говорилось, что объектные файлы содержат
таблицу символов. Утилита </span><b><span lang=EN-US style='font-size:11.0pt'>nm</span></b><span
style='font-size:11.0pt'> как раз позволяет посмотреть эту таблицу в читаемом
виде. Те, кто пробовал программировать на ассемблере знают, что в исполняемом
файле буквально все (функции, переменные) стоит на своей позиции: стоит только
вставить или убрать из программы один байт, как программа тут же превратиться в
груду мусора из-за смещенных позиций (адресов). У объектных файлов особая роль:
они хранят в таблице символов имена некоторых позиций (глобально объявленных
функций, например). В процессе линковки происходит стыковка имен и пересчет
позиций, что позволяет нескольким объектным файлам объединиться в один
бинарник. Если вызвать <b>nm</b> для файла </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.о</span></b><span
style='font-size:11.0pt'>, то увидим следующую картину:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><i><span lang=EN-US style='font-size:
11.0pt'>nm</span></i><i><span lang=EN-US style='font-size:11.0pt'> </span></i><i><span
lang=EN-US style='font-size:11.0pt'>hello</span></i><i><span style='font-size:
11.0pt'>.о</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>U</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>printf</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>00000000 Т </span></i><i><span lang=EN-US
style='font-size:11.0pt'>print</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Отложим разговор о смысловой нагрузке нулей и литер </span><span
lang=EN-US style='font-size:11.0pt'>U</span><span style='font-size:11.0pt'>, </span><span
lang=EN-US style='font-size:11.0pt'>T</span><span style='font-size:11.0pt'>.
Важным является то, что в объектном файле сохранилась информация об
использованных именах. Своя информация есть и в файле </span><b><span
lang=EN-US style='font-size:11.0pt'>main</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>o</span></b><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><i><span lang=EN-US style='font-size:
11.0pt'>nm</span></i><i><span lang=EN-US style='font-size:11.0pt'> </span></i><i><span
lang=EN-US style='font-size:11.0pt'>main</span></i><i><span style='font-size:
11.0pt'>.</span></i><i><span lang=EN-US style='font-size:11.0pt'>o</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>00000000 </span></i><i><span
style='font-size:11.0pt'>Т</span></i><i><span lang=EN-US style='font-size:11.0pt'>
main U print_hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Таблицы символов объектных файлов содержат общее имя </span><b><span
lang=EN-US style='font-size:11.0pt'>print</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><span
style='font-size:11.0pt'>. В процессе линковки высчитываются и подставляются в
нужные места адреса, соответствующие именам из таблицы. Вот и весь секрет.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a style='line-height:normal'><b><span style='font-size:11.0pt'>1.3.
Автоматическая сборка</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В предыдущем разделе для создания бинарника из двух
исходных файлов нам пришлось набрать три команды. Если бы программу пришлось
отлаживать, то каждый раз надо было бы вводить одни и те же три команды.
Казалось бы, выход есть: написать сценарий оболочки. Но давайте подумаем, какие
в этом случае могут быть недостатки. Во-первых, каждый раз сценарий будет
компилировать все файлы проекта, даже если мы исправили только один из них. В
нашем случае это не страшно. Но если речь идет о десятках файлов! Во-вторых,
сценарий &quot;намертво&quot; привязан к конкретной оболочке. Программа тут же
становится менее переносимой. И, наконец, простому скрипту не хватает
функциональности (задание аргументов сборки и т. п.), а хороший скрипт (с
многофункциональными прибамбасами) плохо модернизируется.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Выход из сложившейся ситуации есть. Это утилита </span><span
lang=EN-US style='font-size:11.0pt'>make</span><span style='font-size:11.0pt'>,
которая работает со своими собственными сценариями. Сценарий записывается в
файле с именем </span><b><span lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span
style='font-size:11.0pt'> и помещается в репозиторий (рабочий каталог) проекта.
Сценарии утилиты </span><span lang=EN-US style='font-size:11.0pt'>make</span><span
style='font-size:11.0pt'> просты и многофункциональны, а формат </span><b><span
lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span style='font-size:
11.0pt'> используется повсеместно (и не только на Unix-системах). Дошло до
того, что стали создавать программы, генерирующие </span><b><span lang=EN-US
style='font-size:11.0pt'>Makefile</span></b><b><span style='font-size:11.0pt'>'ы</span></b><span
style='font-size:11.0pt'>. Самый яркий пример - набор утилит </span><span
lang=EN-US style='font-size:11.0pt'>GNU</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>Autotools</span><span
style='font-size:11.0pt'>. Самое главное преимущество </span><b><span
lang=EN-US style='font-size:11.0pt'>make</span></b><span style='font-size:11.0pt'>
- это &quot;интеллектуальный&quot; способ рекомпиляции: в процессе отладки </span><b><span
lang=EN-US style='font-size:11.0pt'>make</span></b><span style='font-size:11.0pt'>
компилирует только измененные файлы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251643904;left:0px;margin-left:-324px;
margin-top:476px;width:573px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251643904'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>15                                                                                                                                                                            
    16</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>То, что выполняет утилита </span><b><span
lang=EN-US style='font-size:11.0pt'>make</span></b><span style='font-size:11.0pt'>,
называется сборкой проекта, а сама утилита </span><span lang=EN-US
style='font-size:11.0pt'>make</span><span style='font-size:11.0pt'> относится к
разряду сборщиков.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Любой </span><b><span lang=EN-US style='font-size:
11.0pt'>Makefile</span></b><span style='font-size:11.0pt'> состоит из трех
элементов: комментарии, макроопределения и целевые связки (или просто связки).
В свою очередь связки состоят тоже из трех элементов: цель, зависимости и
правила.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Сценарии </span><span lang=EN-US style='font-size:
11.0pt'>make</span><span style='font-size:11.0pt'> используют однострочные
комментарии, начинающиеся с литеры <b>#</b> (решетка). О том, что такое
комментарии и зачем они нужны, объяснять не буду.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Макроопределения позволяют назначить имя практически
любой строке, а затем подставлять это имя в любое место сценария, где должна
использоваться данная строка. Макросы </span><b><span lang=EN-US
style='font-size:11.0pt'>Makefile</span></b><span style='font-size:11.0pt'>
схожи с макроконстантами языка С.</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>Связки
определяют: 1) что нужно сделать (цель); 2) что для этого нужно (зависимости);
3) как это сделать (правила). В качестве цели выступает имя или макроконстанта.
Зависимости - это список файлов и целей, разделенных пробелом. Правила - это
команды передаваемые оболочке.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь рассмотрим пример. Попробуем составить сценарий
сборки для рассмотренного в предыдущем разделе мультифайлового проекта </span><span
lang=EN-US style='font-size:11.0pt'>Hello</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>World</span><span
style='font-size:11.0pt'>. Создайте</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>файл</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>с</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>именем</span><span style='font-size:11.0pt'> <b><span
lang=EN-US>Makefile</span></b><span lang=EN-US>:</span></span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'># Makefile for Hello World project</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello: main.o hello.</span></i><i><span
style='font-size:11.0pt'>о</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -o hello main.o hello.</span></i><i><span
style='font-size:11.0pt'>о</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251674624;left:0px;margin-left:266px;
margin-top:1px;width:158px;height:62px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=158 height=62 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251674624'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoNormal><b>цель</b></p>
    <p class=MsoNormal><b>список зависимостей</b></p>
    <p class=MsoNormal><b><span lang=EN-US>Tab</span></b></p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='position:relative;z-index:251675648'><span
style='left:0px;position:absolute;left:66px;top:-6px;width:217px;height:18px'><img
width=217 height=18
src="Консольная%20системная%20оболочка%20(Си,%20LINUX).files/image001.png"></span></span><i><span
lang=EN-US style='font-size:11.0pt'>main.o: main.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><span style='position:absolute;z-index:251676672;left:0px;margin-left:
178px;margin-top:7px;width:89px;height:12px'><img width=89 height=12
src="Консольная%20системная%20оболочка%20(Си,%20LINUX).files/image002.png"></span><span
style='position:absolute;z-index:251677696;left:0px;margin-left:62px;
margin-top:8px;width:218px;height:71px'><img width=218 height=71
src="Консольная%20системная%20оболочка%20(Си,%20LINUX).files/image003.png"></span><i><span
lang=EN-US style='font-size:11.0pt'>gcc -c main.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello.o: hello.</span></i><i><span
style='font-size:11.0pt'>с</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span
style='font-size:11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'>
hello.</span></i><i><span style='font-size:11.0pt'>с</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>clean:</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>rm</span></i><i><span
style='font-size:11.0pt'> –</span></i><i><span lang=EN-US style='font-size:
11.0pt'>f</span></i><i><span style='font-size:11.0pt'>  *.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>o</span></i><i><span style='font-size:11.0pt'> 
</span></i><i><span lang=EN-US style='font-size:11.0pt'>hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Обратите внимание, что в каждой строке перед вызовом </span><b><span
lang=EN-US style='font-size:11.0pt'>gcc</span></b><span style='font-size:11.0pt'>,
а также в строке перед вызовом <b>rm</b> стоят табуляции. Как вы уже
догадались, эти строки являются правилами. Формат </span><b><span lang=EN-US
style='font-size:11.0pt'>Makefile</span></b><span style='font-size:11.0pt'>
требует, чтобы каждое правило начиналось с табуляции. Теперь рассмотрим все по
порядку.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span style='font-size:
11.0pt'> может начинаться как с заглавной так и со строчной буквы. Но
рекомендуется все-таки начинать с заглавной, чтобы он не перемешивался с
другими файлами проекта, а стоял &quot;в списке первых&quot;.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первая строка - комментарий. Здесь можно писать все,
что угодно. Комментарий начинается с символа <b># </b>(решетка) и заканчивается
символом новой строки. Далее по порядку следуют четыре связки: 1) связка для
компоновки объектных файлов </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>o</span></b><span
style='font-size:11.0pt'> и </span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>.о</span></b><span style='font-size:11.0pt'>; 2)
связка для компиляции </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'>; 3) связка для компиляции </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>;
4) связка для очистки проекта.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первая связка имеет цель </span><span lang=EN-US
style='font-size:11.0pt'>hello</span><span style='font-size:11.0pt'>. Цель
отделяется от списка зависимостей двоеточием. Список зависимостей отделяется от
правил символом новой строки. А каждое правило начинается на новой строке с
символа табуляции. В нашем случае каждая связка содержит по одному правилу. В
списке зависимостей перечисляются через пробел вещи, необходимые для выполнения
правила. В первом случае, чтобы скомпоновать бинарник, нужно иметь два объектных
файла, поэтому они оказываются в списке зависимостей. Изначально объектные
файлы отсутствуют, поэтому требуется создать целевые связки для их получения.
Итак, чтобы получить </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>o</span></b><span
style='font-size:11.0pt'>, нужно откомпилировать </span><b><span lang=EN-US
style='font-size:11.0pt'>main</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>.
Таким образом файл </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'> появляется в списке зависимостей (он там
единственный). Аналогичная ситуация с </span><b><span lang=EN-US
style='font-size:11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.о</span></b><span
style='font-size:11.0pt'>. Файлы </span><b><span lang=EN-US style='font-size:
11.0pt'>main</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>
и </span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'> изначально существуют (мы их сами создали), поэтому
никаких связок для их создания не требуется.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Особую роль играет целевая связка </span><b><span
lang=EN-US style='font-size:11.0pt'>clean</span></b><span style='font-size:
11.0pt'> с пустым списком зависимостей. Эта связка очищает проект от всех
автоматически созданных файлов. В нашем случае удаляются файлы </span><b><span
lang=EN-US style='font-size:11.0pt'>main</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>o</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.о</span></b><span
style='font-size:11.0pt'> и </span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><span
style='font-size:11.0pt'>. Очистка проекта бывает нужна в нескольких случаях:
1) для очистки готового проекта от всего лишнего; 2) для пересборки проекта
(когда в проект добавляются новые файлы или когда изменяется сам </span><b><span
lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span style='font-size:
11.0pt'>; 3) в любых других случаях, когда требуется полная пересборка
(например, для измерения времени полной сборки).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251644928;left:0px;margin-left:-324px;
margin-top:476px;width:573px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251644928'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>17                                                                                                                                                                            
    18</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Теперь осталось запустить сценарий.
Формат запуска утилиты </span><span lang=EN-US style='font-size:11.0pt'>make</span><span
style='font-size:11.0pt'> следующий:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>make</span></i><i><span style='font-size:
11.0pt'> [опции] [цели...]</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Опции </span><span lang=EN-US style='font-size:11.0pt'>make</span><span
style='font-size:11.0pt'> нам пока не нужны. Если вызвать </span><b><span
lang=EN-US style='font-size:11.0pt'>make</span></b><span style='font-size:11.0pt'>
без указания целей, то будет выполнена первая попавшаяся связка (со всеми
зависимостями) и сборка завершится. Нам это и требуется:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><i><span lang=EN-US style='font-size:
11.0pt'>make</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>gcc -с </span></i><i><span lang=EN-US
style='font-size:11.0pt'>main</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>gcc -с </span></i><i><span lang=EN-US
style='font-size:11.0pt'>hello</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'> hello main.o
hello.</span></i><i><span style='font-size:11.0pt'>о</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ls</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello* hello.c hello.</span></i><i><span
style='font-size:11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'>
main.c main.o Makefile</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ ./</span></i><i><span lang=EN-US style='font-size:
11.0pt'>hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Hello</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>World</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В процессе сборки утилита </span><b><span lang=EN-US
style='font-size:11.0pt'>make</span></b><span style='font-size:11.0pt'> пишет
все выполняемые правила. Проект собран, все работает.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь давайте немного модернизируем наш проект.
Добавим одну строку в файл </span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* hello.c */ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void print_hello (void)</span></i></p>

<p class=a style='line-height:normal'><i><span lang=EN-US style='font-size:
11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>printf (&quot;Hello
World\n&quot;);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>printf (&quot;Goodbye
World|n”);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>повторим</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>сборку</span><span lang=EN-US style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ make</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -c hello.</span></i><i><span
style='font-size:11.0pt'>с</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'> hello main.o
hello.</span></i><i><span style='font-size:11.0pt'>о</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ ./hello</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Hello World</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Goodbye World</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Утилита </span><b><span lang=EN-US style='font-size:
11.0pt'>make</span></b><span style='font-size:11.0pt'> &quot;пронюхала&quot;,
что был изменен только </span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>.с</span></b><span style='font-size:11.0pt'>, то есть
компилировать нужно только его. Файл </span><b><span lang=EN-US
style='font-size:11.0pt'>main</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>o</span></b><span style='font-size:11.0pt'>
остался без изменений. Теперь давайте очистим проект, оставив одни исходники:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ make clean</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>rm –f   *.o hello</span></i></p>

<p class=a style='line-height:normal'><i><span lang=EN-US style='font-size:
11.0pt'>$ls</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>hello.</span></i><i><span style='font-size:
11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'> main.c
Makefile</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В данном случае мы указали цель непосредственно в
командной строке. Так как целевая связка </span><b><span lang=EN-US
style='font-size:11.0pt'>clean</span></b><span style='font-size:11.0pt'>
содержит пустой список зависимостей, то выполняется только одно правило. Не
забывайте &quot;чистить&quot; проект каждый раз, когда изменяется список
исходных файлов или когда изменяется сам </span><b><span lang=EN-US
style='font-size:11.0pt'>Makefile</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>1.4. Модель КИС</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Любая программа имеет свой репозиторий - рабочий
каталог, в котором находятся исходники, сценарии сборки (</span><b><span
lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span style='font-size:
11.0pt'>) и прочие файлы, относящиеся к проекту. Репозиторий рассмотренного
нами проекта мультифайлового </span><b><span lang=EN-US style='font-size:11.0pt'>Hello</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>World</span></b><span style='font-size:11.0pt'> изначально
состоит из файлов </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>hello</span></b><b><span style='font-size:11.0pt'>.с </span></b><span
style='font-size:11.0pt'>и, собственно. </span><b><span lang=EN-US
style='font-size:11.0pt'>Makefile</span></b><span style='font-size:11.0pt'>.
После сборки репозиторий дополняется файлами </span><b><span lang=EN-US
style='font-size:11.0pt'>main</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>o</span></b><b><span style='font-size:11.0pt'>,
</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>.о и </span></b><b><span lang=EN-US style='font-size:
11.0pt'>hello</span></b><span style='font-size:11.0pt'>. Практика показывает,
что правильная организация исходного кода в репозиторий не только упрощает
модернизацию и отладку, но и предотвращает возможность появления многих ошибок.</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>Модель КИС
(Клиент-Интерфейс-Сервер) - это элегантная концепция распределения исходного
кода в репозиторий, в рамках которой все исходники можно поделить на клиенты,
интерфейсы и серверы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Итак, сервер предоставляет услуги. В нашем случае это
могут быть функции, структуры, перечисления, константы, глобальные переменные и
проч. В языке C++ это чаще всего классы или иерархии классов. Любой желающий
(клиент) может воспользоваться предоставленными услугами, то есть вызвать
функцию со своими фактическими параметрами, создать экземпляр структуры,
воспользоваться константой и т.п. В C++, как правило, клиент использует класс
как тип данных и использует его члены.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Часто бывает, что клиент сам становится сервером,
точнее начинает играть роль. промежуточного сервера. Хороший пример - наш
мультифайловый </span><span lang=EN-US style='font-size:11.0pt'>Hello</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>World</span><span style='font-size:11.0pt'>. Здесь функция </span><b><span
lang=EN-US style='font-size:11.0pt'>print</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> (клиент)
пользуется услугами стандартной библиотеки языка С (сервер), вызывая функцию </span><b><span
lang=EN-US style='font-size:11.0pt'>printf</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'>. Однако в дальнейшем
функция </span><b><span lang=EN-US style='font-size:11.0pt'>print</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> сама
становится сервером, предоставляя свои услуги функции </span><b><span
lang=EN-US style='font-size:11.0pt'>main</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'>. В языке C++ довольно
часто клиент создает производный класс, который наследует некоторые механизмы
базового класса сервера. Таким образом, клиент сам становится сервером, предоставляя
услуги своего производного класса.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251645952;left:0px;margin-left:-344px;
margin-top:230px;width:574px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251645952'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>19                                                                                                                                                                            
    20</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Клиент с сервером должны
&quot;понимать&quot; друг друга, иначе взаимодействие невозможно. Интерфейс
(протокол) - это условный набор правил, согласно которым взаимодействуют клиент
и сервер. В нашем случае (мультифайловый </span><span lang=EN-US
style='font-size:11.0pt'>Hello</span><span lang=EN-US style='font-size:11.0pt'>
</span><span lang=EN-US style='font-size:11.0pt'>World</span><span
style='font-size:11.0pt'>) интерфейсом (протоколом) является общее имя в
таблице символов двух объектных файлов. Такой способ взаимодействия может
привести к неприятным последствиям. Клиент (функция </span><b><span lang=EN-US
style='font-size:11.0pt'>main</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>) не знает ничего, кроме имени функции </span><b><span
lang=EN-US style='font-size:11.0pt'>print</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> и, наугад
вызывает ее без аргументов и без присваивания. Иначе говоря, клиент не знает до
конца правил игры. В нашем случае прототип функции </span><b><span lang=EN-US
style='font-size:11.0pt'>print</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span style='font-size:
11.0pt'>() </span></b><span style='font-size:11.0pt'>неизвестен.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251646976;left:0px;margin-left:196px;
margin-top:644px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251646976'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>21                                                                                                                                                                            
    22</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Обычно для организации интерфейсов
используются объявления (прототипы), которые помещаются чаще всего в
заголовочные файлы. В языке С это файлы с расширением .</span><span lang=EN-US
style='font-size:11.0pt'>h</span><span style='font-size:11.0pt'>; в языке C++
это файлы с раширением <b>.</b></span><b><span lang=EN-US style='font-size:
11.0pt'>h</span></b><b><span style='font-size:11.0pt'>, .</span></b><b><span
lang=EN-US style='font-size:11.0pt'>hpp</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>или без
расширения. Некоторые &quot;всезнайки&quot; ошибочно называют заголовочные
файлы библиотеками и умудряются учить этому других. Забегая вперед отметим, что
библиотека - это просто коллекция скомпонованных особым образом объектных
файлов, а заголовочный файл - это интерфейс. Основная разница между
библиотеками и заголовочньми файлами в том, что библиотека - это объектный
(почти исполняемый) код, а заголовочный файл -это исходный код. Включая в
программу заголовочный файл директивой <b>#</b></span><b><span lang=EN-US
style='font-size:11.0pt'>include</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>мы
соглашаемся работать с сервером (будь то библиотека или простой объектный файл)
по его протоколу: если сервер сказал, что функция вызывается без аргументов, то
она и будет вызываться без аргументов, иначе компилятор костьми ляжет, но не
даст откомпилировать &quot;незаконный вызов&quot;.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Вернемся к </span><span lang=EN-US style='font-size:
11.0pt'>Hello</span><span lang=EN-US style='font-size:11.0pt'> </span><span
lang=EN-US style='font-size:11.0pt'>World</span><span style='font-size:11.0pt'>.
В таком виде, как он есть сейчас, мы можем, например, вызвать функцию </span><b><span
lang=EN-US style='font-size:11.0pt'>print</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> с
аргументом, и компилятор даже не заподозрит неладное, потому что на уровне
исходного кода нет четких правил, регламентирующих взаимодействие клиента и
сервера. После того как мы создадим заголовочный файл и включим его в файл </span><b><span
lang=EN-US style='font-size:11.0pt'>main</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'>, компилятор будет &quot;сматывать удочки&quot; каждый
раз, когда мы будем пытаться вызвать функцию </span><b><span lang=EN-US
style='font-size:11.0pt'>print</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> не по правилам. Таким
образом интерфейс (набор объявлений, в данном случае - в заголовочном файле) -
это публичная оферта сервера клиенту. Включение заголовочного файла директивой <b>#</b></span><b><span
lang=EN-US style='font-size:11.0pt'>include</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>- это
акцепт или подпись.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Еще хочу сказать пару слов о стандартной библиотеке
языка С. Как уже отмечалось, библиотека - это набор объектных файлов, которые
подсоединяются к программе на стадии линковки. Так как стандартная библиотека
языка С - это часть стандарта языка С, то она подключается автоматически во
время линковки программы, но так как компилятор </span><b><span lang=EN-US
style='font-size:11.0pt'>gcc</span></b><span style='font-size:11.0pt'> сам
вызывает линковщик с нужными параметрами, то мы этого просто не замечаем.
Включая в исходники заголовочный файл </span><b><span lang=EN-US
style='font-size:11.0pt'>stdio</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>h</span></b><span style='font-size:11.0pt'>,
мы автоматически соглашаемся использовать механизм стандартного ввода-вывода на
условиях сервера (стандартной библиотеки языка С).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь попробуем применить модель КИС на практике для
нашего проекта </span><span lang=EN-US style='font-size:11.0pt'>Hello</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>World</span><span style='font-size:11.0pt'>. Создадим</span><span
style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>файл</span><span
style='font-size:11.0pt'> <b><span lang=EN-US>hello, h</span></b><span
lang=EN-US>:</span></span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* hello.h */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void print_hello (void);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь включим этот файл в </span><span lang=EN-US
style='font-size:11.0pt'>main</span><span style='font-size:11.0pt'>.</span><span
lang=EN-US style='font-size:11.0pt'>c</span><span style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* main.c */ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;hello.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>print_hello ();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Так как в проект был добавлен новый файл, надо сделать
полную пересборку:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ make clean </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>rm  -f  *.o  hello </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ make</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'> main.c </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'> hello.</span></i><i><span
style='font-size:11.0pt'>с</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'> hello main.o
hello.</span></i><i><span style='font-size:11.0pt'>о</span></i><i><span
style='font-size:11.0pt'> </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ ./hello </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Hello World </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Goodbye World </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>С виду ничего не изменилось. Но на самом деле
программа стала более правильной, более изящной и, самое главное, более
безопасной.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>2.
Библиотеки</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>2.1. Введение в библиотеки</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как уже неоднократно упоминалось в предыдущей главе,
библиотека - это набор скомпонованных особым образом объектных файлов.
Библиотеки подключаются к основной программе во время линковки. По способу
компоновки библиотеки подразделяют на архивы (статические библиотеки, </span><b><span
lang=EN-US style='font-size:11.0pt'>static</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>libraries</span></b><span
style='font-size:11.0pt'>) и совместно используемые (динамические библиотеки, </span><b><span
lang=EN-US style='font-size:11.0pt'>shared</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>libraries</span></b><span
style='font-size:11.0pt'>). В </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'>, кроме того, есть механизмы динамической подгрузки
библиотек. Суть динамической подгрузки состоит в том, что запущенная программа
может по собственному усмотрению подключить к себе какую-либо библиотеку.
Благодаря этой возможности создаются программы с подключаемыми плагинами, такие
как </span><span lang=EN-US style='font-size:11.0pt'>XMMS</span><span
style='font-size:11.0pt'>. В этой главе мы не будем рассматривать динамическую
подгрузку, а остановимся на классическом использовании статических и
динамических библиотек.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>С точки зрения модели КИС, библиотека - это сервер.
Библиотеки несут в себе одну важную мысль: возможность использовать одни и те
же механизмы в разных программах. В Linux библиотеки используются повсеместно,
поскольку это очень удобный способ &quot;не изобретать велосипеды&quot;. Даже
ядро Linux в каком-то смысле представляет собой библиотеку механизмов,
называемых системными вызовами.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Статическая библиотека - это просто архив объектных
файлов, который подключается к программе во время линковки. Эффект такой же,
как если бы вы подключали каждый из файлов отдельно.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В отличие от статических библиотек, код совместно
используемых (динамических) библиотек не включается в бинарник. Вместо этого в
бинарник включается только ссылка на библиотеку.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251648000;left:0px;margin-left:209px;
margin-top:97px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251648000'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>23                                                                                                                                                                            
    24</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Рассмотрим преимущества и недостатки
статических и совместно используемых библиотек. Статические библиотеки делают
программу более автономной: программа, скомпонованная со статической
библиотекой может запускаться на любом компьютере, не требуя наличия этой
библиотеки (она уже &quot;внутри&quot; бинарника). Программа, скомпонованная с
динамической библиотекой, требует наличия этой библиотеки на том компьютере,
где она запускается, поскольку в бинарнике не код, а ссылка на код библиотеки.
Не смотря на такую зависимость, динамические библиотеки обладают двумя
существенными преимуществами. Во-первых, бинарник, скомпонованный с совместно
используемой библиотекой меньше размером, чем такой же бинарник, с подключенной
к нему статической библиотекой (статически скомпонованный бинарник). Во-вторых,
любая модернизация динамической библиотеки, отражается на всех программах,
использующих ее. Таким образом, если некоторую библиотеку </span><b><span
lang=EN-US style='font-size:11.0pt'>foo</span></b><span style='font-size:11.0pt'>
используют 10 программ, то исправление какой-нибудь ошибки в <b>foo</b> или
любое другое улучшение библиотеки автоматически улучшает все программы, которые
используют эту библиотеку. Именно поэтому динамические библиотеки называют
совместно используемыми. Чтобы применить изменения, внесенные в статическую
библиотеку, нужно пересобрать все 10 программ.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В Linux статические библиотеки обычно имеют расширение
<b>.</b></span><b><span lang=EN-US style='font-size:11.0pt'>a</span></b><span
style='font-size:11.0pt'> (</span><span lang=EN-US style='font-size:11.0pt'>Archive</span><span
style='font-size:11.0pt'>), а совместно используемые библиотеки имеют
расширение <b>.</b></span><b><span lang=EN-US style='font-size:11.0pt'>so</span></b><span
style='font-size:11.0pt'> (</span><span lang=EN-US style='font-size:11.0pt'>Shared</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>Object</span><span style='font-size:11.0pt'>). Хранятся библиотеки, как
правило, в каталогах <b>/</b></span><b><span lang=EN-US style='font-size:11.0pt'>lib</span></b><span
style='font-size:11.0pt'> и <b>/</b></span><b><span lang=EN-US
style='font-size:11.0pt'>usr</span></b><b><span style='font-size:11.0pt'>/</span></b><b><span
lang=EN-US style='font-size:11.0pt'>lib</span></b><span style='font-size:11.0pt'>.
В случае иного расположения (относится только к совместно используемым
библиотекам), приходится немного &quot;подшаманить&quot;, чтобы программа
запустилась.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a style='line-height:normal'><b><span style='font-size:11.0pt'>2.2.
Пример статической библиотеки</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь давайте создадим свою собственную библиотеку,
располагающую двумя функциями:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>h</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>world</span></b><b><span style='font-size:
11.0pt'>() </span></b><span style='font-size:11.0pt'>и </span><b><span
lang=EN-US style='font-size:11.0pt'>g</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>world</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'>, которые выводят на экран
&quot;</span><span lang=EN-US style='font-size:11.0pt'>Hello</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>World</span><span style='font-size:11.0pt'>&quot; и &quot;</span><span
lang=EN-US style='font-size:11.0pt'>Goodbye</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>World</span><span
style='font-size:11.0pt'>&quot; соответственно. Начнем со статической
библиотеки.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Начнем с интерфейса. Создадим файл </span><b><span
lang=EN-US style='font-size:11.0pt'>world</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* world.h */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void h_world (void);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>g</span></i><i><span
style='font-size:11.0pt'>_</span></i><i><span lang=EN-US style='font-size:11.0pt'>world</span></i><i><span
style='font-size:11.0pt'> (</span></i><i><span lang=EN-US style='font-size:
11.0pt'>void</span></i><i><span style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Здесь просто объявлены функции, которые будут
использоваться.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь надо реализовать серверы. Создадим файл </span><b><span
lang=EN-US style='font-size:11.0pt'>h</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>world</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* h world.</span></i><i><span
style='font-size:11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'>
*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;world.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void h_world (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>printf (&quot;Hello
World\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>создадим</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>файл</span><span style='font-size:11.0pt'> <b><span
lang=EN-US>g_world.c</span></b><span lang=EN-US>, </span></span><span
style='font-size:11.0pt'>содержащий</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>реализацию</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>функции</span><span style='font-size:11.0pt'> <b><span
lang=EN-US>g_world()</span></b><span lang=EN-US>:</span></span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* g_world.c */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;world.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void g_world (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>printf</span></i><i><span
style='font-size:11.0pt'> (&quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>Goodbye</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>World</span></i><i><span
style='font-size:11.0pt'>\</span></i><i><span lang=EN-US style='font-size:11.0pt'>n</span></i><i><span
style='font-size:11.0pt'>&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Можно было бы с таким же успехом уместить обе функции
в одном файле (</span><b><span lang=EN-US style='font-size:11.0pt'>hello</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'> например), однако для наглядности мы разнесли код на
два файла. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь создадим файл </span><b><span lang=EN-US
style='font-size:11.0pt'>main</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>c</span></b><span style='font-size:11.0pt'>.
Это клиент, который будет пользоваться услугами сервера:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* main.c */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;world.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>h_world ();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><span style='position:absolute;z-index:251649024;left:0px;margin-left:
-347px;margin-top:618px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251649024'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>25                                                                                                                                                                            
    26</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><i><span style='font-size:11.0pt'>g_</span></i><i><span lang=EN-US
style='font-size:11.0pt'>world</span></i><i><span style='font-size:11.0pt'> ();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь напишем сценарий для </span><span lang=EN-US
style='font-size:11.0pt'>make</span><span style='font-size:11.0pt'>. Для</span><span
style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>этого</span><span
style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>создаем</span><span
style='font-size:11.0pt'> <b><span lang=EN-US>Makefile</span></b><span
lang=EN-US>:</span></span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'># Makefile for World project </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>binary: main.o libworld.a</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -o binary main.o -L.
–I  world </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>main.o: main.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -c main.c </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>libworld.a: h_world.o g_world.o</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>ar cr libworld.a h_world.o
g_world.o </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>h_world.o: h_world.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -c h_world.c </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>g_world.o: g_world.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -c g_world.c </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>clean:</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>rm</span></i><i><span
style='font-size:11.0pt'>  –</span></i><i><span lang=EN-US style='font-size:
11.0pt'>f</span></i><i><span style='font-size:11.0pt'>  *.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>o</span></i><i><span style='font-size:11.0pt'> 
*.</span></i><i><span lang=EN-US style='font-size:11.0pt'>a</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>binary</span></i><i><span lang=EN-US style='font-size:
11.0pt'> </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>He</span><span style='font-size:11.0pt'>
забывайте ставить табуляции перед каждым правилом в целевых связках.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Собираем программу:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><i><span lang=EN-US style='font-size:
11.0pt'>make</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>gcc -с </span></i><i><span lang=EN-US
style='font-size:11.0pt'>main</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'> h_world.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>с</span></i><i><span lang=EN-US style='font-size:11.0pt'> g_world.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>ar cr libworld.a h_world.o g_world.o</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>gcc -</span></i><i><span style='font-size:
11.0pt'>о</span></i><i><span lang=EN-US style='font-size:11.0pt'> binary main.o
-L. –I  world</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Осталось только проверить, работает ли программа и
разобраться, что же мы такое сделали:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ ./binary Hello World </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>Goodbye World</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Итак, в приведенном примере появились три новые вещи:
опции <b>-</b></span><b><span lang=EN-US style='font-size:11.0pt'>I</span></b><span
style='font-size:11.0pt'> и <b>-</b></span><b><span lang=EN-US
style='font-size:11.0pt'>L</span></b><span style='font-size:11.0pt'>
компилятора, а также команда <b>а</b></span><b><span lang=EN-US
style='font-size:11.0pt'>r</span></b><span style='font-size:11.0pt'>. Начнем с
последней. Как вы уже догадались, команда <b>а</b></span><b><span lang=EN-US
style='font-size:11.0pt'>r</span></b><span style='font-size:11.0pt'> создает
статическую библиотеку (архив). В нашем случае два объектных файла объединяются
в один файл </span><b><span lang=EN-US style='font-size:11.0pt'>libworld</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>a</span></b><span
style='font-size:11.0pt'>. В </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> практически все библиотеки имеют префикс </span><b><span
lang=EN-US style='font-size:11.0pt'>lib</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как уже говорилось, компилятор </span><b><span
lang=EN-US style='font-size:11.0pt'>gcc</span></b><span style='font-size:11.0pt'>
сам вызывает линковщик, когда это нужно. Опция <b>-</b></span><b><span
lang=EN-US style='font-size:11.0pt'>I</span></b><span style='font-size:11.0pt'>,
переданная компилятору, обрабатывается и посылается линковщику для того, чтобы
тот подключил к бинарнику библиотеку. Как вы уже заметили, у имени библиотеки
&quot;обрублены&quot; префикс и суффикс. Это делается для того, чтобы создать
&quot;видимое безразличие&quot; между статическими и динамическими библиотеками.
Но об этом речь пойдет в других главах книги. Сейчас важно знать лишь то, что и
библиотека </span><b><span lang=EN-US style='font-size:11.0pt'>libfoo</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>so</span></b><span
style='font-size:11.0pt'> и библиотека </span><b><span lang=EN-US
style='font-size:11.0pt'>libfoo</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>a</span></b><span style='font-size:11.0pt'>
подключаются к проекту опцией <b>-</b></span><b><span lang=EN-US
style='font-size:11.0pt'>lfoo</span></b><span style='font-size:11.0pt'>. В
нашем случае </span><b><span lang=EN-US style='font-size:11.0pt'>libworld</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>a</span></b><span
style='font-size:11.0pt'> &quot;урезалось&quot; до <b>-</b></span><b><span
lang=EN-US style='font-size:11.0pt'>world</span></b><span style='font-size:
11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Опция <b>-L</b> указывает линковщику, где ему искать
библиотеку. В случае, если библиотек</span><span lang=EN-US style='font-size:
11.0pt'>a</span><span style='font-size:11.0pt'> располагается в каталоге <b>/lib</b>
или <b>/</b></span><b><span lang=EN-US style='font-size:11.0pt'>usr</span></b><b><span
style='font-size:11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>lib</span></b><span
style='font-size:11.0pt'>, то вопрос отпадает сам собой и опция <b>-L</b> не
требуется. В нашем случае библиотека находится в репозитории (в текущем
каталоге). По умолчанию линковщик не просматривает текущий каталог в поиске библиотеки,
поэтому опция <b>-L</b>. (точка означает текущий каталог) необходима.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>2.3. Пример совместно используемой библиотеки</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для того, чтобы создать и использовать динамическую
(совместно используемую) библиотеку, достаточно переделать в нашем проекте </span><b><span
lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span style='font-size:
11.0pt'>. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'># Makefile for World project </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>binary: main.o libworld.so</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -o binary main.o -L.
–I  world –Wl, -rpath,. </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>main.o: main.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -c main.c</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>libworld.so: h_world.o g_world.o</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -shared -o libworld.so
h_world.o g_world.o </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>h_world.o: h_world.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -c -fPIC h_world.c </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>g_world.o: g_world.c</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>gcc -c -fPIC  g_world.c </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>clean:</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>rm  –f  *.o  *.so binary</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Внешне ничего не изменилось: программа компилируется,
запускается и выполняет те же самые действия, что и в предыдущем случае.
Изменилась внутренняя суть, которая играет для программиста первоочередную
роль. Рассмотрим все по порядку.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Правило для сборки </span><span lang=EN-US
style='font-size:11.0pt'>binary</span><span style='font-size:11.0pt'> теперь
содержит пугающую опцию<b> -</b></span><b><span lang=EN-US style='font-size:
11.0pt'>Wl</span></b><span style='font-size:11.0pt'>, <b>-</b></span><b><span
lang=EN-US style='font-size:11.0pt'>rpath</span></b><span style='font-size:
11.0pt'>. Ничего страшного тут нет. Как уже неоднократно говорилось, компилятор
gcc сам вызывает линковщик </span><b><span lang=EN-US style='font-size:11.0pt'>ld</span></b><span
style='font-size:11.0pt'>, когда это надо и передает ему нужные параметры
сборки, избавляя нас от ненужной платформенно-зависимой волокиты. Но иногда мы
все-таки должны вмешаться в этот процесс и передать линковщику &quot;свою&quot;
опцию. Для этого используется опция компилятора <b>-</b></span><b><i><span
lang=EN-US style='font-size:11.0pt'>Wl</span></i></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>option</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>optargs</span></b><b><span style='font-size:11.0pt'>,... </span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251650048;left:0px;margin-left:-334px;
margin-top:324px;width:574px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251650048'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>27                                                                                                                                                                            
    28</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Расшифровываю: передать линковщику (<b>-</b></span><b><span
lang=EN-US style='font-size:11.0pt'>Wl</span></b><span style='font-size:11.0pt'>)
опцию </span><b><span lang=EN-US style='font-size:11.0pt'>option</span></b><span
style='font-size:11.0pt'> с аргументами </span><b><span lang=EN-US
style='font-size:11.0pt'>optargs</span></b><span style='font-size:11.0pt'>. В
нашем случае мы передаем линковщику опцию -</span><span lang=EN-US
style='font-size:11.0pt'>rpath</span><span style='font-size:11.0pt'> с
аргументом . (точка, текущий-каталог). Возникает вопрос: что означает опция <b>-rpath</b>?
Как уже говорилось, линковщик ищет библиотеки в определенных местах; обычно это
каталоги <b>/lib</b> и <b>/usr/lib</b>, иногда <b>/</b></span><b><span
lang=EN-US style='font-size:11.0pt'>usr</span></b><b><span style='font-size:
11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>local</span></b><b><span
style='font-size:11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>lib</span></b><span
style='font-size:11.0pt'>. Опция <b>-rpath</b> просто добавляет к этому списку
еще один каталог. В нашем случае это текущий каталог. Без указания опции <b>-rpath</b>,
линковщик &quot;молча&quot; соберет программу, но при запуске нас будет ждать
сюрприз: программа не запустится из-за отсутствия библиотеки. Попробуйте убрать
опцию <b>-</b></span><b><i><span lang=EN-US style='font-size:11.0pt'>Wl</span></i></b><b><span
style='font-size:11.0pt'>, -</span></b><b><span lang=EN-US style='font-size:
11.0pt'>rpath</span></b><span style='font-size:11.0pt'>. из </span><b><span
lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span style='font-size:
11.0pt'> и пересоберите проект. При попытке запуска программа </span><b><span
lang=EN-US style='font-size:11.0pt'>binary</span></b><span style='font-size:
11.0pt'> завершится с кодом возврата 127. То же самое произойдет, если вызвать
программу из другого каталога. Верните обратно -</span><b><i><span lang=EN-US
style='font-size:11.0pt'>Wl</span></i></b><b><span style='font-size:11.0pt'>, -</span></b><b><span
lang=EN-US style='font-size:11.0pt'>rpath</span></b><b><span style='font-size:
11.0pt'>,.</span></b><span style='font-size:11.0pt'>, пересоберите проект,
поднимитесь на уровень выше командой </span><b><span lang=EN-US
style='font-size:11.0pt'>cd</span></b><b><span style='font-size:11.0pt'>..</span></b><span
style='font-size:11.0pt'> и попробуйте запустить бинарник командой </span><b><span
lang=EN-US style='font-size:11.0pt'>world</span></b><b><span style='font-size:
11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>binary</span></b><span
style='font-size:11.0pt'>. Ничего не получится, поскольку в новом текущем
каталоге библиотеки нет.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Есть один способ не передавать линковщику
дополнительных опций при помощи <b>-</b></span><b><span lang=EN-US
style='font-size:11.0pt'>Wl</span></b><b><span lang=EN-US style='font-size:
11.0pt'> </span></b><span style='font-size:11.0pt'>- это использование
переменной окружения </span><b><span lang=EN-US style='font-size:11.0pt'>LD</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>LIBRARY</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>PATH</span></b><span
style='font-size:11.0pt'>.. Сейчас лишь скажу, что у каждого пользователя есть
так называемое окружение (</span><span lang=EN-US style='font-size:11.0pt'>environment</span><span
style='font-size:11.0pt'>) представляющее собой набор пар ПЕРЕМЕННАЯ=ЗНАЧЕНИЕ,
используемых программами. Чтобы посмотреть окружение, достаточно набрать
команду </span><b><span lang=EN-US style='font-size:11.0pt'>env</span></b><span
style='font-size:11.0pt'>. Чтобы добавить в окружение переменную, достаточно
набрать </span><span lang=EN-US style='font-size:11.0pt'>export</span><span
style='font-size:11.0pt'> ПЕРЕМЕННАЯ=ЗНАЧЕНИЕ, а чтобы удалить переменную из
окружения, надо набрать </span><span lang=EN-US style='font-size:11.0pt'>export</span><span
lang=EN-US style='font-size:11.0pt'> </span><b><span style='font-size:11.0pt'>-</span></b><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><span style='font-size:11.0pt'>
ПЕРЕМЕННАЯ. Будьте внимательны: </span><span lang=EN-US style='font-size:11.0pt'>export</span><span
style='font-size:11.0pt'> - это внутреннаяя команда оболочки </span><span
lang=EN-US style='font-size:11.0pt'>BASH</span><span style='font-size:11.0pt'>;
в других оболочках (</span><span lang=EN-US style='font-size:11.0pt'>csh</span><span
style='font-size:11.0pt'>, </span><span lang=EN-US style='font-size:11.0pt'>ksh</span><span
style='font-size:11.0pt'>, ...) используются другие команды для работы с
окружением. Переменная окружения </span><b><span lang=EN-US style='font-size:
11.0pt'>LD</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>LIBRARY</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>PATH</span></b><span
style='font-size:11.0pt'> содержит список дополнительных &quot;мест&quot;,
разделенных двоеточиеями, где линковщих должен искать библиотеку.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Не смотря на наличие двух механизмов передачи
информации о нестандартном расположении библиотек, лучше помещать библиотеки в
конечных проектах в <b>/</b></span><b><span lang=EN-US style='font-size:11.0pt'>lib</span></b><span
style='font-size:11.0pt'> и в <b>/</b></span><b><span lang=EN-US
style='font-size:11.0pt'>usr</span></b><b><span style='font-size:11.0pt'>/</span></b><b><span
lang=EN-US style='font-size:11.0pt'>lib</span></b><span style='font-size:11.0pt'>.
Допускается расположение библиотек в подкаталоги <b>/</b></span><b><span
lang=EN-US style='font-size:11.0pt'>usr</span></b><b><span style='font-size:
11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>lib</span></b><span
style='font-size:11.0pt'> и в <b>/</b></span><b><span lang=EN-US
style='font-size:11.0pt'>usr</span></b><b><span style='font-size:11.0pt'>/</span></b><b><span
lang=EN-US style='font-size:11.0pt'>local</span></b><b><span style='font-size:
11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>lib</span></b><span
style='font-size:11.0pt'> (с указанем <b>-</b></span><b><span lang=EN-US
style='font-size:11.0pt'>Wl</span></b><span style='font-size:11.0pt'>, <b>-</b></span><b><span
lang=EN-US style='font-size:11.0pt'>rpath</span></b><span style='font-size:
11.0pt'>). Но заставлять конечного пользователя устанавливать </span><b><span
lang=EN-US style='font-size:11.0pt'>LD</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>LIBRARY</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>PATH</span></b><span
style='font-size:11.0pt'> почти всегда является плохим стилем программирования.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Следующая немаловажная деталь - это процесс создания
самой библиотеки. Статические библиотеки создаются при помощи архиватора <b>а</b></span><b><span
lang=EN-US style='font-size:11.0pt'>r</span></b><span style='font-size:11.0pt'>,
а совместно используемые - при помощи </span><b><span lang=EN-US
style='font-size:11.0pt'>gcc</span></b><span style='font-size:11.0pt'> с опцией
<b>-</b></span><b><span lang=EN-US style='font-size:11.0pt'>shared</span></b><span
style='font-size:11.0pt'>. В данном случае <b>gcc</b> опять же вызывает
линковщик, но не для сборки бинарника, а для создания динамической библиотеки.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Последнее отличие - опции <b>-</b></span><b><span
lang=EN-US style='font-size:11.0pt'>fPIC</span></b><b><span style='font-size:
11.0pt'> (-</span></b><b><span lang=EN-US style='font-size:11.0pt'>fpic</span></b><b><span
style='font-size:11.0pt'>)</span></b><span style='font-size:11.0pt'> при
компиляции </span><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>world</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'> и </span><b><span lang=EN-US style='font-size:11.0pt'>g</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>world</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>c</span></b><span
style='font-size:11.0pt'>. Эта опция сообщает компилятору, что объектные файлы,
полученные в результате компиляции должны содержать позиционно-независимый код
(</span><span lang=EN-US style='font-size:11.0pt'>PIC</span><span
style='font-size:11.0pt'> - </span><span lang=EN-US style='font-size:11.0pt'>Position</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>Independent</span><span lang=EN-US style='font-size:11.0pt'> </span><span
lang=EN-US style='font-size:11.0pt'>Code</span><span style='font-size:11.0pt'>),
который используется в динамических библиотеках. В таком коде используются не
фиксированные позиции (адреса), а плавающие, благодаря чему код из библиотеки
имеет возможность подключаться к программе в момент запуска.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3. Основы низкоуровневого ввода-вывода</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3.1. Обзор механизмов ввода-вывода в Linux</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В языке С для осуществления файлового ввода-вывода
используются механизмы стандартной библиотеки языка, объявленные в заголовочном
файле </span><b><span lang=EN-US style='font-size:11.0pt'>stdio</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>. Как вы вскоре узнаете консольный ввод-вывод - это не
более чем частный случай файлового ввода-вывода. В C++ для ввода-вывода чаще
всего используются потоковые типы данных. Однако все эти механизмы являются
всего лишь надстройками над низкоуровневыми механизмами ввода-вывода ядра
операционной системы.</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>Функции
ввода и вывода стандартной библиотеки Си позволяют читать данные из файлов или
получать их с устройств ввода (например, с клавиатуры) и записывать данные в
файлы или выводить их на различные устройства (например, на принтер).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Функции ввода/вывода делятся на три класса:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>1. Ввод/вывод верхнего уровня (с использованием
понятия &quot;поток&quot;). Для этих функций характерно, что они обеспечивают
буферизацию работы с файлами. Это означает, что при чтении или записи
информации обмен данными осуществляется не между программой и указанным файлом,
а между программой и промежуточным буфером, расположенным в оперативной памяти.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>При записи в файл информация из буфера записывается
при его заполнении или при закрытии файла. При чтении данных программой
информация берется из буфера, а в буфер она считывается при открытии файла и
впоследствии каждый раз при опустошении буфера. Буферизация ввода/вывода
выполняется автоматически, она позволяет ускорить выполнение программы за счет
уменьшения количества обращений к сравнительно медленно работающим внешним
устройствам.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для пользователя файл, открытый на верхнем уровне,
представляется как последовательность считываемых или записываемых байтов.
Чтобы отразить эту особенность организации ввода/вывода, предложено понятие
&quot;поток&quot; (англ. </span><span lang=EN-US style='font-size:11.0pt'>stream</span><span
style='font-size:11.0pt'>). Когда файл открывается, с ним связывается поток,
выводимая информация записывается &quot;в поток&quot;, а считываемая берется
&quot;из потока&quot;.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Когда поток открывается для ввода/вывода, он
связывается со структурой типа </span><b><span lang=EN-US style='font-size:
11.0pt'>FILE</span></b><span style='font-size:11.0pt'>, определенной с помощью </span><b><span
lang=EN-US style='font-size:11.0pt'>typedef</span></b><span style='font-size:
11.0pt'> в файле </span><b><span lang=EN-US style='font-size:11.0pt'>stdio</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>. Эта структура содержит свою необходимую информацию о
файле. При открытии файла с помощью стандартной функции </span><b><span
lang=EN-US style='font-size:11.0pt'>fopen</span></b><span style='font-size:
11.0pt'> возвращается указатель на структуру типа </span><b><span lang=EN-US
style='font-size:11.0pt'>FILE</span></b><span style='font-size:11.0pt'>. Этот
указатель, называемый указателем потока, используете для последующих операций с
файлом. Его значение передается всем библиотечным функциям, используемым для
ввода/вывода через этот поток.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Функции верхнего уровня одинаково работают в различных
операционных средах, с их помощью можно писать переносимые программы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>2. Ввод/вывод для консольного терминала путем
непосредственного обращения к нему. Функции для консоли и порта распространяют
возможности функций ввода/вывода верхнего уровня на соответствующий класс
устройств, добавляя новые возможности.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251651072;left:0px;margin-left:-337px;
margin-top:307px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251651072'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>31                                                                                                                                                                            
    32</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Они позволяют читать или записывать на
консоль (терминал) или в порт ввода/вывода (например, порт принтера). Эти
функции читают или записывают данные побайтно. Для ввода или вывода с консоли
устанавливаются некоторые дополнительные режимы, например, ввод с эхо-печатью
символов или без нее, установка окна вывода, цветов текста и фона. Функции для
консоли и порта являются уникальными для компьютеров, совместимых с </span><span
lang=EN-US style='font-size:11.0pt'>IBM</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>D</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>PC</span><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>3. Ввод/вывод низкого уровня (с использованием понятия
&quot;дескриптор&quot;). Функции низкого уровня не выполняют буферизацию и
форматирование данных, они позволяют непосредственно пользоваться средствами
ввода/вывода операционной системы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>При низкоуровневом открытии файла с помощью функции </span><span
lang=EN-US style='font-size:11.0pt'>open</span><span style='font-size:11.0pt'>
с ним связывается файловый дескриптор (англ. </span><span lang=EN-US
style='font-size:11.0pt'>handle</span><span style='font-size:11.0pt'>).
Дескриптор является целым значением, характеризующими размещение информации об
открытом файле во внутренних таблицах операционной системы. Дескриптор
используется при последующих операциях с файлом.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Функции низкого уровня из стандартной библиотеки
обычно применяются при разработке собственных подсистем ввода/вывода.
Большинство функций этого уровня переносимы в рамках некоторых систем
программирования на Си, в частности, относящихся к операционной системе </span><span
lang=EN-US style='font-size:11.0pt'>Unix</span><span style='font-size:11.0pt'>
и совместимым с ней.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>С точки зрения модели КИС (Клиент-Интерфейс-Сервер),
сервером стандартных механизмов ввода вывода языка С (</span><b><span
lang=EN-US style='font-size:11.0pt'>printf</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>scant</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>FILE</span></b><b><span style='font-size:11.0pt'>*, </span></b><b><span
lang=EN-US style='font-size:11.0pt'>fprintf</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>fputc</span></b><b><span lang=EN-US style='font-size:11.0pt'> </span></b><span
style='font-size:11.0pt'>и т. д.) является библиотека языка. А сервером
низкоуровневого ввода-вывода в </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> является само ядро операционной системы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Пользовательские программы взаимодействуют с ядром
операционной системы посредством специальных механизмов, называемых системными
вызовами (</span><span lang=EN-US style='font-size:11.0pt'>system</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>calls</span><span style='font-size:11.0pt'>, </span><span lang=EN-US
style='font-size:11.0pt'>syscalls</span><span style='font-size:11.0pt'>).
Внешне системные вызовы реализованы в виде обычных функций языка С, однако
каждый раз вызывая такую функцию, мы обращаемся непосредственно к ядру
операционной системы. Список всех системных вызовов Linux можно найти в файле <b>/</b></span><b><span
lang=EN-US style='font-size:11.0pt'>usr</span></b><b><span style='font-size:
11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>include</span></b><b><span
style='font-size:11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>asm</span></b><b><span
style='font-size:11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>unistd</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>. Здесь мы рассмотрим основные системные вызовы,
осуществляющие ввод-вывод: </span><b><span lang=EN-US style='font-size:11.0pt'>open</span></b><b><span
style='font-size:11.0pt'>(), </span></b><b><span lang=EN-US style='font-size:
11.0pt'>close</span></b><b><span style='font-size:11.0pt'>(), </span></b><b><span
lang=EN-US style='font-size:11.0pt'>read</span></b><b><span style='font-size:
11.0pt'>(), </span></b><b><span lang=EN-US style='font-size:11.0pt'>write</span></b><b><span
style='font-size:11.0pt'>(), </span></b><b><span lang=EN-US style='font-size:
11.0pt'>lseek</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> и некоторые другие.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3.2. Файловые дескрипторы</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251652096;left:0px;margin-left:209px;
margin-top:172px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251652096'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>33                                                                                                                                                                            
    34</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>В языке С при осуществлении ввода-вывода
мы используем указатель </span><b><span lang=EN-US style='font-size:11.0pt'>FILE</span></b><b><span
style='font-size:11.0pt'>*</span></b><span style='font-size:11.0pt'>. Даже
функция </span><b><span lang=EN-US style='font-size:11.0pt'>printf</span></b><b><span
style='font-size:11.0pt'>() </span></b><span style='font-size:11.0pt'>в итоге
сводится к вызову </span><b><span lang=EN-US style='font-size:11.0pt'>vfprintf</span></b><b><span
style='font-size:11.0pt'>(</span></b><b><span lang=EN-US style='font-size:11.0pt'>stdout</span></b><b><span
style='font-size:11.0pt'>,...)</span></b><span style='font-size:11.0pt'>,
разновидности функции </span><b><span lang=EN-US style='font-size:11.0pt'>fprintf</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>;
константа </span><b><span lang=EN-US style='font-size:11.0pt'>stdout</span></b><span
style='font-size:11.0pt'> имеет тип <br>
</span><b><span lang=EN-US style='font-size:11.0pt'>struct</span></b><b><span
style='font-size:11.0pt'> _</span></b><b><span lang=EN-US style='font-size:
11.0pt'>IO</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>FILE</span></b><b><span style='font-size:
11.0pt'>*</span></b><span style='font-size:11.0pt'>, синонимом которого
является тип </span><b><span lang=EN-US style='font-size:11.0pt'>FILE</span></b><b><span
style='font-size:11.0pt'>*</span></b><span style='font-size:11.0pt'>. Это к
тому, что консольный ввод-вывод - это файловый ввод-вывод. Стандартный поток
ввода, стандартный поток вывода и поток ошибок (как в С, так и в C++) - это
файлы. В </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> все, куда можно что-то записать или откуда можно
что-то прочитать представлено (или может быть представлено) в виде файла.
Экран, клавиатура, аппаратные и виртуальные устройства, каналы, сокеты - все
это файлы. Это очень удобно, поскольку ко всему можно применять одни и те же
механизмы ввода-вывода, с которыми мы и познакомимся в этой главе. Владение
механизмами низкоуровневого ввода-вывода дает свободу перемещения данных в
Linux. Работа с локальными файловыми системами, межсетевое взаимодействие,
работа с аппаратными устройствами, - все это осуществляется в Linux посредством
низкоуровневого ввода-вывода.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Вы знаете, что при запуске программы в системе
создается новый процесс (здесь есть свои особенности, о которых пока говорить
не будем). У каждого процесса (кроме </span><span lang=EN-US style='font-size:
11.0pt'>init</span><span style='font-size:11.0pt'>) есть свой родительский
процесс (</span><span lang=EN-US style='font-size:11.0pt'>parent</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>process</span><span style='font-size:11.0pt'> или просто </span><span
lang=EN-US style='font-size:11.0pt'>parent</span><span style='font-size:11.0pt'>),
для которого новоиспеченный процесс является дочерним (</span><span lang=EN-US
style='font-size:11.0pt'>child</span><span lang=EN-US style='font-size:11.0pt'>
</span><span lang=EN-US style='font-size:11.0pt'>process</span><span
style='font-size:11.0pt'>, </span><span lang=EN-US style='font-size:11.0pt'>child</span><span
style='font-size:11.0pt'>). Каждый процесс получает копию окружения (</span><span
lang=EN-US style='font-size:11.0pt'>environment</span><span style='font-size:
11.0pt'>) родительского процесса. Оказывается, кроме окружения дочерний процесс
получает в качестве багажа еще и копию таблицы файловых дескрипторов.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Файловый дескриптор (</span><span lang=EN-US
style='font-size:11.0pt'>file</span><span lang=EN-US style='font-size:11.0pt'> </span><span
lang=EN-US style='font-size:11.0pt'>descriptor</span><span style='font-size:
11.0pt'>) - это целое число (</span><span lang=EN-US style='font-size:11.0pt'>int</span><span
style='font-size:11.0pt'>), соответствующее открытому файлу. Дескриптор,
соответствующий реально открытому файлу всегда больше или равен нулю. Копия
таблицы дескрипторов (читай: таблицы открытых файлов внутри процесса) скрыта в
ядре. Мы не можем получить прямой доступ к этой таблице, как при работе с
окружением через </span><span lang=EN-US style='font-size:11.0pt'>environ</span><span
style='font-size:11.0pt'>. Можно, конечно, кое-что &quot;вытянуть&quot; через
дерево <b>/р</b></span><b><span lang=EN-US style='font-size:11.0pt'>r</span></b><b><span
style='font-size:11.0pt'>ос</span></b><span style='font-size:11.0pt'>, но нам
это не надо. Программист должен лишь понимать, что каждый процесс имеет свою
копию таблицы дескрипторов. В пределах одного процесса все дескрипторы
уникальны (даже если они соответствуют одному и тому же файлу или устройству).
В разных процессах дескрипторы могут совпадать или не совпадать - это не имеет
никакого значения, поскольку у каждого процесса свой собственный набор открытых
файлов.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Возникает вопрос: сколько файлов может открыть
процесс? В каждой системе есть свой лимит, зависящий от конфигурации. Если вы
используете </span><span lang=EN-US style='font-size:11.0pt'>bash</span><span
style='font-size:11.0pt'> или </span><span lang=EN-US style='font-size:11.0pt'>ksh</span><span
style='font-size:11.0pt'> (</span><span lang=EN-US style='font-size:11.0pt'>Kom</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>Shell</span><span style='font-size:11.0pt'>), </span><span lang=EN-US
style='font-size:11.0pt'>TO</span><span style='font-size:11.0pt'> можете
воспользоваться внутренней командой оболочки </span><b><span lang=EN-US
style='font-size:11.0pt'>ulimit</span></b><span style='font-size:11.0pt'>,
чтобы узнать это значение.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><i><span lang=EN-US style='font-size:
11.0pt'>ulimit</span></i><i><span style='font-size:11.0pt'> -</span></i><i><span
lang=EN-US style='font-size:11.0pt'>n</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>1024</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если вы работаете с оболочкой </span><span lang=EN-US
style='font-size:11.0pt'>C</span><span style='font-size:11.0pt'>-</span><span
lang=EN-US style='font-size:11.0pt'>shell</span><span style='font-size:11.0pt'>
(</span><span lang=EN-US style='font-size:11.0pt'>csh</span><span
style='font-size:11.0pt'>, </span><span lang=EN-US style='font-size:11.0pt'>tcsh</span><span
style='font-size:11.0pt'>), то в вашем распоряжении команда </span><b><span
lang=EN-US style='font-size:11.0pt'>limit</span></b><span style='font-size:
11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$ </span></i><i><span lang=EN-US style='font-size:
11.0pt'>limit</span></i><i><span lang=EN-US style='font-size:11.0pt'> </span></i><i><span
lang=EN-US style='font-size:11.0pt'>descriptors</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>descriptors</span></i><i><span
style='font-size:11.0pt'> 1024</span></i></p>

<p class=a style='line-height:normal'><i><span style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В командной оболочке, в которой вы работаете (</span><span
lang=EN-US style='font-size:11.0pt'>bash</span><span style='font-size:11.0pt'>,
например), открыты три файла: стандартный ввод (дескриптор <b>0</b>),
стандартный вывод (дескриптор <b>1</b>) и стандартный поток ошибок (дескриптор <b>2</b>).
Когда под оболочкой запускается программа, в системе создается новый процесс,
который является для этой оболочки дочерним процессом, следовательно, получает
копию таблицы дескрипторов своего родителя (то есть все открытые файлы
родительского процесса). Таким образом, программа может осуществлять консольный
ввод-вывод через эти дескрипторы..</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Таблица дескрипторов, помимо всего прочего, содержит
информацию о текущей позиции чтения-записи для каждого дескриптора. При
открытии файла, позиция чтения-записи устанавливается в ноль. Каждый
прочитанный или записанный байт увеличивает на единицу указатель текущей
позиции. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3.3. Открытие, файла: системный вызов ореn()</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Чтобы получить возможность прочитать что-то из файла
или записать что-то в файл, его нужно открыть. Это делает системный вызов <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>. Этот системный вызов не имеет постоянного списка
аргументов (за счет использования механизма </span><b><span lang=EN-US
style='font-size:11.0pt'>va</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>arg</span></b><span style='font-size:11.0pt'>);
в связи с этим существуют две &quot;разновидности&quot; <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>. Не только в C++ есть перегрузка функций. Если
интересно, то о механизме </span><b><span lang=EN-US style='font-size:11.0pt'>va</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>arg</span></b><span
style='font-size:11.0pt'> можно прочитать на man-странице </span><span
lang=EN-US style='font-size:11.0pt'>stdarg</span><span style='font-size:11.0pt'>
(</span><span lang=EN-US style='font-size:11.0pt'>man</span><span
style='font-size:11.0pt'> 3 </span><span lang=EN-US style='font-size:11.0pt'>stdarg</span><span
style='font-size:11.0pt'>) или в книге Б. Кернигана и Д. Ритчи &quot;Язык
программирования Си&quot;. Ниже приведены адаптированные прототипы системного
вызова <b>оре</b></span><b><span lang=EN-US style='font-size:11.0pt'>n</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>int</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>open</span></b><b><span
style='font-size:11.0pt'> (</span></b><b><span lang=EN-US style='font-size:
11.0pt'>const</span></b><b><span lang=EN-US style='font-size:11.0pt'> </span></b><b><span
lang=EN-US style='font-size:11.0pt'>char</span></b><b><span style='font-size:
11.0pt'> * </span></b><b><span lang=EN-US style='font-size:11.0pt'>filename</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>int</span></b><b><span lang=EN-US style='font-size:11.0pt'> </span></b><b><span
lang=EN-US style='font-size:11.0pt'>flags</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>mode</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>t</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>mode</span></b><b><span style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>int open (const char * filename, int
flags);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Системный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>open</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> объявлен в заголовочном файле </span><b><span
lang=EN-US style='font-size:11.0pt'>fcntl</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>. Ниже приведен общий адаптированный прототип <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>int open (const char * filename, int
flags,...);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Начнем по порядку. Первый аргумент - имя файла в
файловой системе в обычной форме: полный путь к файлу (если файл не находится в
текущем каталоге) или сокращенное имя (если файл в текущем каталоге).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251653120;left:0px;margin-left:-318px;
margin-top:384px;width:574px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251653120'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>35                                                                                                                                                                            
    36</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Второй аргумент - это режим открытия
файла, представляющий собой один или несколько флагов открытия, объединенных
оператором побитового ИЛИ. Список доступных флагов приведен в Таблице 4
Приложения 1. Наиболее часто используют только первые семь флагов. Если вы
хотите, например, открыть файл в режиме чтения и записи, и при этом
автоматически создать файл, если такового не существует, то второй аргумент
ореn() будет выглядеть примерно так:</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span lang=EN-US
style='font-size:11.0pt'>O</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>RDWR</span><span style='font-size:11.0pt'>|</span><span
lang=EN-US style='font-size:11.0pt'>O</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>CREAT</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Константы-флаги открытия объявлены в заголовочном
файле </span><b><span lang=EN-US style='font-size:11.0pt'>bits</span></b><b><span
style='font-size:11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>fcntl</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>, однако не стоит включать этот файл в свои программы,
поскольку он уже включен в файл </span><b><span lang=EN-US style='font-size:
11.0pt'>fcntl</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>h</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Третий аргумент используется в том случае, если <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> создает новый файл. В этом случ</span><span
lang=EN-US style='font-size:11.0pt'>ae</span><span style='font-size:11.0pt'>
файлу нужно задать права доступа (режим), с которыми он появится в файловой
системе. Права доступа задаются перечислением флагов, объединенных побитовым
ИЛИ. Вместо флагов можно использовать число (как правило восьмиричное), однако
первый способ нагляднее и предпочтительнее. Список флагов приведен в Таблице 1
Приложения 1. Чтобы, например, созданный файл был доступен в режиме
&quot;чтение-запись&quot; пользователем и группой и &quot;только чтение&quot;
остальными пользователями, - в третьем аргументе <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()
</span></b><span style='font-size:11.0pt'>надо указать примерно следующее: </span><b><span
lang=EN-US style='font-size:11.0pt'>S</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>IRUSR</span></b><b><span style='font-size:
11.0pt'>|</span></b><b><span lang=EN-US style='font-size:11.0pt'>S</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>IWUSR</span></b><b><span
style='font-size:11.0pt'>|</span></b><b><span lang=EN-US style='font-size:11.0pt'>S</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>IRGRP</span></b><b><span
style='font-size:11.0pt'>|</span></b><b><span lang=EN-US style='font-size:11.0pt'>S</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>IWGRP</span></b><b><span
style='font-size:11.0pt'>|</span></b><b><span lang=EN-US style='font-size:11.0pt'>S</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>IROTH</span></b><span
style='font-size:11.0pt'> или <b>0664</b>. Флаги режима доступа реально
объявлены в заголовочном файле </span><b><span lang=EN-US style='font-size:
11.0pt'>bits</span></b><b><span style='font-size:11.0pt'>/</span></b><b><span
lang=EN-US style='font-size:11.0pt'>stat</span></b><b><span style='font-size:
11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>, но он не предназначен для включения в
пользовательские программы, и вместо него мы должны включать файл </span><b><span
lang=EN-US style='font-size:11.0pt'>sys</span></b><b><span style='font-size:
11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>stat</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>. Тип </span><b><span lang=EN-US style='font-size:
11.0pt'>mode</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>t</span></b><span style='font-size:11.0pt'>
объявлен в заголовочном файле </span><b><span lang=EN-US style='font-size:11.0pt'>sys</span></b><b><span
style='font-size:11.0pt'>/</span></b><b><span lang=EN-US style='font-size:11.0pt'>types</span></b><b><span
style='font-size:11.0pt'>.</span></b><b><span lang=EN-US style='font-size:11.0pt'>h</span></b><span
style='font-size:11.0pt'>.</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>Если файл
был успешно открыт, <b>ореn() </b>возвращает файловый дескриптор, по которому
мы будем обращаться к файлу. Если произошла ошибка, то <b>ореn() </b>возвращает
<b>-1</b>.</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3.4. Закрытие файла: системный вызов </span></b><b><span
lang=EN-US style='font-size:11.0pt'>close</span></b><b><span style='font-size:
11.0pt'>()</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Системный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>close</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> закрывает файл. Вообще говоря, по завершении процесса
вс</span><span lang=EN-US style='font-size:11.0pt'>e</span><span
style='font-size:11.0pt'> открытые файлы (кроме файлов с дескрипторами <b>0</b>,
<b>1</b> и <b>2</b>) автоматически закрываются. Тем не менее, это не
освобождает нас от самостоятельного вызова </span><b><span lang=EN-US
style='font-size:11.0pt'>close</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>, когда файл нужно закрыть. К тому же, если файлы не
закрывать самостоятельно, то соответствующие дескрипторы не освобождаются, что
может привести к превышению лимита открытых файлов. Простой пример: приложение
может быть настроено так, чтобы каждую минуту открывать и перечитывать свой
файл конфигурации для проверки обновлений. Если каждый раз файл не будет
закрываться, то в моей системе, например, приложение может &quot;накрыться
медным тазом&quot; примерно через 17 часов. Автоматически! Кроме того, файловая
система </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> поддерживает механизм буферизации. Это означает, что
данные, которые якобы записываются, реально записываются на носитель
(синхронизируются) только через какое-то время, когда система сочтет это
правильным и оптимальным. Это повышает производительность системы и даже
продлевает ресурс жестких дисков. Системный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>close</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> не форсирует запись данных на диск, однако дает
больше гарантий того, что данные останутся в целости и сохранности.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Системный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>close</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> объявлен в файле </span><b><span lang=EN-US
style='font-size:11.0pt'>unistd</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>h</span></b><span style='font-size:11.0pt'>.
Ниже приведен его адаптированный прототип:</span></p>

<p class=a style='line-height:normal'><b><span lang=EN-US style='font-size:
11.0pt'>int</span></b><b><span lang=EN-US style='font-size:11.0pt'> </span></b><b><span
lang=EN-US style='font-size:11.0pt'>close</span></b><b><span style='font-size:
11.0pt'> (</span></b><b><span lang=EN-US style='font-size:11.0pt'>int</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>fd</span></b><b><span style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Очевидно, что единственный аргумент - это файловый
дескриптор. Возвращаемое значение <b>0</b> в случае успеха, и <b>1</b> - в
случае ошибки. Довольно часто </span><b><span lang=EN-US style='font-size:11.0pt'>close</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> вызывают
без проверки возвращаемого значения. Это не очень грубая ошибка, но, тем не
менее, иногда закрытие файла бывает неудачным (в случае неправильного
дескриптора, в случае прерывания функции по сигналу или в «случае ошибки
ввода-вывода, например). В любом случае, если программа сообщит пользователю,
что файл невозможно закрыть, это хорошо.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251654144;left:0px;margin-left:-337px;
margin-top:381px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251654144'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>37                                                                                                                                                                            
    38</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Теперь можно написать простенькую
программу, использующую системные вызовы <b>ореn() </b>и </span><b><span
lang=EN-US style='font-size:11.0pt'>close</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'>. Мы еще не умеем читать из
файлов и писать в файлы, поэтому напишем программу, которая создает файл с
именем, переданным в качестве аргумента (</span><b><span lang=EN-US
style='font-size:11.0pt'>argv</span></b><b><span style='font-size:11.0pt'>[1]</span></b><span
style='font-size:11.0pt'>) и с правами доступа <b>0600</b> (чтение и запись для
пользователя). Ниже приведен исходный код программы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>/* </span></i><i><span lang=EN-US style='font-size:
11.0pt'>openclose</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>c</span></i><i><span style='font-size:11.0pt'>
*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>fcntl</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&gt;
/* </span></i><i><span lang=EN-US style='font-size:11.0pt'>open</span></i><i><span
style='font-size:11.0pt'>() </span></i><i><span lang=EN-US style='font-size:
11.0pt'>and</span></i><i><span lang=EN-US style='font-size:11.0pt'> </span></i><i><span
lang=EN-US style='font-size:11.0pt'>O</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>XXX</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>flags</span></i><i><span
style='font-size:11.0pt'> */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; /* S_IXXX flags
*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; /* mode_t */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; /* close() */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdlib.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (int argc, char ** argv)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>int fd;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>mode_t mode = S_IRUSR |
S_IWUSR;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>int flags = O_WRONLY |
O_CREAT | O_EXCL;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if (argc &lt; 2)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>fprintf (stderr,
&quot;openclose: Too few arguments\n”);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>fprintf (stderr,
&quot;Usage: openclose &lt;filename&gt;\n&quot;);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=DA style='font-size:11.0pt'>exit (1);</span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=DA
style='font-size:11.0pt'>            }</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=DA style='font-size:11.0pt'>fd = open (argv[1], flags, mode);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(fd&lt;0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>fprintf (stderr,
&quot;openclose: Cannot open file '%s'\n&quot;, argv[1]);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>exit(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if (close (fd)!=0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>fprintf (stderr,
&quot;Cannot close file (descriptor=%d)\n&quot;, fd);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span
style='font-size:11.0pt'>(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'> (0);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Обратите внимание, если запустить программу дважды с
одним и тем же аргументом, то на второй раз <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()
</span></b><span style='font-size:11.0pt'>выдаст ошибку. В этом виноват флаг </span><b><span
lang=EN-US style='font-size:11.0pt'>O</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>EXCL</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>(см.
Таблицу 4 Приложения 1), который &quot;дает добро&quot; только на создание еще
не существующих файлов. Наглядности ради, флаги открытия и флаги режима мы
занесли в отдельные переменные, однако можно было бы сделать так:</span></p>

<p class=MsoNormal style='text-align:justify'><i><span style='font-size:11.0pt'> 
</span></i><i><span lang=EN-US style='font-size:11.0pt'>fd = open (argv[1],
O_WRONLY | O_CREAT | O_EXCL, S_IRUSR | S_IWUSR);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Или</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>так</span><span lang=EN-US style='font-size:11.0pt'>:</span></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='font-size:11.0pt'>   </span></i><i><span lang=EN-US style='font-size:
11.0pt'>fd = open (argv[1], O_WRONLY | O_CREAT |O_EXCL, 0600);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>3.5. </span></b><b><span style='font-size:
11.0pt'>Чтение</span></b><b><span style='font-size:11.0pt'> </span></b><b><span
style='font-size:11.0pt'>файла</span></b><b><span lang=EN-US style='font-size:
11.0pt'>: </span></b><b><span style='font-size:11.0pt'>системный</span></b><b><span
style='font-size:11.0pt'> </span></b><b><span style='font-size:11.0pt'>вызов</span></b><b><span
lang=EN-US style='font-size:11.0pt'> read()</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Системный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>read</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>, объявленный в файле </span><b><span lang=EN-US
style='font-size:11.0pt'>unistd</span></b><b><span style='font-size:11.0pt'>.</span></b><b><span
lang=EN-US style='font-size:11.0pt'>h</span></b><span style='font-size:11.0pt'>,
позволяет читать данные из файла. В отличие от библиотечных функций файлового
ввода-вывода, которые предоставляют возможность интерпретации считываемых
данных. Можно, например, записать в файл следующее содержимое: 2006.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь, используя библиотечные механизмы, можно читать
файл по-разному:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>fscanf(filep, &quot;%s&quot;, buffer);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>fscanf (filep, &quot;%d&quot;, number);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Системный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>read</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> читает данные в &quot;сыром&quot; виде, то есть как
последовательность байт, без какой-либо интерпретации. Ниже представлен
адаптированный прототип </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>ssize</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>t</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>read</span></b><b><span style='font-size:11.0pt'> (</span></b><b><span
lang=EN-US style='font-size:11.0pt'>int</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>fd</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>void</span></b><b><span style='font-size:11.0pt'> * </span></b><b><span
lang=EN-US style='font-size:11.0pt'>buffer</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>size</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>t</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>count</span></b><b><span style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первый аргумент - это файловый дескриптор. Здесь
больше сказать нечего. Второй аргумент - это указатель на область памяти, куда
будут помещаться данные. Третий аргумент - количество байт, которые функция </span><b><span
lang=EN-US style='font-size:11.0pt'>read</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> будет пытаться прочитать
из файла. Возвращаемое значение -количество прочитанных байт, если чтение
состоялось и <b>-1</b>, если произошла ошибка. Хочу заметить, что если </span><b><span
lang=EN-US style='font-size:11.0pt'>read</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> возвращает значение меньше
</span><b><span lang=EN-US style='font-size:11.0pt'>count</span></b><span
style='font-size:11.0pt'>, то это не символизирует об ошибке.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251655168;left:0px;margin-left:-328px;
margin-top:256px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251655168'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>39                                                                                                                                                                            
    40</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Несколько слов о типах. Тип </span><b><span
lang=EN-US style='font-size:11.0pt'>size</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>t</span></b><span
style='font-size:11.0pt'> в </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> используется для хранения размеров блоков памяти.
Какой тип реально скрывается за </span><b><span lang=EN-US style='font-size:
11.0pt'>size</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>t</span></b><span style='font-size:11.0pt'>,
зависит от архитектуры; как правило это </span><b><span lang=EN-US
style='font-size:11.0pt'>unsigned</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>long</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>int</span></b><span style='font-size:11.0pt'> или </span><b><span
lang=EN-US style='font-size:11.0pt'>unsigned</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>int</span></b><span
style='font-size:11.0pt'>. Тип </span><b><span lang=EN-US style='font-size:
11.0pt'>ssize</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>t</span></b><span style='font-size:11.0pt'>
(</span><span lang=EN-US style='font-size:11.0pt'>Signed</span><span
lang=EN-US style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:
11.0pt'>SIZE</span><span lang=EN-US style='font-size:11.0pt'> </span><span
lang=EN-US style='font-size:11.0pt'>Type</span><span style='font-size:11.0pt'>)
- это тот же </span><b><span lang=EN-US style='font-size:11.0pt'>size</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>t</span></b><span
style='font-size:11.0pt'>, только знаковый. Используется, например, в тех
случаях, когда нужно сообщить об ошибке, вернув отрицательный размер блока
памяти. Системный вызов </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> именно так
и поступает.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь напишем программу, которая просто читает файл и
выводит его содержимое н</span><span lang=EN-US style='font-size:11.0pt'>a</span><span
style='font-size:11.0pt'> экран. Имя файла будет передаваться в качестве
аргумента (</span><b><span lang=EN-US style='font-size:11.0pt'>argv</span></b><b><span
style='font-size:11.0pt'>[1]</span></b><span style='font-size:11.0pt'>). Ниже
приведен исходный код этой программы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* myread.c */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdlib.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (int argc, char ** argv)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int fd;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>ssize_t ret;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char ch;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fd = open (argv[1], O_RDONLY);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(fd&lt;0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;Cannot open
file\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while ((ret= read (fd, &amp;ch, 1)) &gt; 0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>putchar (ch);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(ret&lt;0) </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>fprintf (stderr,
&quot;myread: Cannot read file\n&quot;);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span
style='font-size:11.0pt'>(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>close</span></i><i><span style='font-size:
11.0pt'> (</span></i><i><span lang=EN-US style='font-size:11.0pt'>fd</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'> (0);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В этом примере используется укороченная версия <b>оре</b></span><b><span
lang=EN-US style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>, так как файл открывается только для чтения. В
качестве буфера (второй аргумент </span><b><span lang=EN-US style='font-size:
11.0pt'>read</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'>) мы передаем адрес переменной типа </span><span
lang=EN-US style='font-size:11.0pt'>char</span><span style='font-size:11.0pt'>.
По этому адресу будут считываться данные из файла (по одному байту за раз) и
передаваться на стандартный вывод. Цикл чтения файла заканчивается, когда </span><b><span
lang=EN-US style='font-size:11.0pt'>read</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> возвращает нуль (нечего
больше читать) или <b>-1</b> (ошибка). Системный вызов </span><b><span
lang=EN-US style='font-size:11.0pt'>close</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> закрывает файл.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как можно заметить, в нашем примере системный вызов </span><b><span
lang=EN-US style='font-size:11.0pt'>read</span></b><b><span style='font-size:
11.0pt'>() </span></b><span style='font-size:11.0pt'>вызывается ровно столько
раз, сколько байт содержится в файле. Иногда это действительно нужно; но не
здесь. Чтение-запись посимвольным методом (как в нашем примере) значительно
замедляет процесс ввода-вывода за счет многократных обращений к системным
вызовам. По этой же причине возрастает вероятность возникновения ошибки. Если
нет действительной необходимости, файлы нужно читать блоками. Ниже приведен
исходный код программы, которая делает то же самое, что и предыдущий пример, но
с использованием блочного чтения файла. Размер блока установлен в 64 байта.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>/* </span></i><i><span lang=EN-US style='font-size:
11.0pt'>myread</span></i><i><span style='font-size:11.0pt'>1.с */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>stdlib</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define BUFFER_SIZE 64</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (int argc, char ** argv)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int fd;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>ssize_t read_bytes;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251656192;left:0px;margin-left:-315px;
margin-top:223px;width:574px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251656192'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>41                                                                                                                                                                            
    42</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><i><span lang=EN-US style='font-size:11.0pt'>char buffer[BUFFER_SIZE+1];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fd = open (argv[1], O_RDONLY);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(fd&lt;0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;Cannot open
file\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>read_bytes = read (fd, buffer,
BUFFER_SIZE)) &gt; 0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>……………………………</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;myread: Cannot read
file\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'>(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>close</span></i><i><span style='font-size:
11.0pt'> (</span></i><i><span lang=EN-US style='font-size:11.0pt'>fd</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'> (0);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><u><span
style='font-size:11.0pt'>Примечание:</span></u><span style='font-size:11.0pt'>
дополните самостоятельно недостающие строчки в программе </span><b><span
lang=EN-US style='font-size:11.0pt'>myread</span></b><b><span style='font-size:
11.0pt'>1.с</span></b><i><span style='font-size:11.0pt'>.</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь можно примерно оценить и сравнить скорость
работы двух примеров. Для этого надо выбрать в системе достаточно большой файл
(бинарник ядра или видеофильм, например) и посмотреть на то, как быстро
читаются эти файлы:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ time ./myread /boot/vmlinuz &gt;
/dev/null</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>real 0m 1.443s</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>user 0m0.383s</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>sys 0ml.039s</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>$ time ./myread 1 /boot/vmiinuz &gt;
/dev/null </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>real 0m0.055s </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>user 0m0.010s </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>sys</span></i><i><span style='font-size:
11.0pt'> 0</span></i><i><span lang=EN-US style='font-size:11.0pt'>m</span></i><i><span
style='font-size:11.0pt'>0.023</span></i><i><span lang=EN-US style='font-size:
11.0pt'>s</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>$</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Примечание: чтобы эти программы знали, какой именно
файл следует открывать и читать, необходимо написать дополнительную (главную)
программу, которая будет запрашивать имя этого файла и вызывать программу </span><b><span
lang=EN-US style='font-size:11.0pt'>myread</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>или<b> </b></span><b><span
lang=EN-US style='font-size:11.0pt'>myread</span></b><b><span style='font-size:
11.0pt'>1</span></b><span style='font-size:11.0pt'>. Или же можно вместо </span><b><span
lang=EN-US style='font-size:11.0pt'>argv</span></b><b><span style='font-size:
11.0pt'>[1] </span></b><span style='font-size:11.0pt'> указать имя файла,
заключенное в кавычки. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3.6. Запись в файл: системный вызов </span></b><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>()</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для записи данных в файл используется системный вызов </span><span
lang=EN-US style='font-size:11.0pt'>write</span><span style='font-size:11.0pt'>().
Ниже</span><span style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>представлен</span><span
style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>его</span><span
style='font-size:11.0pt'> </span><span style='font-size:11.0pt'>прототип</span><span
lang=EN-US style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>ssize_t write (int fd, const void * buffer,
size_t count);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как видите, прототип </span><b><span lang=EN-US
style='font-size:11.0pt'>write</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> отличается от </span><b><span lang=EN-US
style='font-size:11.0pt'>read</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> только спецификатором <b>const</b> во втором
аргументе. В принципе </span><b><span lang=EN-US style='font-size:11.0pt'>write</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> выполняет
процедуру, обратную </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>:
записывает </span><span lang=EN-US style='font-size:11.0pt'>count</span><span
style='font-size:11.0pt'> байтов из буфера </span><b><span lang=EN-US
style='font-size:11.0pt'>buffer</span></b><span style='font-size:11.0pt'> в
файл с дескриптором <b>fd</b>, возвращая количество записанных байтов или -1 в
случае ошибки. Так просто, что можно сразу переходить к примеру. За основу
возьмем программу </span><b><span lang=EN-US style='font-size:11.0pt'>myread</span></b><b><span
style='font-size:11.0pt'>1</span></b><span style='font-size:11.0pt'> из
предыдущего раздела.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* rw.c */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdlib.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; /* read(),
write(), close() */ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt; /* open(),
O_RDONLY */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251657216;left:0px;margin-left:-334px;
margin-top:482px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251657216'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>43                                                                                                                                                                            
    44</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><i><span lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt;
/* S_IRUSR */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; /* mode_t.*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define BUFFER_SIZE 64</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (int argc, char ** argv)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int fd;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>ssize_t read_bytes;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>ssize_t written_bytes;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char buffer[BUFFER_SIZE];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fd = open (argv[1], 0_RDONLY);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if (fd&lt;0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;Cannot open
file\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while ((read_bytes = read (fd, buffer,
BUFFER_SIZE)) &gt; 0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>/* 1 == stdout */ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>written_bytes = write (1, buffer,
read_bytes);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(written_bytes!=read_bytes) ,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;Cannot
write\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if (read_bytes &lt; 0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;myread: Cannot read
file\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'>(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>close</span></i><i><span style='font-size:
11.0pt'> (</span></i><i><span lang=EN-US style='font-size:11.0pt'>fd</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'> (0);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>}</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В этом примере нам уже не надо изощряться в попытках
вставить нуль-терминатор в строку для записи, поскольку системный вызов </span><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>() </span></b><span style='font-size:11.0pt'>не запишет большее
количество байт, чем мы ему указали. В данном случае для демонстрации </span><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>() </span></b><span style='font-size:11.0pt'>мы просто записывали
данные в файл с дескриптором <b>1</b>, то есть в стандартный вывод. Но прежде,
чем переходить к чтению следующего раздела, попробуйте самостоятельно записать
что-нибудь (при помощи </span><b><span lang=EN-US style='font-size:11.0pt'>write</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>,
естественно) в обычный файл. Когда будете открывать файл для записи, обратите
пожалуйста внимание на флаги </span><b><span lang=EN-US style='font-size:11.0pt'>O</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>TRUNC</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>O</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>CREAT</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'>и </span><b><span
lang=EN-US style='font-size:11.0pt'>O</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>APPEND</span></b><span style='font-size:
11.0pt'>. Подумайте, все ли флаги сочетаются между собой по смыслу.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>3.7. Произвольный доступ: системный вызов </span></b><b><span
lang=EN-US style='font-size:11.0pt'>lseek</span></b><b><span style='font-size:
11.0pt'>()</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как уже говорилось, с каждым открытым файлом связано
число, указывающее на текущую позицию чтения-записи. При открытии файла позиция
равна нулю. Каждый вызов </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> или </span><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> увеличивает текущую
позицию на значение, равное числу прочитанных или записанных байт. Благодаря
этому механизму, каждый повторный вызов </span><b><span lang=EN-US
style='font-size:11.0pt'>read</span></b><b><span style='font-size:11.0pt'>()</span></b><span
style='font-size:11.0pt'> читает следующие данные, и каждый повторный </span><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>() </span></b><span style='font-size:11.0pt'>записывает данные в
продолжение предыдущих, а не затирает старые. Такой механизм последовательного
доступа очень удобен, однако иногда требуется получить произвольный доступ к
содержимому файла, чтобы, например, прочитать или записать файл заново.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для изменения текущей позиции чтения-записи
используется системный вызов </span><span lang=EN-US style='font-size:11.0pt'>l<b>seek</b></span><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>. Ниже
представлен его прототип.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>off</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>t</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><b><span lang=EN-US
style='font-size:11.0pt'>lseek</span></b><b><span style='font-size:11.0pt'> (</span></b><b><span
lang=EN-US style='font-size:11.0pt'>int</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>fd</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>ott</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>t</span></b><b><span lang=EN-US
style='font-size:11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>offset</span></b><b><span
style='font-size:11.0pt'>, </span></b><b><span lang=EN-US style='font-size:
11.0pt'>int</span></b><b><span lang=EN-US style='font-size:11.0pt'> </span></b><b><span
lang=EN-US style='font-size:11.0pt'>against</span></b><b><span
style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первый аргумент, как всегда, - файловый дескриптор.
Второй аргумент - смещение, как положительное (вперед), так и отрицательное
(назад). Третий аргумент обычно передается в виде одной из трех констант </span><b><span
lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>SET</span></b><span
style='font-size:11.0pt'>, </span><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>CUR</span></b><span
style='font-size:11.0pt'> и </span><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>END</span></b><span
style='font-size:11.0pt'>, которые показывают, от какого места отсчитывается
смещение. </span><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>SET</span></b><span
style='font-size:11.0pt'> - означает начало файла, </span><b><span lang=EN-US
style='font-size:11.0pt'>SEEK</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>CUR</span></b><span style='font-size:11.0pt'>
- текущая позиция, </span><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>END</span></b><span
style='font-size:11.0pt'> - конец файла. Рассмотрим следующие вызовы:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><i><span
lang=EN-US style='font-size:11.0pt'>l</span></i></b><b><i><span
style='font-size:11.0pt'>seek </span></i></b><b><span style='font-size:11.0pt'>(fd,
0, </span></b><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>SET</span></b><b><span
style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><i><span
lang=EN-US style='font-size:11.0pt'>lseek</span></i></b><b><i><span lang=EN-US
style='font-size:11.0pt'> </span></i></b><b><span style='font-size:11.0pt'>(</span></b><b><span
lang=EN-US style='font-size:11.0pt'>fd</span></b><b><span style='font-size:
11.0pt'>, 20, </span></b><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>CUR</span></b><b><span
style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><i><span
lang=EN-US style='font-size:11.0pt'>lseek</span></i></b><b><i><span lang=EN-US
style='font-size:11.0pt'> </span></i></b><b><span style='font-size:11.0pt'>(</span></b><b><span
lang=EN-US style='font-size:11.0pt'>fd</span></b><b><span style='font-size:
11.0pt'>, -10, </span></b><b><span lang=EN-US style='font-size:11.0pt'>SEEK</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>END</span></b><b><span
style='font-size:11.0pt'>);</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первый вызов устанавливает текущую позицию в начало
файла. Второй вызов смещает позицию вперед на 20 байт. В третьем случае текущая
позиция перемещается на 10 байт назад относительно конца файла.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В случае удачного завершения, </span><b><span
lang=EN-US style='font-size:11.0pt'>lseek</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> возвращает значение
установленной &quot;новой&quot; позиции относительно начала файла. В случае
ошибки возвращается <b>-1</b>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251658240;left:0px;margin-left:-334px;
margin-top:341px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251658240'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>45                                                                                                                                                                            
    46</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Рассмотрим программу рисования символами.
Программа оказалась не слишком простой, однако если вы сможете разобраться в
ней, то можете считать, что успешно овладели азами низкоуровневого ввода-вывода
</span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'>. Ниже представлен исходный код этой программы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>/* </span></i><i><span lang=EN-US style='font-size:
11.0pt'>draw</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>c</span></i><i><span style='font-size:11.0pt'>
*/ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>stdlib</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;string.h&gt; /* memset() */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define N_ROWS 15 /* Image height */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define N_COLS 40 /* Image width */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define FG_CHAR '0' /* Foreground character
*/ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define IMG_FN &quot;image&quot; /* Image
filename */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define N_MIN(A,B) ((A)&lt;(B)?(A):(B))</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#defme N_MAX(A,B) ((A)&gt;(B)?(A):(B))</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>static char buffer[N_COLS];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void init_draw (int fd)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>ssize_t bytes_written = 0;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>memset (buffer,'', N_COLS);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>buffer [N_COLS] = '\n';</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while (bytes_written &lt; (N_ROWS *
(N_COLS+1)))</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>bytes_written += write (fd, buffer,
N_COLS+1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void draw_point (int fd, int x, int y)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char ch = FG_CHAR;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>lseek (fd, </span></i><i><span
style='font-size:11.0pt'>у</span></i><i><span lang=EN-US style='font-size:11.0pt'>
* (N_COLS+1) + x, SEEK_SET);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>write (fd, &amp;ch, 1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void draw_hline (int fd, int y, int x1, int
x2)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>size_t bytes_write = abs (x2-x1) + 1;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>memset (buffer, FG_CHAR, bytes_write);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>lseek (fd, y * (N_COLS+1) + N_MIN (x1, x2),
SEEK_SET);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>write (fd, buffer, bytes_write);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void draw_vline (int fd, int x, int y1, int
y2)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>inti=N_MIN(yl,y2);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while (i &lt;= N_MAX(y2, y1)) draw_point
(fd, x, i++);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main (void)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int a, b, c, i = 0;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char ch;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int fd = open (IMG_FN, O_WRONLY | O_CREAT |
O_TRUNC, 0644);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(fd&lt;0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>fprintf (stderr, &quot;Cannot open
file\n&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit(1);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>init_draw (fd);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char * icode[] = { &quot;v 1 1 11&quot;,
&quot;v 11 7 11&quot;, &quot;v 14 5 11&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&quot;v 18 6 11&quot;, &quot;v 21 5
10&quot;, &quot;v 25 5 10&quot;, &quot;v 29 5 6&quot;, &quot;v 33 5 6&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&quot;v 29 10 11&quot;, &quot;v 33 10
11&quot;, &quot;h 11 1 8&quot;,&quot;h 5 16 17&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&quot;h 11 22 24&quot;, &quot;p 11 5
0&quot;, &quot;p 15 6 0&quot;, &quot;</span></i><i><span style='font-size:11.0pt'>р</span></i><i><span
lang=EN-US style='font-size:11.0pt'> 26 11 0&quot;, &quot;</span></i><i><span
style='font-size:11.0pt'>р</span></i><i><span lang=EN-US style='font-size:11.0pt'>
30 7 0&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&quot;p 32 7 0&quot;, &quot;p 31 8 0&quot;,
&quot;p 30 9 0&quot;, &quot;p 32 9 0&quot;, NULL };</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while (icode[i]!= NULL) </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>sscanf(icode[i], &quot;%c %d %d %d&quot;,
&amp;ch, &amp;a, &amp;b, &amp;c);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>switch (ch) {</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>case 'v': draw_vline (fd, a, b, c); break;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>case 'h': draw_hline (fd, a, b, c); break;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>case 'p': draw_point (fd, a, b); break;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>default: abort();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>i++;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>} close (fd);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>exit</span></i><i><span style='font-size:
11.0pt'> (0);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251659264;left:0px;margin-left:-337px;
margin-top:199px;width:573px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251659264'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>47                                                                                                                                                                            
    48</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Теперь разберемся, как работает эта
программа. Изначально &quot;полотно&quot; заполняется пробелами. Функция </span><b><span
lang=EN-US style='font-size:11.0pt'>init</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>draw</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> построчно
записывает в файл пробелы, чтобы получился &quot;холст размером </span><b><span
lang=EN-US style='font-size:11.0pt'>N</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>ROWS</span></b><span style='font-size:11.0pt'>
на </span><b><span lang=EN-US style='font-size:11.0pt'>N</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>COLS</span></b><span
style='font-size:11.0pt'>. Массив строк </span><b><span lang=EN-US
style='font-size:11.0pt'>icode</span></b><span style='font-size:11.0pt'> в
функции </span><b><span lang=EN-US style='font-size:11.0pt'>main</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> - это
набор команд рисования. Команда начинается с одной из трех литер: 'v' -
нарисовать вертикальную линию, '</span><span lang=EN-US style='font-size:11.0pt'>h</span><span
style='font-size:11.0pt'>' -нарисовать горизонтальную линию, 'р' - нарисовать
точку. После каждой такой литеры следуют три числа. В случае вертикальной линии
первое число - фиксированная координата X, а два других числа - это начальная и
конечная координаты </span><span lang=EN-US style='font-size:11.0pt'>Y</span><span
style='font-size:11.0pt'>. В случае горизонтальной линии фиксируется координата
Y (первое число). Два остальных числа - начальная координата Х и конечная
координата X. При рисовании точки используются только два первых числа:
координата Х и координата Y. Итак, функция </span><b><span lang=EN-US
style='font-size:11.0pt'>draw</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>vline</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> рисует вертикальную линию,
функция </span><b><span lang=EN-US style='font-size:11.0pt'>draw</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hline</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> рисует
горизонтальную линию, </span><span lang=EN-US style='font-size:11.0pt'>a</span><span
lang=EN-US style='font-size:11.0pt'> </span><b><span lang=EN-US
style='font-size:11.0pt'>draw</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>point</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> рисует точку.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Функция </span><b><span lang=EN-US style='font-size:
11.0pt'>init</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>draw</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> пишет в файл </span><b><span
lang=EN-US style='font-size:11.0pt'>N</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>ROWS</span></b><span style='font-size:11.0pt'>
строк, каждая из которых содержит </span><b><span lang=EN-US style='font-size:
11.0pt'>N</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>COLS</span></b><span style='font-size:11.0pt'>
пробелов, заканчивающихся переводом строки. Это процедура подготовки
&quot;холста&quot;.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Функция </span><b><span lang=EN-US style='font-size:
11.0pt'>draw</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>point</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> вычисляет позицию (исходя
из значений координат), перемещает туда текущую позицию ввода-вывода файла, и
записывает в эту позицию символ (</span><b><span lang=EN-US style='font-size:
11.0pt'>FG</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>CHAR</span></b><span style='font-size:11.0pt'>),
которым мы рисуем &quot;картину&quot;.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Функция </span><b><span lang=EN-US style='font-size:
11.0pt'>draw</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>hline</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> заполняет часть строки
символами </span><b><span lang=EN-US style='font-size:11.0pt'>FG</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>CHAR</span></b><span
style='font-size:11.0pt'>. Так получается горизонтальная линия. Функция </span><b><span
lang=EN-US style='font-size:11.0pt'>draw</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>vline</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> работает
иначе. Чтобы записать вертикальную линию, нужно записывать по одному символу и
каждый раз &quot;перескакивать&quot; на следующую строку. Эта функция работает
медленнее, чем </span><b><span lang=EN-US style='font-size:11.0pt'>draw</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>hline</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>, но иначе
мы не можем.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Полученное изображение записывается в файл </span><b><span
lang=EN-US style='font-size:11.0pt'>image</span></b><span style='font-size:
11.0pt'>. Будьте внимательны: разгрузить исходный код, из программы исключены
многие проверки (</span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>, </span><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'>, диапазон координат и
проч.). Попробуйте включить эти проверки самостоятельно.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>4. Разработка системной оболочки</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<h1 style='margin-left:0cm;text-indent:0cm;line-height:normal'><span
style='font-size:11.0pt'>Модуль 1. Основной модуль</span></h1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Вначале перечисляем библиотеки, которые будут
необходимы для работы основного модуля. Основным он называется потому, что он
начинает работать в самом начале после запуска программы – системной оболочки.
Из него уже вызываются процедуры, работающие с файлами и каталогами, такие,
как: удаление файла, копирование файла, удаление каталога и т.д.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;cstdlib&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;string.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для успешной сдачи задания следует разобраться, что
представляет собой и для чего предназначена КАЖДАЯ из приведенных как выше, так
и ниже, библиотек. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251660288;left:0px;margin-left:-334px;
margin-top:367px;width:574px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251660288'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>49                                                                                                                                                                            
    50</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Далее следует подключить процедуры,
которые будут выполнять те или иные действия с файлами или каталогами. Отметим,
что несмотря на то, что в </span><span lang=EN-US style='font-size:11.0pt'>Linux</span><span
style='font-size:11.0pt'> идеология работы с файлом и каталогом одинакова, одни
и те же типы процедур для файла и каталога должны быть написаны по отдельности.
Дело, по крайней мере, в том, что функции будут разными. Например, для удаления
файла можно использовать процедуру удаления жестких ссылок </span><b><span
lang=EN-US style='font-size:11.0pt'>unlink</span></b><span style='font-size:
11.0pt'>, тогда как для удаления каталога – процедуру </span><b><span
lang=EN-US style='font-size:11.0pt'>rmdir</span></b><span style='font-size:
11.0pt'>. Другое дело, что обе функции можно объединить в одном программном
модуле; если файл – то вызывается </span><b><span lang=EN-US style='font-size:
11.0pt'>unlink</span></b><b><span style='font-size:11.0pt'>, </span></b><span
style='font-size:11.0pt'>если каталог, то – </span><b><span lang=EN-US
style='font-size:11.0pt'>rmdir</span></b><span style='font-size:11.0pt'>.
Правда, предварительно необходимо будет обозначить процедуру проверки свойств
объекта: файл это или каталог и, в соответствии с результатом проверки,
вызывать требующуюся процедуру. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>err</span></i><i><span style='font-size:11.0pt'>1.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/*Модуль – обработчик ошибок*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>df</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/удаляет файл/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>md</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/создает каталог/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>cp</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/копирует файл/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>of</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/открывает файл/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>rd</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/переименовывает  каталог/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>rf</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/переименовывает  файл/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>stfile</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
/выдает информацию о файле/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>namespace</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>std</span></i><i><span style='font-size:11.0pt'>;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь можно начать писать основную часть программы –
главного модуля. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int main()</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char path[300];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char nname[300];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>c</span></i><i><span
style='font-size:11.0pt'>[50];</span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>После описания требующихся массивов создаем блок, который будет выбирать
одну из процедур для обработки файлов или каталогов:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;”if you want delete file type
\&quot;del-f\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want open file
type \&quot;op-f\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want withdraw
file stats type \&quot;st-f\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want copy file
type \&quot;cp-f\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want rename file
type \&quot;rn-f\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want delete dir
type \&quot;del-d\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want create dir
type \&quot;cr-d\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>cout &lt;&lt;&quot;if you want exit type
\&quot;exit\&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Это – часть, «задающая вопросы» о том, что мы хотим
сделать. Теперь рабочая часть (построенная в виде бесконечного цикла). В
зависимости от того, что именно мы введем из предложенного выше списка, на
выполнение будет вызываться та или иная функция (описанная ниже в рамках цикла </span><b><span
lang=EN-US style='font-size:11.0pt'>while</span></b><span style='font-size:
11.0pt'>).  </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while</span></i><i><span style='font-size:
11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>TRUE</span></i><i><span
style='font-size:11.0pt'>)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin</span></i><i><span
style='font-size:11.0pt'>&gt;&gt;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>c</span></i><i><span style='font-size:11.0pt'>;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В зависимости от того, чему равна переменная <b>с</b>,
в рамках этого цикла вызывается та или иная процедура. Например, если эта
переменная равна <b>&quot;</b></span><b><span lang=EN-US style='font-size:11.0pt'>exit</span></b><b><span
style='font-size:11.0pt'>&quot;</span></b><span style='font-size:11.0pt'>, то
производится выход из цикла и программа прекращает работу. Если <b>с</b>= </span><b><span
lang=EN-US style='font-size:11.0pt'>del</span></b><b><span style='font-size:
11.0pt'>-</span></b><b><span lang=EN-US style='font-size:11.0pt'>f</span></b><span
style='font-size:11.0pt'>, вызывается функция </span><b><span lang=EN-US
style='font-size:11.0pt'>delfile</span></b><span style='font-size:11.0pt'>
удаления файла, и т.д.</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(c,
&quot;exit&quot;)==0) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>return 0;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(c, &quot;del-f
&quot;)==0) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>delfile(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
command\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251661312;left:0px;margin-left:-324px;
margin-top:493px;width:573px;height:32px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=32 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251661312'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>51                                                                                                                                                                            
    52</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Здесь вызывается разрабатываемая нами
функция </span><b><span lang=EN-US style='font-size:11.0pt'>delfile</span></b><span
style='font-size:11.0pt'>, см ниже. Параметром этой функции является переменная
</span><b><span lang=EN-US style='font-size:11.0pt'>path</span></b><span
style='font-size:11.0pt'>. Тем самым, здесь, в основном модуле мы лишь задаем
значение переменной </span><b><span lang=EN-US style='font-size:11.0pt'>path</span></b><span
style='font-size:11.0pt'>, передаем в функцию </span><b><span lang=EN-US
style='font-size:11.0pt'>delfile</span></b><span style='font-size:11.0pt'>; в
основном модуле НЕ происходит непосредственно удаления файла. А вот при вызове
функции </span><b><span lang=EN-US style='font-size:11.0pt'>delfile</span></b><span
style='font-size:11.0pt'> происходит ее работа, которая как раз и заключается в
удалении файла. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>После чего программа пишет </span><b><span lang=EN-US
style='font-size:11.0pt'>Enter</span></b><b><span lang=EN-US style='font-size:
11.0pt'> </span></b><b><span lang=EN-US style='font-size:11.0pt'>command</span></b><b><span
lang=EN-US style='font-size:11.0pt'> </span></b><span style='font-size:11.0pt'> (введите
команду). Т.е. после того, как процедура удаления файла закончила свою работу,
предлагается ввести новую команду (например, </span><span lang=EN-US
style='font-size:11.0pt'>rn</span><span style='font-size:11.0pt'>-</span><span
lang=EN-US style='font-size:11.0pt'>f</span><span style='font-size:11.0pt'>; </span><span
lang=EN-US style='font-size:11.0pt'>cr</span><span style='font-size:11.0pt'>-</span><span
lang=EN-US style='font-size:11.0pt'>d</span><span style='font-size:11.0pt'> и
т.д.); после ввода команды мы возвращаемся в начало цикла </span><b><span
lang=EN-US style='font-size:11.0pt'>while</span></b><b><span style='font-size:
11.0pt'>, </span></b><span style='font-size:11.0pt'>затем вновь выполняем
команду в зависимости от того, какую именно команду выбрали. И т.д. Так
происходит до тех пор, пока в качестве переменной <b>с</b> не будет выбрано </span><b><span
lang=EN-US style='font-size:11.0pt'>exit</span></b><span style='font-size:11.0pt'>.
После чего программа завершит свою работу. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Рассмотрим далее основной модуль. </span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><i><span
lang=DA style='font-size:11.0pt'>if(strcmp(c, &quot;op-f&quot;)==0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>openfile(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot; Enter
command\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(c,&quot;st-f&quot;)==0)
</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot; Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>statfile(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
commаnd\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(c,&quot;cp-f&quot;)==0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot; Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;enter
new name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;nname;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>copyfile(path, nname);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout</span></i><i><span
style='font-size:11.0pt'>&lt;&lt;&quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>Enter</span></i><i><span lang=EN-US style='font-size:
11.0pt'> </span></i><i><span lang=EN-US style='font-size:11.0pt'>command</span></i><i><span
style='font-size:11.0pt'>\</span></i><i><span lang=EN-US style='font-size:11.0pt'>n</span></i><i><span
style='font-size:11.0pt'>&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В вышеприведенной процедуре вводились две переменные,
так как эта процедура вызывает копирование файла; поэтому для нее необходимо
имя старого файла (который хотим скопировать) и имя нового файла (в который
хотим скопировать). Как видно, процедура </span><b><span lang=EN-US
style='font-size:11.0pt'>copyfile</span></b><span style='font-size:11.0pt'>
имеет два параметра. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if</span></i><i><span style='font-size:
11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>strcmp</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>c</span></i><i><span
style='font-size:11.0pt'>, &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>rn</span></i><i><span style='font-size:11.0pt'>-</span></i><i><span
lang=EN-US style='font-size:11.0pt'>f</span></i><i><span style='font-size:11.0pt'>&quot;)==0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;enter
new name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;nname;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>renamefile(path,nname);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
command\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(c,
&quot;del-d&quot;)==0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot; Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>deldir(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
command\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(c,&quot;cr-d&quot;)==0)
</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot; Enter
path name\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cin&gt;&gt;path;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>makedir(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Enter
command\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>return</span></i><i><span style='font-size:
11.0pt'> 0;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В данном модуле не используются никакие специфические
функции или процедуры. Только стандартные и написанные нами. Задача основного
модуля - используя остальные модули выполнять то, что требуется от системной
оболочки. Основной модуль передаёт некоторое значение (в данном случае он
передаёт пути к файлам или каталогам) в написанные нами процедуры (которые
находятся в модулях) в зависимости от параметров входной строки. То есть наш
основной модуль выполняет функции командного интерпретатора.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251662336;left:0px;margin-left:-324px;
margin-top:341px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251662336'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>53                                                                                                                                                                            
    54</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>В нем содержатся вызовы функций,
работающих с файлами и каталогами, например, </span><b><span lang=EN-US
style='font-size:11.0pt'>err</span></b><b><span style='font-size:11.0pt'>1, </span></b><b><span
lang=EN-US style='font-size:11.0pt'>df</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>md</span></b><span
style='font-size:11.0pt'> и др. На данный момент эти функции еще отсутствуют,
их следует создать. Пока же, чтобы проверить работу основного модуля,
целесообразно создать лишь (пустые) формы этих функций, т.е. заготовки. Вызов
их не будет производить никаких действий. Но в дальнейшем, по мере реализации
всех функций, они будут работать. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Например, для функции (модуля) открытия файла можно
предварительно написать следующую заготовку:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void openfile(char *path)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>continue;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>и т.д., для всех функций, для которых в основном
модуле имеются вызовы. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>C</span><span style='font-size:11.0pt'>м.
также Приложение 2 (необходимо создать соответствующие заголовочные файлы – для
каждой функции).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Впоследствии, по мере реализации каждой из функций, их
работу можно будет проверять, запуская основной модуль и вызывая
соответствующие операции. Например, для вызова функции открытия файла из
основного модуля после его запуска следует ввести </span><b><span lang=EN-US
style='font-size:11.0pt'>op</span></b><b><span style='font-size:11.0pt'>-</span></b><b><span
lang=EN-US style='font-size:11.0pt'>f</span></b><span style='font-size:11.0pt'>
и нажать </span><b><span lang=EN-US style='font-size:11.0pt'>Enter</span></b><span
style='font-size:11.0pt'>. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><u><span
style='font-size:11.0pt'>Примечание:</span></u><span style='font-size:11.0pt'>
не забывайте заново осуществлять компиляцию и сборку основного модуля всякий
раз, когда Вы изменили хотя бы одну из функций, к которым он обращается! С
целью экономии времени, это целесообразно автоматизировать на основе
использования </span><b><span lang=EN-US style='font-size:11.0pt'>Makefile</span></b><span
style='font-size:11.0pt'>. Как это делается, описано в первой части настоящих
методических указаний. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
2. Вывод описания ошибки</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Рассмотрим код функции, позволяющей узнать описание
последней ошибки.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;errno.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;string.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;err1.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void err1()</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Error:
&quot;&lt;&lt;strerror(errno)&lt;&lt;&quot;\n&quot;;   return;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Структура модуля вполне классическая, сначала идёт
подключение необходимых для работы функций библиотек, потом уже описание самой
функции.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В данном модуле нет ничего особенного, но стоит
отдельно рассмотреть</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Строку</span><span style='font-size:11.0pt'> <b><span
lang=ES>cout&lt;&lt;&quot;Error:&quot;&lt;&lt;strerror(errno)&lt;&lt;&quot;\n&quot;;</span></b></span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Она выводит сообщение с ошибкой, которое получает от
функции </span><b><span lang=EN-US style='font-size:11.0pt'>strerror</span></b><span
style='font-size:11.0pt'>. Данная функция по номеру ошибки возвращает строковое
описание ошибки. А номер ошибки она получает из функции </span><b><span
lang=EN-US style='font-size:11.0pt'>errno</span></b><span style='font-size:
11.0pt'>, которая возвращает номер последней ошибки.</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Эта функция нам понадобится дальше, при написании процедур, выполняющих
действия над файлами или каталогами. Если в процессе их выполнения будут
возникать ошибки, мы, благодаря этой функции, будем знать, какая именно ошибка
произошла. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
3. Открытие файла</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><i><span
style='font-size:11.0pt'>&nbsp;</span></i></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>cstdlib</span></i><i><span style='font-size:11.0pt'>&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;err1.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;of.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void openfile(char *path)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>int fd;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(fd=open(path,О_CREAT,
S_IRWXU)==-1) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>else cout&lt;&lt;&quot;File
opening/creation succesfull\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251663360;left:0px;margin-left:-344px;
margin-top:215px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251663360'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>55                                                                                                                                                                            
    56</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Обратим внимание, что оператор </span><b><span
lang=EN-US style='font-size:11.0pt'>open</span></b><span style='font-size:11.0pt'>
в качестве параметров использует переменную </span><b><span lang=EN-US
style='font-size:11.0pt'>path</span></b><span style='font-size:11.0pt'> (ту
самую, которую мы задавали в основном модуле), а также так называемые флаги (<b>О_</b></span><b><span
lang=EN-US style='font-size:11.0pt'>CREAT</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>S</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>IRWXU</span></b><span
style='font-size:11.0pt'>). Последние определяют права, при которых открыт
файл, имя которого задано переменной </span><b><span lang=EN-US
style='font-size:11.0pt'>path</span></b><span style='font-size:11.0pt'>.
Подробнее про флаги, а также права, с которыми может быть открыт файл, следует
обязательно прочитать где-нибудь. Например, в сети интернет или книге под
названием типа &quot;Программирование на Си для </span><span lang=EN-US
style='font-size:11.0pt'>Linux</span><span style='font-size:11.0pt'>». </span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Стоит также сказать пару слов про подключаемые библиотеки. Нас
интересуют</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>err</span></i><i><span style='font-size:11.0pt'>1.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;
</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &quot;</span></i><i><span lang=EN-US
style='font-size:11.0pt'>of</span></i><i><span style='font-size:11.0pt'>.</span></i><i><span
lang=EN-US style='font-size:11.0pt'>h</span></i><i><span style='font-size:11.0pt'>&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Первая строчка подключает заголовочный файл процедуры
вывода ошибки, чтобы мы могли использовать её. Вторая же содержит прототип
процедуры, которую мы описываем. Подробная информация про заголовочные файлы
находится в Приложении 2.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Рассмотрим теперь саму процедуру открытия файла.
Наибольший интерес вызывает строчка</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if</span></i><i><span style='font-size:
11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>fd</span></i><i><span
style='font-size:11.0pt'>=</span></i><i><span lang=EN-US style='font-size:11.0pt'>open</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>p</span></i><i><span
style='font-size:11.0pt'>а</span></i><i><span lang=EN-US style='font-size:11.0pt'>th</span></i><i><span
style='font-size:11.0pt'>, О_</span></i><i><span lang=EN-US style='font-size:
11.0pt'>CREAT</span></i><i><span style='font-size:11.0pt'>, </span></i><i><span
lang=EN-US style='font-size:11.0pt'>S</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>IRWXU</span></i><i><span style='font-size:
11.0pt'>)==-1)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Эта строка и выполняет основную работу процедуры. В
ней одновременно происходит открытие (создание, если такого файла нет) файла,
присваивание переменной значения файлового дескриптора </span><b><span
lang=EN-US style='font-size:11.0pt'>fd</span></b><span style='font-size:11.0pt'>,
проверка на ошибки. Рассмотрим теперь каждый этап подробнее.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>С помощью функции </span><b><span lang=EN-US
style='font-size:11.0pt'>open</span></b><span style='font-size:11.0pt'>
происходит попытка открытия файла. В данном случае используется связка флагов <b>О_</b></span><b><span
lang=EN-US style='font-size:11.0pt'>CREAT</span></b><b><span style='font-size:
11.0pt'>, </span></b><b><span lang=EN-US style='font-size:11.0pt'>S</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>IRWXU</span></b><span
style='font-size:11.0pt'>, которая указывает функции, что, в случае, если файл
не обнаружен, то необходимо его создать (первый флаг). Далее этому файлу
присваиваются права доступа: для записи, для чтения. Далее функция </span><b><span
lang=EN-US style='font-size:11.0pt'>open</span></b><span style='font-size:11.0pt'>
передаёт значение в переменную </span><b><span lang=EN-US style='font-size:
11.0pt'>fd</span></b><span style='font-size:11.0pt'>, так же происходит
проверка на ошибку (если функция вернула значение <br>
-1, значит произошла ошибка). При этом вызывается разработанная нами процедура </span><b><span
lang=EN-US style='font-size:11.0pt'>err</span></b><b><span style='font-size:
11.0pt'>1</span></b><span style='font-size:11.0pt'>. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
4. Удаление файла</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>cstdlib</span></i><i><span style='font-size:11.0pt'>&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>#inciude &lt;iostream&gt; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>#include &lt;fcntl.h&gt; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>#include &quot;df.h&quot; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>#include &quot;err1.h&quot; </span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><i><span lang=EN-US
style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void delfile(char *path) </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(unlink(path)==-1)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>else
cout&lt;&lt;&quot;File deleting succesfull&quot;;}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Данная процедура должна удалять файл. Делает она это,
большей частью, с помощью функции </span><b><span lang=EN-US style='font-size:
11.0pt'>unlink</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>unlink</span></b><span style='font-size:
11.0pt'> удаляет имя из файловой системы. Если это имя было последней ссылкой
на файл и больше нет процессов, которые держат этот файл открытым, данный файл
удаляется и место, которое он занимает освобождается для дальнейшего
использования.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251664384;left:0px;margin-left:-324px;
margin-top:417px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251664384'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>57                                                                                                                                                                            
    58</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><span style='font-size:11.0pt'>Если имя было последней ссылкой на файл,
но какие-либо процессы всё ещё держат этот файл открытым, файл будет оставлен,
пока последний файловый дескриптор, указывающий на него, не будет закрыт.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если функция завершилась успешно, то она возвращает 0,
в противном случае -1.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
5. Переименование файла</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>cstdlib</span></i><i><span style='font-size:11.0pt'>&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;rf.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;errl.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define BS 1 </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char buf1[BS];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void renamefile(char *path, char *nname)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>int i=0, ffd, sfd;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>ssize_t count;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>ffd=open(path, O_RDONLY);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(ffd==-1)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>sfd=open(nname,
O_WRONLY|O_CREAT|O_EXCL, 0644);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><span style='font-size:11.0pt'>Обратите внимание на цифры 0644,
означающие права на файл, под которыми он открывается (или создается). Следует
обязательно выяснить, что это за цифры, какие они бывают вообще, для чего они.
Почему эти цифры не используются при открытии исходного файла?</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>sfd</span></i><i><span
style='font-size:11.0pt'>==-1)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>while(count=read(ffd,buf1,BS)&gt;0)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><span style='font-size:11.0pt'>Из первого файла (т.е. по файловому
дескриптору </span><b><span lang=EN-US style='font-size:11.0pt'>ffd</span></b><span
style='font-size:11.0pt'>)<b> </b>считывается в буфер (который представляет
собой массив) </span><b><span lang=EN-US style='font-size:11.0pt'>buf</span></b><b><span
style='font-size:11.0pt'>1</span></b><span style='font-size:11.0pt'> число
байт, равное </span><b><span lang=EN-US style='font-size:11.0pt'>BS</span></b><span
style='font-size:11.0pt'>. </span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>write(sfd, buf1, count);</span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>i++;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(count==-1)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Copy
sucсesfull\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Bytes
copyed:&quot;&lt;&lt;i;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>close(ffd);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>unlink(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;\nSource
file sucsefully deleted\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>close</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>sfd</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:relative;z-index:251665408;left:-328px;top:627px;width:574px;
height:660px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251665408'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>59                                                                                                                                                                            
    60</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>}Данная процедура работает по следующему алгоритму</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>1. Открытие файла для чтения</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>2. Создание нового файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>3. Копирование информации из первого файла (исходного)
во второй(новый)</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>4. Удаление первого файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Пункты 1,2,3 уже были рассмотрены, как отдельные
модули. Рассмотрим теперь пункт 4</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while</span></i><i><span style='font-size:
11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>count</span></i><i><span
style='font-size:11.0pt'>=</span></i><i><span lang=EN-US style='font-size:11.0pt'>read</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>ffd</span></i><i><span
style='font-size:11.0pt'>, </span></i><i><span lang=EN-US style='font-size:
11.0pt'>buf</span></i><i><span style='font-size:11.0pt'>1, </span></i><i><span
lang=EN-US style='font-size:11.0pt'>BS</span></i><i><span style='font-size:
11.0pt'>)&gt;0)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>write(sfd, buf1, count);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>i++;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Для понимания работы данного участка кода необходимо
знать функции </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><span
style='font-size:11.0pt'> и </span><b><span lang=EN-US style='font-size:11.0pt'>write</span></b><span
style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>read</span></b><b><span style='font-size:
11.0pt'>()</span></b><span style='font-size:11.0pt'> пытается записать </span><span
lang=EN-US style='font-size:11.0pt'>count</span><span style='font-size:11.0pt'>
байтов файлового описателя </span><b><span lang=EN-US style='font-size:11.0pt'>fd</span></b><span
style='font-size:11.0pt'> в буфер, адрес которого начинается с </span><b><span
lang=EN-US style='font-size:11.0pt'>buf</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если количество </span><b><span lang=EN-US
style='font-size:11.0pt'>count</span></b><span style='font-size:11.0pt'> равно нулю,
то </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>
возвращает это нулевое значение и завершает свою работу. Если </span><b><span
lang=EN-US style='font-size:11.0pt'>count</span></b><span style='font-size:
11.0pt'> больше, чем </span><b><span lang=EN-US style='font-size:11.0pt'>SSIZE</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>MAX</span></b><span
style='font-size:11.0pt'>, то результат не может быть определен. Иными словами,
чтение из первого файла и запись во второй продолжается до тех пор, пока
переменная </span><b><span lang=EN-US style='font-size:11.0pt'>count</span></b><span
style='font-size:11.0pt'> не станет равной 0. </span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>При успешном завершении вызова возвращается количество байтов, которые
были считаны (нулевое значение означает конец файла), а позиция файла
увеличивается на это значение. Если количество прочитанных байтов меньше, чем
количество запрошенных, то это не считается ошибкой:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>например, данные могли быть почти в конце файла, в
канале, на терминале, или </span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'> был
прерван сигналом. В случае ошибки возвращаемое значение равно -1, а переменной <b>е</b></span><b><span
lang=EN-US style='font-size:11.0pt'>rrno</span></b><span style='font-size:11.0pt'>
присваивается номер ошибки. В этом случае позиция файла не определена.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><span style='font-size:
11.0pt'> записывает до </span><b><span lang=EN-US style='font-size:11.0pt'>count</span></b><span
style='font-size:11.0pt'> байтов из буфера <b>buf1</b> в файл, на который
ссылается файловый описатель </span><b><span lang=EN-US style='font-size:11.0pt'>fd</span></b><span
style='font-size:11.0pt'>. </span><span lang=EN-US style='font-size:11.0pt'>POSIX</span><span
style='font-size:11.0pt'> указывает на то, что вызов </span><b><span
lang=EN-US style='font-size:11.0pt'>write</span></b><b><span style='font-size:
11.0pt'>(),</span></b><span style='font-size:11.0pt'> произошедший после вызова
</span><b><span lang=EN-US style='font-size:11.0pt'>read</span></b><b><span
style='font-size:11.0pt'>()</span></b><span style='font-size:11.0pt'>
возвращает уже новое значение. Заметьте, что не все файловые системы
соответствуют стандарту POSIX. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В случае успешного завершения возвращается количество
байтов, которые были записаны (ноль означает, что не было записано ни одного
байта). В случае ошибки возвращается -1, а переменной </span><b><span
lang=EN-US style='font-size:11.0pt'>errno</span></b><span style='font-size:
11.0pt'> присваивается соответствующее значение. Если </span><b><span
lang=EN-US style='font-size:11.0pt'>count</span></b><span style='font-size:
11.0pt'> равен нулю, а файловый описатель ссылается на обычный файл, то будет
возвращен ноль и больше не будет произведено никаких действий. Для специальных
файлов результаты не могут быть перенесены на другую платформу.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Теперь понятно, что тот участок кода просто в цикле
побайтово копирует информацию из одного файла в другой.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Далее, по алгоритму, следует удаление исходного файла,
что в итоге даст нам, по сути, тот же файл, но с другим именем.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
6. Копирование файла</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Процедура копирования файла ничем принципиально не
отличается от -процедуры переименования файла. Единственное отличие- в
процедуре копирования файла не происходит удаление исходного файла.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;cstdlib&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;fcntl.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;errl.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;cp.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define BS 1 </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>char buf[BS];</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251666432;left:0px;margin-left:-353px;
margin-top:627px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251666432'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>61                                                                                                                                                                            
    62</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><i><span lang=EN-US style='font-size:11.0pt'>void copyfile(char *path,
char *nname)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>int i=0, ffd, sfd;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>ssize__t count;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>ffd=open(path,O_RDONLY);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(ffd==-1)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>sfd=open(nname,O_WRONLY|O_CREAT|O_EXCL,0644);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(sfd==-1)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>while(count=read(ffd,buf,BS)&gt;0)</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>{           </span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>write(sfd,buf,count);</span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>i++;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(count==-1) err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;Copy
succefull\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot; Bytes
copyed:\n&quot;&lt;&lt;i;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>close</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>ffd</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>close</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>sfd</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Как видно, эта программа весьма незначительно
отличается от предыдущей программы. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
7. Создание каталога</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>include</span></i><i><span
style='font-size:11.0pt'> &lt;</span></i><i><span lang=EN-US style='font-size:
11.0pt'>cstdlib</span></i><i><span style='font-size:11.0pt'>&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;err1.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void makedir(char *path) </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(mkdir(path,0777)==0)</span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>cout&lt;&lt;&quot;
Directory created\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>else</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>err</span></i><i><span style='font-size:11.0pt'>1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В данном модуле нет ничего сложного, создание каталога
происходит с помощью функции </span><b><span lang=EN-US style='font-size:11.0pt'>mkdir</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int mkdir (const char *pathname, mode_t
mode);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>mkdir</span></b><span style='font-size:
11.0pt'> пытается создать каталог, который называется </span><b><span
lang=EN-US style='font-size:11.0pt'>pathname</span></b><span style='font-size:
11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>mode</span></b><span style='font-size:11.0pt'>
задает права доступа, которые получит свежесозданный каталог. Эти права
стандартным образом модифицируются с помощью </span><b><span lang=EN-US
style='font-size:11.0pt'>umask</span></b><span style='font-size:11.0pt'>; права
доступа оказываются равны (</span><b><span lang=EN-US style='font-size:11.0pt'>mode</span></b><b><span
style='font-size:11.0pt'> &amp; ~</span></b><b><span lang=EN-US
style='font-size:11.0pt'>umask</span></b><span style='font-size:11.0pt'>).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Свежесозданный каталог принадлежит фактическому
владельцу процесса. Если на родительском каталоге установлен флаг </span><b><span
lang=EN-US style='font-size:11.0pt'>setgid</span></b><span style='font-size:
11.0pt'>, или файловая система смонтирована с семантикой групп в стиле </span><span
lang=EN-US style='font-size:11.0pt'>BSD</span><span style='font-size:11.0pt'>,
то новый каталог унаследует группу-владельца от своего родительского каталога;
в противном случае группой-владельцем станет фактическая группа процесса.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если у родительского каталога установлен бит </span><b><span
lang=EN-US style='font-size:11.0pt'>setgid</span></b><span style='font-size:
11.0pt'>, то он будет установлен также и у свежесозданного каталога.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Конечно, ещё стоит прояснить момент с правами доступа,
в нашем случае у каталога будут права 0777. Подробнее про маску доступа можно
прочитать в Приложении 1, 3.</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>&nbsp;</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>&nbsp;</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><b><span
style='font-size:11.0pt'>Модуль 8. Удаление каталога</span></b></p>

<p class=MsoBodyTextIndent style='line-height:normal'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Удаление каталога может показаться простой задачей. Но, в случае, если
необходимо удалить вложенные каталоги и файлы, эта задача слегка усложняется.
Рассмотрим</span><span style='font-size:11.0pt'> </span><span style='font-size:
11.0pt'>модуль</span><span lang=EN-US style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;cstdlib&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;dirent.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;errno.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;string.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;errl.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#inctude &quot;rd.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void deldir(char *path)</span></i></p>

<p class=MsoNormal style='text-align:justify'><span style='position:relative;
z-index:251667456;left:-318px;top:468px;width:574px;height:501px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251667456'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>63                                                                                                                                                                            
    64</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='font-size:11.0pt'>{DIR *dir;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>int u;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>struct dirent *sdir;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>dir=opendir(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(dir==NULL) err1();</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>chdir(path);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>while((sdir=readdir(dir))!=NULL)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>//cout &lt;&lt;
sdir-&gt;d_name&lt;&lt;&quot;\n&quot;;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>u=unlink(sdir-&gt;d_name);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(u==-1 &amp;&amp;
errno==EISDIR)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify'><i><span
lang=EN-US style='font-size:11.0pt'>if(strcmp(&quot;.&quot;,
sdir-&gt;d_name)==0 || strcmp(&quot;..&quot;, sdir-&gt;d_name)==0) </span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>continue;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>deldir(sdir-&gt;d_ name);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=ES style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>if(u==-1 &amp;&amp;
errno==!EISDIR)</span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>} </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>closedir(dir);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>chdir(&quot;..&quot;);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>rmdir</span></i><i><span
style='font-size:11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>path</span></i><i><span
style='font-size:11.0pt'>)==-1) </span></i><i><span lang=EN-US
style='font-size:11.0pt'>err</span></i><i><span style='font-size:11.0pt'>1();</span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Данную процедуру нелегко понять, просто взглянув на
неё, так что рассмотрим все строки с неизвестными операторами.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>DIR *dir; int u;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>struct dirent *sdir;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>dir=opendir(path);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(dir==NULL) err1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>chdir</span></i><i><span style='font-size:
11.0pt'>(</span></i><i><span lang=EN-US style='font-size:11.0pt'>path</span></i><i><span
style='font-size:11.0pt'>);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>На данном участке кода происходит некоторого рода
инициализация каталога. Он открывается, проверяется успешность попытки его
открытия, текущий каталог меняется на данный.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while((sdir=readdir(dir))!=NULL) </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>u=unlink(sdir-&gt;d_name);</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(u==-1 &amp;&amp;
errno==EISDIR)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>   </span></i><i><span lang=EN-US
style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>if(strcmp(&quot;.&quot;,sdir-&gt;d__name)==0
|| strcmp(&quot;..&quot;, sdir-&gt;d_name)==0) </span></i></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>continue;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>deldir(sdir-&gt;d_ name);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=ES style='font-size:11.0pt'>   </span></i><i><span lang=ES
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>if(u==-l &amp;&amp;
errno==!EISDIR) </span></i></p>

<p class=MsoNormal style='margin-left:108.0pt;text-align:justify'><i><span
lang=EN-US style='font-size:11.0pt'>err</span></i><i><span style='font-size:
11.0pt'>1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Этот же участок без сомнения можно назвать самым важным в данном
модуле. Здесь происходит рекурсивное удаление каталога. Рассмотрим его работу
по подробнее.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>while((sdir=readdir(dir))!=NULL)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Наш</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>основной</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>цикл</span><span lang=EN-US style='font-size:11.0pt'>.
</span><span style='font-size:11.0pt'>Те операторы, которые находятся в нём,
будут выполняться, пока не будет достигнут конец каталога.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>u=unlink(sdir-&gt;d_name);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Попытка удаления (к слову говоря, употреблять здесь
слово «удаление» в его общем смысле не совсем верно, функция </span><span
lang=EN-US style='font-size:11.0pt'>unlink</span><span style='font-size:11.0pt'>
удаляет ссылки на файл, а уже потом освобождается дисковое пространство) файла.
По результатам этой попытки наш модуль будет вести так или иначе.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251668480;left:0px;margin-left:-324px;
margin-top:637px;width:573px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251668480'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>65                                                                                                                                                                            
    66</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><i><span lang=EN-US style='font-size:11.0pt'>if(u==-1 &amp;&amp;
errno==EISDIR)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(strcmp(&quot;.&quot;,
sdir-&gt;d_name)==0 || strcmp(&quot;..&quot;, sdir-&gt;d_name)==0) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=ES style='font-size:11.0pt'>continue;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=ES style='font-size:11.0pt'>deldir(sdir-&gt;d_name);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=ES style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=ES style='font-size:11.0pt'>if(u==-1 &amp;&amp; errno==!EISDIR) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err</span></i><i><span
style='font-size:11.0pt'>1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если наша попытка не удалась (то есть функция </span><b><span
lang=EN-US style='font-size:11.0pt'>unlink</span></b><span style='font-size:
11.0pt'> вернула значение -1) и при этом последняя ошибка «</span><b><span
lang=EN-US style='font-size:11.0pt'>EISDIR</span></b><span style='font-size:
11.0pt'>» (то есть ошибка «Это каталог»), то проверяем не является ли имя «.»
или «..» (про эти имена можно более подробно прочитать в справочной литературе,
скажу лишь что они обозначают родительский и текущий каталоги).Если имена
совпали, то мы переходим на следующий итерационный шаг. Иначе просто заново
входим в наш модуль (здесь и появляется рекурсия) передавая имя текущего
каталога.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Если же попытка удаления не успешна и при этом ошибка
не «</span><b><span lang=EN-US style='font-size:11.0pt'>EISDIR</span></b><span
style='font-size:11.0pt'>» то выводим ошибку.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>closedir(dir);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>chdir(&quot;..&quot;);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(rmdir(path)==-1) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err</span></i><i><span
style='font-size:11.0pt'>1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Здесь же происходит соответственно закрытие каталога,
переход в родительский каталог, удаление каталога (удаление в самом простом
смысле, когда он пустой).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Таким образом, рекурсивный вызов заключается в том,
что функция </span><b><span lang=EN-US style='font-size:11.0pt'>deldir</span></b><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><span style='font-size:11.0pt'>вызывает
саму себя до тех пор, пока программа не откроет такой каталог, который не
содержит иных каталогов. При этом программа осуществляет удаление всех файлов в
этом каталоге, выходит из этого (теперь пустого) каталога и удаляет его. И, так
далее, до тех пор, пока не выйдет из исходного каталога и не удалит его. </span></p>

<h2 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Модуль
9. Информация о файле или каталоге</span></h2>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Не смотря на довольно таки массивный код, процедура
проста.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;cstdlib&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;iostream&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/types.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;sys/stat.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;unistd.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;stdio.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;errno.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &lt;string.h&gt; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;stfile.h&quot; </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#include &quot;err1.h&quot;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>using namespace std;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void statfile(char *path) </span></i></p>

<p class=MsoNormal style='text-align:justify'><i><span lang=EN-US
style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>struct stat sb;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(stat(path,&amp;sb)==-1) </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>err1();</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>else</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(&quot;File type:          &quot;):</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>switch (sb.st_mode &amp; S_IFMT)</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>{ </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFBLK:
cout&lt;&lt;&quot; block device\n&quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFCHR:
cout&lt;&lt;''character device\n&quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFDIR:
cout&lt;&lt;&quot;directory\n&quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFIFO:
cout&lt;&lt;&quot;FIFO/pipe \ n &quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFLNK:
cout&lt;&lt;&quot;symlink\n&quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFREG:
cout&lt;&lt;&quot;regularfile\n&quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>case S_IFSOCK:
cout&lt;&lt;&quot;socket\n&quot;; break;</span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>default:
cout&lt;&lt;&quot;unknown?\n&quot;; break;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>}</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(&quot;i-node number: %ld\n&quot;,
(long) sb.st_ino);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=ES style='font-size:11.0pt'>printf(“Mode:       %lo(octal)\n&quot;, </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>(unsigned long)
sb.st_mode);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IRUSR)
cout&lt;&lt;&quot; owner has read permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IWUSR)
cout&lt;&lt;&quot; owner has write permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IXUSR &amp; !S_IFDIR)
cout&lt;&lt;&quot;owner has execute permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st__mode &amp; S_IRGRP)
cout&lt;&lt;&quot;group has read permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IWGRP)
cout&lt;&lt;&quot;group has write permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IXGRP &amp; !S_IFDIR)
cout&lt;&lt;&quot;group has execute permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:absolute;z-index:251669504;left:0px;margin-left:-344px;
margin-top:324px;width:574px;height:33px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=33 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251669504'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>67                                                                                                                                                                            
    68</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span><i><span lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp;
S_IROTH) cout&lt;&lt;&quot;others have read permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IWOTH)
cout&lt;&lt;&quot;others have write permission\n&quot;;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>if(sb.st_mode &amp; S_IXOTH &amp; !S_IFDIR)
cout&lt;&lt;&quot;others have execute permission\n&quot;;</span></i></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Далее следует правильно вывести на экран результаты анализа свойств
файла (каталога). </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(&quot;Link count: %ld\n&quot;,
(long) sb.st_nlink);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(&quot;Ownership: UID=%ld
GID=%ld\n&quot;, </span></i></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
36.0pt'><i><span lang=EN-US style='font-size:11.0pt'>(long) sb.st_uid, (long)
sb.st_gid);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(“Preferred I/O block size: %ld
bytes\n&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>(long) sb.st_blksize);1</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(&quot; File size: %lld
bytes\n&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>(long long) sb.st_size);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>printf(&quot; Blocks allocated:
%lld\n&quot;,</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>(long long) sb.st_blocks);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Единственное, что необходимо знать для понимания
данной процедуры - функция </span><b><span lang=EN-US style='font-size:11.0pt'>stat</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>int stat(const char *file_name, struct stat
*buf);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Эти функции возвращают информацию об указанном файле.
Для этого не требуется иметь права доступа к файлу, хотя потребуются права
поиска во всех каталогах, указанных в полном имени файла.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>stat</span></b><span style='font-size:11.0pt'>
возвращает информацию о файле </span><b><span lang=EN-US style='font-size:11.0pt'>file</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>name</span></b><span
style='font-size:11.0pt'> и заполняет</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>буфер </span><b><span lang=EN-US style='font-size:
11.0pt'>buf</span></b><b><span style='font-size:11.0pt'>. </span></b><b><span
lang=EN-US style='font-size:11.0pt'>Istat</span></b><span style='font-size:
11.0pt'> идентична <b>stat</b>, но в случае символьных ссылок она возвращает
информацию о самой ссылке, а не о файле, на который она указывает, </span><b><span
lang=EN-US style='font-size:11.0pt'>fstat</span></b><span style='font-size:
11.0pt'> идентична <b>stat</b>, только возвращается информация об открытом
файле, на который указывает </span><b><span lang=EN-US style='font-size:11.0pt'>filedes</span></b><span
style='font-size:11.0pt'> (возвращаемый <b>оре</b></span><b><span lang=EN-US
style='font-size:11.0pt'>n</span></b><b><span style='font-size:11.0pt'>(2))</span></b><span
style='font-size:11.0pt'>, а не </span><span lang=EN-US style='font-size:11.0pt'>o</span><span
lang=EN-US style='font-size:11.0pt'> </span><b><span lang=EN-US
style='font-size:11.0pt'>file</span></b><b><span style='font-size:11.0pt'>_</span></b><b><span
lang=EN-US style='font-size:11.0pt'>name</span></b><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Все эти функции возвращают структуру <b>stat</b>,
которая содержит следующие поля:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>struct stat {</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>dev_t                st_dev;  /* </span><span
style='font-size:11.0pt'>устройство</span><span lang=EN-US style='font-size:
11.0pt'> */</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span lang=ES
style='font-size:11.0pt'>ino_t                st_ino;  /* inode */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span lang=ES
style='font-size:11.0pt'>mode_t  st_mode;          /* </span><span
style='font-size:11.0pt'>режим</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>доступа</span><span lang=ES style='font-size:11.0pt'>
*/ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span lang=ES
style='font-size:11.0pt'>nlink_t  st_nlink;           /* </span><span
style='font-size:11.0pt'>количество</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>жестких</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>ссылок</span><span lang=ES style='font-size:11.0pt'>
*/ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>uid</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>                </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>uid</span><span style='font-size:11.0pt'>;  /*
идентификатор пользователя-владельца */</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>gid</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>                 </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>gid</span><span style='font-size:11.0pt'>;  /*
идентификатор группы-владельца*/</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>dev</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>                </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>rdev</span><span style='font-size:11.0pt'>;
           /* тип устройства */</span></p>

<p class=MsoNormal style='margin-left:144.0pt;text-align:justify;text-indent:
36.0pt'><span style='font-size:11.0pt'>/* (если это устройство) */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>off</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>                 </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>size</span><span style='font-size:11.0pt'>;
 /* общий размер в байтах */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>blksize</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>          </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>blksize</span><span style='font-size:11.0pt'>;
       /* размер блока ввода-вывода */</span></p>

<p class=MsoNormal style='margin-left:144.0pt;text-align:justify;text-indent:
36.0pt'><span style='font-size:11.0pt'>/* в файловой системе */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>blkcnt</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>            </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>blocks</span><span style='font-size:11.0pt'>;
        /* количество выделенных блоков */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>time</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>   </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>atime</span><span style='font-size:11.0pt'>;
         /* время последнего доступа */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>time</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>   </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>mtime</span><span style='font-size:11.0pt'>;
        /* время последней модификации */ </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>time</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>t</span><span style='font-size:11.0pt'>   </span><span
lang=EN-US style='font-size:11.0pt'>st</span><span style='font-size:11.0pt'>_</span><span
lang=EN-US style='font-size:11.0pt'>ctime</span><span style='font-size:11.0pt'>;
         /* время последнего изменения */</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Поле </span><b><span lang=EN-US style='font-size:11.0pt'>st</span></b><b><span
style='font-size:11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>size</span></b><span
style='font-size:11.0pt'> задает размер файла (если он обычный или является
символьной ссылкой) в байтах. Размер символьной ссылки - длина пути файла на
который она </span><span lang=EN-US style='font-size:11.0pt'>c</span><span
style='font-size:11.0pt'>сылается, без конечного </span><span lang=EN-US
style='font-size:11.0pt'>NUL</span><span style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h1 style='margin-left:0cm;text-indent:0cm;line-height:normal'><span
style='font-size:11.0pt'>ЗАКЛЮЧЕНИЕ</span></h1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Мы попытались создать простейшую системную оболочку.
Нам удалось организовать не так уж и мало модулей для работы с файлами и
каталогами, которых будет вполне достаточно для работы. Конечно, наш вариант
системный оболочки во многом уступает профессиональным средствам. Наш вариант
системной оболочки нуждается во многих вещах, например</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Оптимизация</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>• </span><span style='font-size:11.0pt'>Дополнение для
работы с каталогами</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:relative;z-index:251670528'><span style='left:0px;position:
absolute;left:-328px;top:-282px;width:574px;height:4px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=4 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251670528'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>69                                                                                                                                                                            
    70</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span></span><span style='font-size:11.0pt'>• </span><span style='font-size:
11.0pt'>Создание нормального командного интерпретатора</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Но, основная цель- понимание работы системной
оболочки. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h1 style='margin-left:0cm;text-indent:0cm;line-height:normal'><span
style='font-size:11.0pt'>СПИСОК РЕКОМЕНДУЕМОЙ ЛИТЕРАТУРЫ</span></h1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>1. Свободная энциклопедия «Википедия»</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>2. Русскоязычные руководства </span><span lang=EN-US
style='font-size:11.0pt'>Linux</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt;color:black'>3.</span><span style='font-size:11.0pt;
color:blue'> <u>http://www.linuxcenter.ru/</u></span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a align=right style='text-align:right;line-height:normal'><span
style='font-size:11.0pt'>Приложение 1</span></p>

<h3 align=center style='margin-left:0cm;text-align:center;text-indent:0cm;
line-height:normal'><span style='font-size:11.0pt'>Флаги режима доступа к файлу</span></h3>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Таблица 1</span></h4>

<h3 align=center style='margin-left:0cm;text-align:center;text-indent:0cm;
line-height:normal'>Флаги общего режима</h3>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:-.4pt;border-collapse:collapse'>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:11.0pt'>Флаг</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:11.0pt'>Восьмеричное представление</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:11.0pt'>RWX-представление</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IRWXU</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00700</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>rwx --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IRUSR</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00400</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>r-- --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IREAD</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00400</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>r-- --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IWUSR</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>00200</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>-w- --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IWRITE</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00200</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>-w- --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IXUSR</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>00100</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--x --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IEXEC</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00100</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--x --- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IRWXG</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00070</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- rwx ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IRGRP</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00040</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- r-- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IWGRP</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00020</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- -w- ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IXGRP</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>00010</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- --x ---</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IRWXO</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00007</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- --- rwx</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IROTH</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00004</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- --- r--</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IWOTH</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00002</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- --- -w-</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=80 valign=top style='width:59.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_IXOTH</span></p>
  </td>
  <td width=200 valign=top style='width:149.7pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>00001</span></p>
  </td>
  <td width=144 valign=top style='width:108.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>--- --- --x</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Таблица 2</span></h4>

<h3 align=center style='margin-left:0cm;text-align:center;text-indent:0cm;
line-height:normal'>Флаги расширенного режима</h3>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:-.4pt;border-collapse:collapse'>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'>Флаг</p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <h5 style='margin-left:0cm;text-indent:0cm;page-break-after:auto'><span
  style='font-size:10.0pt'>Восьмеричное представление</span></h5>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'>Описание</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>S_IFMT</span></p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=LO-Normal><span style='font-family:"Times New Roman",serif'>0170000</span></p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Двоичная маска определения типа файла (побитовое ИЛИ всех
  следующих ниже флагов)</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>S_IFDIR</span></p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>0040000</span></p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Каталог</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>S_IFCHR</span></p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>0020000</p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Символьное устройство</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>S_IFBLK</span></p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>0060000</p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Блочное устройство</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <h6 style='margin-left:0cm;text-indent:0cm;page-break-after:auto'><span
  lang=EN-US style='font-size:10.0pt'>S_IFREG</span></h6>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>0100000</p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Обычный файл</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>S_IFIFO</span></p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>0010000</p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Канал<span lang=EN-US> FIFO</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=66 valign=top style='width:49.65pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US>S_IFLNK</span></p>
  </td>
  <td width=131 valign=top style='width:98.2pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>0120000</p>
  </td>
  <td width=234 valign=top style='width:175.25pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal>Символическая ссылка</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Продолжение приложения 1</span></h4>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>&nbsp;</span></h4>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Таблица 3</span></h4>

<h3 align=center style='margin-left:0cm;text-align:center;text-indent:0cm;
line-height:normal'>Дополнительные флаги</h3>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:-.4pt;border-collapse:collapse'>
 <tr style='height:12.0pt'>
  <td width=71 valign=top style='width:53.55pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:11.0pt'>Флаг</span></p>
  </td>
  <td width=212 valign=top style='width:159.1pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:11.0pt'>Восьмеричное представление</span></p>
  </td>
  <td width=152 valign=top style='width:114.15pt;border:solid black 1.0pt;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <h6 align=center style='margin-left:0cm;text-align:center;text-indent:0cm;
  page-break-after:auto'><span style='font-size:11.0pt'>Описание</span></h6>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=71 valign=top style='width:53.55pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_ISUID</span></p>
  </td>
  <td width=212 valign=top style='width:159.1pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>0004000</span></p>
  </td>
  <td width=152 valign=top style='width:114.15pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>Бит</span><span lang=EN-US
  style='font-size:11.0pt'> SETUID</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=71 valign=top style='width:53.55pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_ISGID</span></p>
  </td>
  <td width=212 valign=top style='width:159.1pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>0002000</span></p>
  </td>
  <td width=152 valign=top style='width:114.15pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>Бит</span><span lang=EN-US
  style='font-size:11.0pt'> SETGID</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=71 valign=top style='width:53.55pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:11.0pt'>S_ISVTX</span></p>
  </td>
  <td width=212 valign=top style='width:159.1pt;border-top:none;border-left:
  solid black 1.0pt;border-bottom:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>0001000</span></p>
  </td>
  <td width=152 valign=top style='width:114.15pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal><span style='font-size:11.0pt'>Липкий</span><span
  lang=EN-US style='font-size:11.0pt'> (sticky)</span><span style='font-size:
  11.0pt'> бит</span></p>
  </td>
 </tr>
</table>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<p class=a style='line-height:normal'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Таблица 4</span></h4>

<h3 align=center style='margin-left:0cm;text-align:center;text-indent:0cm;
line-height:normal'>Флаги режима открытия файла</h3>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:-.4pt;border-collapse:collapse'>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border:solid black 1.0pt;border-right:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center;line-height:90%'>Флаг</p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal align=center style='text-align:center;line-height:90%'>Описание</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_RDONLY</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Только чтение (0)</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_WRONLY</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Только запись (1)</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_RDWR</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Чтение и запись(2)</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_CREAT</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Создать файл, если не существует</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>O_TRUNC</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Стереть файл, если существует</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_APPEND</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Дописывать в конец</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span style='position:relative;
  z-index:251671552'><span style='position:absolute;left:-325px;top:-1521px;
  width:574px;height:4px'>
  <table cellpadding=0 cellspacing=0>
   <tr>
    <td width=574 height=4 bgcolor=white style='vertical-align:top;background:
    white'><span style='position:absolute;z-index:251671552'>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td>
      <div style='padding:0pt 0pt 0pt 0pt'>
      <p class=MsoFootnoteText>71                                                                                                                                                                            
      72</p>
      </div>
      </td>
     </tr>
    </table>
    </span>&nbsp;</td>
   </tr>
  </table>
  </span></span><span lang=EN-US>О_EХCL</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Выдать ошибку, если файл
  существует при использовании <span lang=EN-US>OCREAT</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_DSYNC</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Принудительная синхронизация
  записи</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_RSYNC</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Принудительная синхронизация перед
  чтением</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=LO-Normal style='line-height:90%'><span lang=EN-US style='font-family:
  "Times New Roman",serif'>О_SYNC</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Принудительная полная
  синхронизация записи</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>O_MONBLOCK</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Открыть файл в неблокируемом
  режиме, если это возможно</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_NDELAY</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>То же, что и <span lang=EN-US>O</span>_<span
  lang=EN-US>NONBLOCK</span></p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>O_NOCTTY</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Если открываемый файл -
  терминальное устройство, нe делать его управляющим терминалом процесса</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_NOFOLLOW</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Выдать ошибку, если открываемый
  файл является символической ссылкой</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_DIRECTORY</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Выдать ошибку, если открываемый
  файл не является каталогом</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_DIRECT</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Попытаться минимизировать
  кэширование чтения/записи файла</p>
  </td>
 </tr>
 <tr style='height:12.0pt'>
  <td width=104 style='width:78.0pt;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:none;padding:0cm 2.0pt 0cm 2.0pt;
  height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'><span lang=EN-US>О_ASYNC</span></p>
  </td>
  <td width=327 style='width:245.1pt;border:solid black 1.0pt;border-top:none;
  padding:0cm 2.0pt 0cm 2.0pt;height:12.0pt'>
  <p class=MsoNormal style='line-height:90%'>Генерировать сигнал, когда
  появляется возможность чтения или записи в файл</p>
  </td>
 </tr>
</table>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Приложение 2</span></h4>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><b><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:11.0pt'>Заголовочные файлы</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>В данном приложении содержится информация по
заголовочным файлам наших процедур. Прежде всего опишем, что такое заголовочные
файлы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Заголовочный файл (иногда головной файл, англ. </span><span
lang=EN-US style='font-size:11.0pt'>header</span><span lang=EN-US
style='font-size:11.0pt'> </span><span lang=EN-US style='font-size:11.0pt'>file</span><span
style='font-size:11.0pt'>),</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>или подключаемый файл — в языках программирования Си и
C++ файл, содержащий определения типов данных, структуры, прототипы функций,
перечисления, макросы препроцессора. Имеет по умолчанию расширение .</span><span
lang=EN-US style='font-size:11.0pt'>h</span><span style='font-size:11.0pt'>;
иногда для заголовочных файлов языка C++ используют расширение .hрр. Заголовочный
файл используется путём включения его текста в данный файл директивой
препроцессора <b>#</b></span><b><span lang=EN-US style='font-size:11.0pt'>include</span></b><span
style='font-size:11.0pt'>. Чтобы избежать повторного включения одного и того же
кода, используются директивы <b>#</b></span><b><span lang=EN-US
style='font-size:11.0pt'>ifndef</span></b><b><span style='font-size:11.0pt'>, #</span></b><b><span
lang=EN-US style='font-size:11.0pt'>define</span></b><b><span style='font-size:
11.0pt'>, #</span></b><b><span lang=EN-US style='font-size:11.0pt'>endif</span></b><b><span
style='font-size:11.0pt'>.</span></b></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Заголовочный файл в общем случае может содержать любые конструкции
языка программирования, но на практике исполняемый код (за исключением
inline-функций в C++) в заголовочные файлы не помещают. Например,
идентификаторы, которые должны быть объявлены более чем в одном файле, удобно
описать в заголовочном файле, а затем его подключать по мере надобности.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Основная цель использования заголовочных файлов —
вынесение описания нестандартных типов и функций за пределы основного файла с
кодом. На этом же принципе построены библиотеки: в заголовочном файле перечисляются
содержащиеся в библиотеке функции и используемые ею структуры/типы, при этом
исходный текст библиотеки может находиться отдельно от текста программы,
использующей функции библиотеки или вообще быть недоступным.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Например, по сложившейся традиции, в заголовочных
файлах объявляют функции стандартной библиотеки Си и Си++.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Рассмотрим заголовочные файлы наших процедур. Они не
содержат ничего, кроме прототипа процедуры и нескольких директив. </span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Копирование файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>ifndef</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>CP</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>define</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>CP</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:relative;z-index:251672576'><span style='left:0px;position:
absolute;left:-347px;top:-2325px;width:574px;height:4px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=574 height=4 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251672576'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>73                                                                                                                                                                            
    74</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span></span><i><span lang=EN-US style='font-size:11.0pt'>void copyfile(char
*, char *);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#endif     /* CP_H */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Удаление</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#ifndef DF_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define DF_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void delfile(char *);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#endif    /* DF_H */ </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Вывод</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>ошибки</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#ifndef ERR_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define ERR_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#pragma once </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void  err1(void);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>endif</span></i><i><span
style='font-size:11.0pt'>    /* </span></i><i><span lang=EN-US
style='font-size:11.0pt'>ERR</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span style='font-size:11.0pt'>
*/</span></i></p>

<h3 style='margin-left:0cm;line-height:normal'><i><span style='font-size:11.0pt'>&nbsp;</span></i></h3>

<h3 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt'>Создание
директории</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>ifndef</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>MD</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define MD_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void makedir(char *);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#endif /* MD_H */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Открытие</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#ifndef OF_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define OF_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void openfile(char *);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>endif</span></i><i><span
style='font-size:11.0pt'>    /* </span></i><i><span lang=EN-US
style='font-size:11.0pt'>OF</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span style='font-size:11.0pt'>
*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Удаление директории</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>ifndef</span></i><i><span
lang=EN-US style='font-size:11.0pt'> </span></i><i><span lang=EN-US
style='font-size:11.0pt'>RD</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span lang=EN-US
style='font-size:11.0pt'> </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define RD_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void deldir(char *);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#endif     /* RD_H */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Переименование</span><span style='font-size:11.0pt'> </span><span
style='font-size:11.0pt'>файла</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#ifndef RF_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define RF_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void renamefile(char *path, char *nname);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>#</span></i><i><span lang=EN-US style='font-size:11.0pt'>endif</span></i><i><span
style='font-size:11.0pt'>   /* </span></i><i><span lang=EN-US style='font-size:
11.0pt'>RF</span></i><i><span style='font-size:11.0pt'>_</span></i><i><span
lang=EN-US style='font-size:11.0pt'>H</span></i><i><span style='font-size:11.0pt'>
*/</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
style='font-size:11.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Информация о файле или директории</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#ifndef STFILE_H </span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#define STFILE_H</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>void statfile(char *path);</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><i><span
lang=EN-US style='font-size:11.0pt'>#endif /* STFILE_H */</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
lang=EN-US style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Стоит подробнее остановится на директиве <b>#</b></span><b><span
lang=EN-US style='font-size:11.0pt'>ifndef</span></b><span style='font-size:
11.0pt'>. Эта директива указывает, что нужно компилировать строчки, идущие
после неё, если символьная константа не определена (в случае модуля «Информация
о файле или директории» символьной константой является </span><b><span
lang=EN-US style='font-size:11.0pt'>STFILE</span></b><b><span style='font-size:
11.0pt'>_</span></b><b><span lang=EN-US style='font-size:11.0pt'>H</span></b><span
style='font-size:11.0pt'>) и компиляция будет происходить, пока не встретится
строчка  <b>#</b></span><b><span lang=EN-US style='font-size:11.0pt'>endif</span></b><span
style='font-size:11.0pt'>.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<h4 style='margin-left:0cm;line-height:normal'><span style='font-size:11.0pt;
font-weight:normal'>Приложение 3</span></h4>

<p class=MsoNormal align=right style='text-align:right;text-indent:36.0pt'><b><span
style='font-size:11.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyTextIndent align=center style='text-align:center;text-indent:
0cm;line-height:normal'><span style='font-size:11.0pt'>Маски прав доступа</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>&nbsp;</span></p>

<p class=MsoBodyTextIndent style='line-height:normal'><span style='font-size:
11.0pt'>Маска прав доступа определяет кто имеет доступ к информации. Следует
разделять маски для файлов и для каталогов, они различаются на один бит-Т бит.
Если Т бит установлен в 1, то удалять файл из директории имеет право только
владелец директории/ иначе(то есть если стоит 0) -удалять может не только
владелец. Рассмотрим теперь оставшиеся три бита маски (они одинаковы для
директории и для файла).</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='position:relative;z-index:251673600'><span style='left:0px;position:
absolute;left:-324px;top:-3511px;width:573px;height:4px'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=573 height=4 bgcolor=white style='vertical-align:top;background:
  white'><span style='position:absolute;left:0pt;z-index:251673600'>
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div style='padding:0pt 0pt 0pt 0pt'>
    <p class=MsoFootnoteText>75                                                                                                                                                                            
    76</p>
    </div>
    </td>
   </tr>
  </table>
  </span>&nbsp;</td>
 </tr>
</table>

</span></span><span style='font-size:11.0pt'>400 — владелец имеет право на
чтение;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>200 — владелец имеет право на запись;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>100 — владелец имеет право на выполнение;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>40 — группа имеет право на чтение;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>20 — группа имеет право на запись;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>10 — группа имеет право на выполнение;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>4 — остальные имеют право на чтение;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>2 — остальные имеют право на запись;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>1 — остальные имеют право на выполнение.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>Суммировав эти коды можно получить символьную запись.
Например, 444:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>400+40+4=444 — все имеют право только на чтение.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:36.0pt'><span
style='font-size:11.0pt'>&nbsp;</span></p>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
